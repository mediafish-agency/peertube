import{a as Ht,b as ue,c as Qt,d as Ce,e as We,f as qe}from"./chunk-4TM5NREB.js";import{a as jt}from"./chunk-IKIPVIJH.js";import"./chunk-VTUTDAHH.js";import"./chunk-LOVXD4GQ.js";import{a as Gt}from"./chunk-VHK64JUH.js";import{c as $t,d as Bt}from"./chunk-WLZVZYNX.js";import{a as zt}from"./chunk-Y6U7ONPJ.js";import{a as ge}from"./chunk-GPZBMIXX.js";import"./chunk-ENSRLQ2F.js";import{a as se}from"./chunk-D3FHDE3Z.js";import"./chunk-JKIUJPUH.js";import"./chunk-PZG7XDNU.js";import{a as je}from"./chunk-CF2PRKCK.js";import"./chunk-AJTAIDL7.js";import"./chunk-XIGDB2RN.js";import"./chunk-24QQSIIJ.js";import"./chunk-FCT3LKDI.js";import"./chunk-K67EGD4G.js";import{a as Xt}from"./chunk-T4ZRIFMF.js";import"./chunk-3NN6IC32.js";import{a as de}from"./chunk-JPIRBOZL.js";import"./chunk-EBTUWTIZ.js";import{a as me}from"./chunk-R5XTUDD2.js";import"./chunk-KOE64Z5J.js";import{a as Qe}from"./chunk-3MBKLVXT.js";import{a as _e}from"./chunk-CVTLOUPO.js";import"./chunk-LUFSC2DY.js";import"./chunk-CNM6TRJ3.js";import"./chunk-X6JWC5WV.js";import{c as pe}from"./chunk-GP5LX4CA.js";import"./chunk-4V7EB4W6.js";import{a as ze,b as Xe}from"./chunk-KG4UYECH.js";import"./chunk-NO6VG5DO.js";import{a as ie}from"./chunk-7HXKHM3O.js";import{a as He}from"./chunk-4XL6BJ7M.js";import"./chunk-RBCGTDIC.js";import"./chunk-DPQ4XGHN.js";import{B as Be,t as St,u as It,v as Dt,w as xt,x as Vt,y as Tt}from"./chunk-XEFO2OX5.js";import{a as le}from"./chunk-WRZZAQTV.js";import{b as oe,c as Ut}from"./chunk-RZGVOE4L.js";import{A as ne,c as ye,f as Y,g as K,k as J,l as Z,n as yt,o as ee,z as te}from"./chunk-AHXSH3AS.js";import{Aa as mt,Ab as Pe,B as gt,Bb as he,Ca as l,Da as d,Dd as Et,Eb as E,Fb as S,Gb as I,Ib as B,Kb as ft,Kd as $e,La as $,Oa as O,Pf as Rt,Qf as X,R as Oe,Sa as p,Sb as Mt,T as ut,Tb as Pt,Te as re,Ua as Ot,Wb as bt,Wf as Ft,Zc as Le,_f as Lt,ab as c,ad as z,ba as U,bb as a,bd as Ue,cb as v,da as Fe,db as V,eb as T,ef as kt,fg as ae,gb as x,hg as H,ib as fe,if as Nt,j as dt,jb as Me,kb as g,la as u,lb as W,m as _t,ma as C,mb as q,nd as it,oa as Ct,ob as M,pb as _,pc as vt,qf as ce,r as Re,rc as G,rd as Ne,sa as k,sg as j,tf as wt,ug as Ge,vb as R,vf as At,wb as F,wc as ht,xb as L,yb as ve,zb as w}from"./chunk-4A7FW7VV.js";import"./chunk-BERSDMCF.js";import"./chunk-ONF7AOBQ.js";import{a as we,b as Ae,j as r,k as N}from"./chunk-K6ICEIKK.js";var be=class be extends Ut{constructor(){super(...arguments);r(this,"userVideoChannels",[]);r(this,"videoPrivacies",[]);r(this,"videoCaptions",[]);r(this,"chaptersEdit",new Ht());r(this,"firstStepPrivacyId");r(this,"firstStepChannelId");r(this,"loadingBar");r(this,"notifier");r(this,"authService");r(this,"serverService");r(this,"videoService");r(this,"videoCaptionService");r(this,"videoChapterService");r(this,"serverConfig");r(this,"highestPrivacy");}ngOnInit(){this.buildForm({}),Nt(this.authService).subscribe(e=>{this.userVideoChannels=e,this.firstStepChannelId=this.userVideoChannels[0].id;}),this.serverConfig=this.serverService.getHTMLConfig(),this.serverService.getVideoPrivacies().subscribe(e=>{let n=this.serverConfig.defaults.publish.privacy,{videoPrivacies:t,defaultPrivacyId:o}=this.videoService.explainedPrivacyLabels(e,n);this.videoPrivacies=t,this.firstStepPrivacyId=o,this.highestPrivacy=this.videoService.getHighestAvailablePrivacy(e);});}updateVideoAndCaptionsAndChapters(e){let{video:n,captions:t,chapters:o}=e;return this.loadingBar.useRef().start(),this.videoService.updateVideo(n).pipe(Oe(()=>this.videoCaptionService.updateCaptions(n.uuid,t)),Oe(()=>o?this.videoChapterService.updateChapters(n.uuid,o):dt(!0)),ut(()=>this.loadingBar.useRef().complete()),gt(m=>{throw this.loadingBar.useRef().complete(),m;}));}isFormValid(){return N(this,null,function*(){return yield this.waitPendingCheck(),this.forceCheck(),this.form.valid;});}};r(be,"\u0275fac",(()=>{let e;return function(t){return(e||(e=Ct(be)))(t||be);};})()),r(be,"\u0275dir",Fe({type:be,features:[$]}));var Q=be;function Wt(i,s){if(i&1){let e=x();c(0,"div",14)(1,"div",15),v(2,"my-global-icon",16),c(3,"div",17)(4,"label",18),g(5,0),a(),c(6,"my-select-channel",19),I("ngModelChange",function(t){u(e);let o=_();return S(o.firstStepChannelId,t)||(o.firstStepChannelId=t),C(t);}),a()(),c(7,"div",17)(8,"label",20),g(9,1),a(),c(10,"my-select-options",21),I("ngModelChange",function(t){u(e);let o=_();return S(o.firstStepPrivacyId,t)||(o.firstStepPrivacyId=t),C(t);}),a()(),c(11,"div",22)(12,"div",23)(13,"input",24),I("ngModelChange",function(t){u(e);let o=_();return S(o.firstStepPermanentLive,t)||(o.firstStepPermanentLive=t),C(t);}),a(),c(14,"label",25),g(15,2),a(),c(16,"span",26),w(17),a()(),c(18,"div",23)(19,"input",27),I("ngModelChange",function(t){u(e);let o=_();return S(o.firstStepPermanentLive,t)||(o.firstStepPermanentLive=t),C(t);}),a(),c(20,"label",28),g(21,3),a(),c(22,"span",26),g(23,4),a()()(),c(24,"input",29),M("click",function(){u(e);let t=_();return C(t.goLive());}),a()()();}if(i&2){let e=_();l(6),p("items",e.userVideoChannels),E("ngModel",e.firstStepChannelId),l(4),p("items",e.videoPrivacies),E("ngModel",e.firstStepPrivacyId),l(3),E("ngModel",e.firstStepPermanentLive),p("value",!1),l(4),Pe(e.getNormalLiveDescription()),l(2),E("ngModel",e.firstStepPermanentLive),p("value",!0),l(4),W(e.getPermanentLiveDescription()),q(23),l(),p("disabled",e.firstStepPermanentLive!==!0&&e.firstStepPermanentLive!==!1);}}function qt(i,s){if(i&1&&(c(0,"div",30)(1,"div"),g(2,5),a(),w(3),a()),i&2){let e=_();l(3),he(" ",e.error,`
`);}}function Yt(i,s){if(i&1&&(c(0,"div",31),g(1,6),Mt(2,"myTimeDurationFormatter"),a()),i&2){let e=_();l(2),W(Pt(2,1,e.getMaxLiveDuration())),q(1);}}var Se=class Se extends Q{constructor(e,n,t,o,m,P,h,y,b,f,D){super();this.formReactiveService=e;this.loadingBar=n;this.notifier=t;this.authService=o;this.serverService=m;this.videoService=P;this.videoCaptionService=h;this.videoChapterService=y;this.liveVideoService=b;this.router=f;this.hooks=D;r(this,"firstStepDone",new k());r(this,"firstStepError",new k());r(this,"firstStepPermanentLive");r(this,"isInUpdateForm",!1);r(this,"isUpdatingVideo",!1);r(this,"isOrHasGoingLive",!1);r(this,"liveVideo");r(this,"videoId");r(this,"videoUUID");r(this,"videoShortUUID");r(this,"error");}ngOnInit(){super.ngOnInit();}ngAfterViewInit(){this.hooks.runAction("action:go-live.init","video-edit");}canDeactivate(){return{canDeactivate:!0};}goLive(){if(this.isOrHasGoingLive)return;this.isOrHasGoingLive=!0;let e="Live",n={name:e,privacy:this.firstStepPrivacyId===$e.PASSWORD_PROTECTED?$e.PRIVATE:this.highestPrivacy,nsfw:this.serverConfig.instance.isNSFW,waitTranscoding:!0,permanentLive:this.firstStepPermanentLive,latencyMode:Et.DEFAULT,saveReplay:this.isReplayAllowed(),replaySettings:{privacy:$e.PRIVATE},channelId:this.firstStepChannelId},t=Ae(we({},n),{privacy:this.firstStepPrivacyId,replayPrivacy:n.replaySettings.privacy});this.form.patchValue(t),this.liveVideoService.goLive(n).subscribe({next:o=>{this.videoId=o.video.id,this.videoUUID=o.video.uuid,this.videoShortUUID=o.video.shortUUID,this.isInUpdateForm=!0,this.firstStepDone.emit(e),this.fetchVideoLive();},error:o=>{this.firstStepError.emit();let m=o.message,P=o.body;(P==null?void 0:P.code)===Ne.MAX_INSTANCE_LIVES_LIMIT_REACHED?m="Cannot create live because this instance have too many created lives":(P==null?void 0:P.code)===Ne.MAX_USER_LIVES_LIMIT_REACHED&&(m="Cannot create live because you created too many lives"),this.notifier.error(m);}});}updateSecondStep(){return N(this,null,function*(){if(!(yield this.isFormValid()))return;this.isUpdatingVideo=!0;let e=new ue();e.patch(this.form.value),e.id=this.videoId,e.uuid=this.videoUUID,e.shortUUID=this.videoShortUUID,this.chaptersEdit.patch(this.form.value);let n=this.form.value.saveReplay,t=n?{privacy:this.form.value.replayPrivacy}:void 0,o={saveReplay:n,replaySettings:t,latencyMode:this.form.value.latencyMode,permanentLive:this.form.value.permanentLive};Re([this.updateVideoAndCaptionsAndChapters({video:e,captions:this.videoCaptions}),this.liveVideoService.updateLive(this.videoId,o)]).subscribe({next:()=>{this.isUpdatingVideo=!1,this.notifier.success("Publicat en directe."),this.router.navigateByUrl(He.buildWatchUrl(e));},error:m=>{this.error=m.message,ce(),re.error(m);}});});}getMaxLiveDuration(){return this.serverConfig.live.maxDuration/1e3;}getNormalLiveDescription(){return this.isReplayAllowed()?"Stream only once, replay will replace your live":"Stream only once";}getPermanentLiveDescription(){return this.isReplayAllowed()?"Stream multiple times, replays will be separate videos":"Stream multiple times using the same URL";}isReplayAllowed(){return this.serverConfig.live.allowReplay;}fetchVideoLive(){this.liveVideoService.getVideoLive(this.videoId).subscribe({next:e=>{this.liveVideo=e;},error:e=>{this.firstStepError.emit(),this.notifier.error(e.message);}});}};r(Se,"\u0275fac",function(n){return new(n||Se)(d(oe),d(ie),d(ae),d(H),d(X),d(pe),d(_e),d(me),d(je),d(z),d(j));}),r(Se,"\u0275cmp",U({type:Se,selectors:[["my-video-go-live"]],outputs:{firstStepDone:"firstStepDone",firstStepError:"firstStepError"},standalone:!0,features:[$,B],decls:7,vars:12,consts:()=>{let e;e="Update";let n;n="Go Live";let t;t="Canal";let o;o="Privacy";let m;m="Normal live";let P;P="Permanent/recurring live";let h;h=""+"\uFFFD0\uFFFD"+"";let y;y="Ens sap greu, per\xF2 quelcom va malament";let b;return b="La m\xE0xima duraci\xF3 en directe \xE9s "+"\uFFFD0\uFFFD"+". Si la transmissi\xF3 arriba al l\xEDmit, es cancel\xB7lar\xE0 autom\xE0ticament. ",[t,o,m,P,h,y,b,["class","upload-video-container",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","alert pt-alert-primary",4,"ngIf"],["novalidate","",3,"hidden","formGroup"],["forbidScheduledPublication","true","hideWaitTranscoding","true","displayTranscriptionInfo","false","type","go-live",3,"form","formErrors","videoCaptions","validationMessages","userVideoChannels","liveVideo"],[1,"submit-container"],["theme","orange","label",e,"icon","circle-tick",3,"click","disabled"],[1,"upload-video-container"],[1,"first-step-block"],["iconName","upload","aria-hidden","true",1,"upload-icon"],[1,"form-group"],["for","first-step-channel"],["labelForId","first-step-channel",3,"ngModelChange","items","ngModel"],["for","first-step-privacy"],["labelForId","first-step-privacy",3,"ngModelChange","items","ngModel"],[1,"form-group","live-type"],[1,"peertube-radio-container"],["type","radio","id","permanentLiveFalse",3,"ngModelChange","ngModel","value"],["for","permanentLiveFalse",1,"radio"],[1,"form-group-description"],["type","radio","id","permanentLiveTrue",3,"ngModelChange","ngModel","value"],["for","permanentLiveTrue",1,"radio"],["type","button","value",n,3,"click","disabled"],[1,"alert","alert-danger"],[1,"alert","pt-alert-primary"]];},template:function(n,t){n&1&&(O(0,Wt,25,11,"div",7)(1,qt,4,1,"div",8)(2,Yt,3,3,"div",9),c(3,"form",10),v(4,"my-video-edit",11),c(5,"div",12)(6,"my-button",13),M("click",function(){return t.updateSecondStep();}),a()()()),n&2&&(p("ngIf",!t.isInUpdateForm),l(),p("ngIf",t.error),l(),p("ngIf",t.isInUpdateForm&&t.getMaxLiveDuration()>=0),l(),p("hidden",!t.isInUpdateForm)("formGroup",t.form),l(),p("form",t.form)("formErrors",t.formErrors)("videoCaptions",t.videoCaptions)("validationMessages",t.validationMessages)("userVideoChannels",t.userVideoChannels)("liveVideo",t.liveVideo),l(2),p("disabled",!t.form.valid||t.isUpdatingVideo===!0));},dependencies:[G,le,ge,te,Z,ye,yt,Y,K,J,se,ne,ee,Ce,de,jt],styles:['.peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;width:auto;border-radius:3px;color:var(--inputForegroundColor);background:var(--inputBackgroundColor);position:relative;height:min-content}.peertube-select-container.disabled[_ngcontent-%COMP%]{background-color:#e5e5e5}.peertube-select-container.disabled[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:default}.peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{background-color:#f9f9f9}@media screen and (max-width: auto){.peertube-select-container[_ngcontent-%COMP%]{width:100%}}.peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:calc(0% + 15px);content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid rgba(0,0,0,0);border-top-color:var(--mainForegroundColor);margin-top:-2px;z-index:100}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:15px;padding:3px 35px 3px 12px;position:relative;border:1px solid var(--inputBorderColor);background:transparent none;-webkit-appearance:none;appearance:none;text-overflow:ellipsis;color:var(--mainForegroundColor);line-height:23px}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:-moz-focusring{color:transparent;text-shadow:0 0 0 #000}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[value=undefined][_ngcontent-%COMP%]{font-weight:600}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]{background-color:var(--greyBackgroundColor);color:var(--greyForegroundColor)}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus, .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem #5858580d}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:hover, .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:active, .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus, .peertube-select-container.peertube-select-button[disabled][_ngcontent-%COMP%], .peertube-select-container.peertube-select-button.disabled[_ngcontent-%COMP%]{color:var(--greyForegroundColor);background-color:var(--greySecondaryBackgroundColor)}.peertube-select-container.peertube-select-button[disabled][_ngcontent-%COMP%], .peertube-select-container.peertube-select-button.disabled[_ngcontent-%COMP%]{cursor:default}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:var(--greyForegroundColor)}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-weight:600;color:var(--greyForegroundColor);border:0;padding:4px 35px 4px 12px}my-peertube-checkbox[_ngcontent-%COMP%]{display:block;margin-bottom:1rem}.nav-tabs[_ngcontent-%COMP%]{margin-bottom:15px}.video-edit[_ngcontent-%COMP%]{height:100%;min-height:300px}.video-edit[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;font-size:15px;padding:3px 15px;width:100%;max-width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid var(--inputBorderColor);border-radius:3px;line-height:23px}.video-edit[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}.video-edit[_ngcontent-%COMP%]   input[readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width: calc(100% + 40px)){.video-edit[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}.caption-entry[_ngcontent-%COMP%]{display:flex;height:40px;align-items:center}.caption-entry[_ngcontent-%COMP%]   a.caption-entry-label[_ngcontent-%COMP%]{color:var(--mainForegroundColor)}.caption-entry[_ngcontent-%COMP%]   a.caption-entry-label[_ngcontent-%COMP%]:hover, .caption-entry[_ngcontent-%COMP%]   a.caption-entry-label[_ngcontent-%COMP%]:focus, .caption-entry[_ngcontent-%COMP%]   a.caption-entry-label[_ngcontent-%COMP%]:active{text-decoration:none!important}.caption-entry[_ngcontent-%COMP%]   a.caption-entry-label[_ngcontent-%COMP%]:focus:not(:focus-visible){outline:none!important}.caption-entry[_ngcontent-%COMP%]   a.caption-entry-label[_ngcontent-%COMP%]:hover{opacity:.8}.caption-entry[_ngcontent-%COMP%]   .caption-entry-label[_ngcontent-%COMP%]{font-weight:700;min-width:100px;margin-inline-end:1.25rem}.caption-entry[_ngcontent-%COMP%]   .caption-entry-state[_ngcontent-%COMP%]{min-width:250px;margin-inline-end:.9375rem}.caption-entry[_ngcontent-%COMP%]   .caption-entry-state.caption-entry-state-create[_ngcontent-%COMP%]{color:#38ab0b}.caption-entry[_ngcontent-%COMP%]   .caption-entry-state.caption-entry-state-delete[_ngcontent-%COMP%]{color:red}.caption-entry[_ngcontent-%COMP%]   .caption-entry-edit[_ngcontent-%COMP%]{padding:4px 13px;border:0;font-weight:600;border-radius:3px!important;text-align:center;cursor:pointer;font-size:15px;line-height:23px}.caption-entry[_ngcontent-%COMP%]   .caption-entry-edit[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-inline-end:.25rem;margin-inline-start:.25rem}.caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]{padding:4px 13px;border:0;font-weight:600;border-radius:3px!important;text-align:center;cursor:pointer;font-size:15px;line-height:23px;background-color:var(--greyBackgroundColor);color:var(--greyForegroundColor)}.caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-inline-end:.25rem;margin-inline-start:.25rem}.caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]:focus, .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem #5858580d}.caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]:hover, .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]:active, .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]:focus, .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[disabled][_ngcontent-%COMP%], .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete.disabled[_ngcontent-%COMP%]{color:var(--greyForegroundColor);background-color:var(--greySecondaryBackgroundColor)}.caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[disabled][_ngcontent-%COMP%], .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete.disabled[_ngcontent-%COMP%]{cursor:default}.caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:var(--greyForegroundColor)}.no-caption[_ngcontent-%COMP%]{text-align:center}.submit-container[_ngcontent-%COMP%]{text-align:end}.submit-container[_ngcontent-%COMP%]   .message-submit[_ngcontent-%COMP%]{display:inline-block;color:var(--greyForegroundColor);margin-inline-end:calc(1.28125rem + .375vw)}@media (min-width: 1200px){.submit-container[_ngcontent-%COMP%]   .message-submit[_ngcontent-%COMP%]{margin-inline-end:1.5625rem}}p-calendar[_ngcontent-%COMP%]{display:block}p-calendar[_ngcontent-%COMP%]     .p-calendar{width:100%}p-calendar[_ngcontent-%COMP%]     .p-inputtext{color:#000;font-size:15px;padding:3px 15px;width:100%;max-width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid var(--inputBorderColor);border-radius:3px;line-height:23px}p-calendar[_ngcontent-%COMP%]     .p-inputtext::placeholder{color:var(--inputPlaceholderColor)}p-calendar[_ngcontent-%COMP%]     .p-inputtext[readonly]{opacity:.7}@media screen and (max-width: calc(100% + 40px)){p-calendar[_ngcontent-%COMP%]     .p-inputtext{width:100%}}.form-columns[_ngcontent-%COMP%]{display:grid;grid-template-columns:66% 1fr;grid-gap:30px}.button-file[_ngcontent-%COMP%]{width:max-content;position:relative;overflow:hidden;display:inline-block;padding:4px 13px;border:0;font-weight:600;border-radius:3px!important;text-align:center;cursor:pointer;font-size:15px;line-height:23px}.button-file[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:100%;height:100%;font-size:100px;text-align:end;filter:alpha(opacity=0);opacity:0;outline:none;background:var(--mainBackgroundColor);cursor:inherit;display:block}.button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-inline-end:.25rem;margin-inline-start:.25rem}.button-file[_ngcontent-%COMP%]:focus, .button-file[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--mainColorLightest)}.button-file[_ngcontent-%COMP%], .button-file[_ngcontent-%COMP%]:active, .button-file[_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}.button-file[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}.button-file[disabled][_ngcontent-%COMP%], .button-file.disabled[_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:var(--inputBorderColor)}.button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:#fff}.hide-chapter-label[_ngcontent-%COMP%]{height:0;opacity:0}.chapter[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto minmax(150px,350px) 1fr;grid-template-rows:auto auto;column-gap:1rem}.chapter[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]{height:31px;min-width:16px;display:flex;align-items:center}.chapter[_ngcontent-%COMP%]   my-delete-button[_ngcontent-%COMP%]{width:fit-content}.chapter[_ngcontent-%COMP%]   .form-error[_ngcontent-%COMP%]{margin-top:0}@media screen and (max-width: 1040px){.main-col:not(.expanded)[_nghost-%COMP%]   .form-columns[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .form-columns[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media screen and (max-width: 800px){.main-col.expanded[_nghost-%COMP%]   .form-columns[_ngcontent-%COMP%], .main-col.expanded   [_nghost-%COMP%]   .form-columns[_ngcontent-%COMP%]{grid-template-columns:1fr}}',".live-type[_ngcontent-%COMP%]{margin-top:15px}",'.alert.alert-danger[_ngcontent-%COMP%]{text-align:center}.alert.alert-danger[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{font-weight:600}.first-step-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.first-step-block[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{width:90px;margin-bottom:25px}.first-step-block[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]     .feather, .first-step-block[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]     .material, .first-step-block[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]     .misc{color:var(--inputBorderColor)}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;width:275px;border-radius:3px;color:var(--inputForegroundColor);background:var(--inputBackgroundColor);position:relative;height:min-content}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container.disabled[_ngcontent-%COMP%]{background-color:#e5e5e5}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container.disabled[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:default}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{background-color:#f9f9f9}@media screen and (max-width: 275px){.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]{width:100%}}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:calc(0% + 15px);content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid rgba(0,0,0,0);border-top-color:var(--mainForegroundColor);margin-top:-2px;z-index:100}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:15px;padding:3px 35px 3px 12px;position:relative;border:1px solid var(--inputBorderColor);background:transparent none;-webkit-appearance:none;appearance:none;text-overflow:ellipsis;color:var(--mainForegroundColor);line-height:23px}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:-moz-focusring{color:transparent;text-shadow:0 0 0 #000}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[value=undefined][_ngcontent-%COMP%]{font-weight:600}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]{background-color:var(--greyBackgroundColor);color:var(--greyForegroundColor)}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus, .first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem #5858580d}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:hover, .first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:active, .first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus, .first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[disabled][_ngcontent-%COMP%], .first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button.disabled[_ngcontent-%COMP%]{color:var(--greyForegroundColor);background-color:var(--greySecondaryBackgroundColor)}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[disabled][_ngcontent-%COMP%], .first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button.disabled[_ngcontent-%COMP%]{cursor:default}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:var(--greyForegroundColor)}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-weight:600;color:var(--greyForegroundColor);border:0;padding:4px 35px 4px 12px}.first-step-block[_ngcontent-%COMP%]   my-select-options[_ngcontent-%COMP%]     ng-select, .first-step-block[_ngcontent-%COMP%]   my-select-channel[_ngcontent-%COMP%]     ng-select, .first-step-block[_ngcontent-%COMP%]   .peertube-radio-container[_ngcontent-%COMP%], .first-step-block[_ngcontent-%COMP%]   .form-group-description[_ngcontent-%COMP%]{width:275px}@media screen and (max-width: 275px){.first-step-block[_ngcontent-%COMP%]   my-select-options[_ngcontent-%COMP%]     ng-select, .first-step-block[_ngcontent-%COMP%]   my-select-channel[_ngcontent-%COMP%]     ng-select, .first-step-block[_ngcontent-%COMP%]   .peertube-radio-container[_ngcontent-%COMP%], .first-step-block[_ngcontent-%COMP%]   .form-group-description[_ngcontent-%COMP%]{width:100%}}.first-step-block[_ngcontent-%COMP%]   .form-group-description[_ngcontent-%COMP%]{white-space:nowrap}.first-step-block[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{display:block;font-size:15px;padding:3px 15px;width:275px;max-width:275px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid var(--inputBorderColor);border-radius:3px;line-height:23px}.first-step-block[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}.first-step-block[_ngcontent-%COMP%]   input[type=text][readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width: 315px){.first-step-block[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%}}.first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]{width:275px;margin-top:30px;padding:4px 13px;border:0;font-weight:600;border-radius:3px!important;text-align:center;cursor:pointer;font-size:15px;line-height:23px}.first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-inline-end:.25rem;margin-inline-start:.25rem}.first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]:focus, .first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--mainColorLightest)}.first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%], .first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]:active, .first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}.first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}.first-step-block[_ngcontent-%COMP%]   input[type=button][disabled][_ngcontent-%COMP%], .first-step-block[_ngcontent-%COMP%]   input[type=button].disabled[_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:var(--inputBorderColor)}.first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:#fff}.first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]{width:max-content;position:relative;overflow:hidden;display:inline-block;padding:4px 13px;border:0;font-weight:600;border-radius:3px!important;text-align:center;cursor:pointer;font-size:15px;line-height:23px}.first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:100%;height:100%;font-size:100px;text-align:end;filter:alpha(opacity=0);opacity:0;outline:none;background:var(--mainBackgroundColor);cursor:inherit;display:block}.first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-inline-end:.25rem;margin-inline-start:.25rem}.first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]:focus, .first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--mainColorLightest)}.first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%], .first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]:active, .first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}.first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}.first-step-block[_ngcontent-%COMP%]   .button-file[disabled][_ngcontent-%COMP%], .first-step-block[_ngcontent-%COMP%]   .button-file.disabled[_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:var(--inputBorderColor)}.first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:#fff}']}));var Ye=Se;var Ie=class Ie{constructor(){r(this,"fileDropped",new k());r(this,"dragover",!1);}onDragOver(s){s.preventDefault(),s.stopPropagation(),this.dragover=!0;}onDragLeave(s){s.preventDefault(),s.stopPropagation(),this.dragover=!1;}ondrop(s){s.preventDefault(),s.stopPropagation(),this.dragover=!1;let e=s.dataTransfer.files;e.length>0&&this.fileDropped.emit(e);}};r(Ie,"\u0275fac",function(e){return new(e||Ie)();}),r(Ie,"\u0275dir",Fe({type:Ie,selectors:[["","myDragDrop",""]],hostVars:2,hostBindings:function(e,n){e&1&&M("dragover",function(o){return n.onDragOver(o);})("dragleave",function(o){return n.onDragLeave(o);})("drop",function(o){return n.ondrop(o);}),e&2&&Ot("dragover",n.dragover);},outputs:{fileDropped:"fileDropped"},standalone:!0}));var De=Ie;var Jt=["torrentfileInput"];function Zt(i,s){i&1&&(V(0),g(1,5),T());}function en(i,s){if(i&1){let e=x();c(0,"div",15),M("fileDropped",function(t){u(e);let o=_();return C(o.setTorrentFile(t));}),c(1,"div",16),v(2,"my-global-icon",17),c(3,"div",18)(4,"span"),g(5,1),a(),c(6,"input",19,0),M("change",function(){u(e);let t=_();return C(t.fileChange());}),a()(),v(8,"div",20),c(9,"div",21)(10,"label",22),g(11,2),a(),c(12,"my-help"),O(13,Zt,2,0,"ng-template",23),a(),c(14,"input",24),I("ngModelChange",function(t){u(e);let o=_();return S(o.magnetUri,t)||(o.magnetUri=t),C(t);}),a()(),c(15,"div",25)(16,"label",26),g(17,3),a(),c(18,"my-select-channel",27),I("ngModelChange",function(t){u(e);let o=_();return S(o.firstStepChannelId,t)||(o.firstStepChannelId=t),C(t);}),a()(),c(19,"div",25)(20,"label",28),g(21,4),a(),c(22,"my-select-options",29),I("ngModelChange",function(t){u(e);let o=_();return S(o.firstStepPrivacyId,t)||(o.firstStepPrivacyId=t),C(t);}),a()(),c(23,"input",30),M("click",function(){u(e);let t=_();return C(t.importVideo());}),a()()();}if(i&2){let e=_();l(3),p("ngbTooltip","(extensions: .torrent)"),l(11),E("ngModel",e.magnetUri),l(4),p("items",e.userVideoChannels),E("ngModel",e.firstStepChannelId),l(4),p("items",e.videoPrivacies),E("ngModel",e.firstStepPrivacyId),l(),p("disabled",!e.isMagnetUrlValid()||e.isImportingVideo);}}function tn(i,s){if(i&1&&(c(0,"div",31)(1,"div"),g(2,6),a(),w(3),a()),i&2){let e=_();l(3),he(" ",e.error,`
`);}}function nn(i,s){i&1&&(c(0,"div",32),g(1,7),a());}var xe=class xe extends Q{constructor(e,n,t,o,m,P,h,y,b,f,D){super();this.formReactiveService=e;this.loadingBar=n;this.notifier=t;this.authService=o;this.serverService=m;this.videoService=P;this.videoCaptionService=h;this.videoChapterService=y;this.router=b;this.videoImportService=f;this.hooks=D;r(this,"firstStepDone",new k());r(this,"firstStepError",new k());r(this,"torrentfileInput");r(this,"magnetUri","");r(this,"isImportingVideo",!1);r(this,"hasImportedVideo",!1);r(this,"isUpdatingVideo",!1);r(this,"video");r(this,"error");}ngOnInit(){super.ngOnInit();}ngAfterViewInit(){this.hooks.runAction("action:video-torrent-import.init","video-edit");}canDeactivate(){return{canDeactivate:!0};}isMagnetUrlValid(){return!!this.magnetUri;}fileChange(){let e=this.torrentfileInput.nativeElement.files[0];e&&this.importVideo(e);}setTorrentFile(e){this.torrentfileInput.nativeElement.files=e,this.fileChange();}importVideo(e){this.isImportingVideo=!0;let n={privacy:this.highestPrivacy,waitTranscoding:!1,channelId:this.firstStepChannelId};this.loadingBar.useRef().start(),this.videoImportService.importVideoTorrent(e||this.magnetUri,n).pipe(Oe(({video:t})=>this.videoService.getVideo({videoId:t.uuid}))).subscribe({next:t=>{this.loadingBar.useRef().complete(),this.firstStepDone.emit(t.name),this.isImportingVideo=!1,this.hasImportedVideo=!0,this.video=new ue(t),this.video.patch({privacy:this.firstStepPrivacyId}),We(this.form,this.video,!1);},error:t=>{this.loadingBar.useRef().complete(),this.isImportingVideo=!1,this.firstStepError.emit();let o=t.message,m=t.body;(m==null?void 0:m.code)===Ne.INCORRECT_FILES_IN_TORRENT&&(o="Nom\xE9s s'admeten torrents amb 1 sol fitxer"),this.notifier.error(o);}});}updateSecondStep(){return N(this,null,function*(){(yield this.isFormValid())&&(this.video.patch(this.form.value),this.chaptersEdit.patch(this.form.value),this.isUpdatingVideo=!0,this.updateVideoAndCaptionsAndChapters({video:this.video,captions:this.videoCaptions,chapters:this.chaptersEdit}).subscribe({next:()=>{this.isUpdatingVideo=!1,this.notifier.success("Video to import updated."),this.router.navigate(["/my-library","video-imports"]);},error:e=>{this.error=e.message,ce(),re.error(e);}}));});}};r(xe,"\u0275fac",function(n){return new(n||xe)(d(oe),d(ie),d(ae),d(H),d(X),d(pe),d(_e),d(me),d(z),d(Qe),d(j));}),r(xe,"\u0275cmp",U({type:xe,selectors:[["my-video-import-torrent"]],viewQuery:function(n,t){if(n&1&&R(Jt,5),n&2){let o;F(o=L())&&(t.torrentfileInput=o.first);}},outputs:{firstStepDone:"firstStepDone",firstStepError:"firstStepError"},standalone:!0,features:[$,B],decls:7,vars:11,consts:()=>{let e;e="Update";let n;n="Selecciona el torrent per importar";let t;t="O";let o;o="Importar";let m;m="Selecciona el torrent per importar";let P;P="Apegar la URI magnet";let h;h="Canal";let y;y="Privacy";let b;b="Podeu importar qualsevol fitxer torrent que apunti a un fitxer multim\xE8dia. Assegureu-vos que teniu els drets de difusi\xF3 dels continguts a qu\xE8 apunteu, altrament podr\xEDeu tenir problemes legals i generar-los a la inst\xE0ncia.";let f;f="Ens sap greu, per\xF2 quelcom va malament";let D;return D="Enhorabona, el v\xEDdeo ser\xE0 importat amb BitTorrent! Ja pots afegir informaci\xF3 sobre aquest v\xEDdeo.",[["torrentfileInput",""],m,P,h,y,b,f,D,["class","upload-video-container","myDragDrop","",3,"fileDropped",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","alert pt-alert-primary",4,"ngIf"],["novalidate","",3,"hidden","formGroup"],["forbidScheduledPublication","true","type","import-torrent",3,"form","formErrors","videoCaptions","validationMessages","userVideoChannels"],[1,"submit-container"],["theme","orange","label",e,"icon","circle-tick",3,"click","disabled"],["myDragDrop","",1,"upload-video-container",3,"fileDropped"],[1,"first-step-block"],["iconName","upload","aria-hidden","true",1,"upload-icon"],[1,"button-file","form-control",3,"ngbTooltip"],["aria-label",n,"type","file","name","torrentfile","id","torrentfile","accept",".torrent",3,"change"],["data-content",t,1,"torrent-or-magnet"],[1,"form-group","form-group-magnet-uri"],["for","magnetUri"],["ptTemplate","customHtml"],["type","text","id","magnetUri",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-group"],["for","first-step-channel"],["labelForId","first-step-channel",3,"ngModelChange","items","ngModel"],["for","first-step-privacy"],["labelForId","first-step-privacy",3,"ngModelChange","items","ngModel"],["type","button","value",o,3,"click","disabled"],[1,"alert","alert-danger"],[1,"alert","pt-alert-primary"]];},template:function(n,t){n&1&&(O(0,en,24,7,"div",8)(1,tn,4,1,"div",9)(2,nn,2,0,"div",10),c(3,"form",11),v(4,"my-video-edit",12),c(5,"div",13)(6,"my-button",14),M("click",function(){return t.updateSecondStep();}),a()()()),n&2&&(p("ngIf",!t.hasImportedVideo),l(),p("ngIf",t.error),l(),p("ngIf",t.hasImportedVideo&&!t.error),l(),p("hidden",!t.hasImportedVideo)("formGroup",t.form),l(),p("form",t.form)("formErrors",t.formErrors)("videoCaptions",t.videoCaptions)("validationMessages",t.validationMessages)("userVideoChannels",t.userVideoChannels),l(2),p("disabled",!t.form.valid||t.isUpdatingVideo===!0));},dependencies:[G,De,le,Be,Xe,ze,te,Z,ye,Y,K,J,ge,se,ne,ee,Ce,de],styles:['.peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;width:auto;border-radius:3px;color:var(--inputForegroundColor);background:var(--inputBackgroundColor);position:relative;height:min-content}.peertube-select-container.disabled[_ngcontent-%COMP%]{background-color:#e5e5e5}.peertube-select-container.disabled[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:default}.peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{background-color:#f9f9f9}@media screen and (max-width: auto){.peertube-select-container[_ngcontent-%COMP%]{width:100%}}.peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:calc(0% + 15px);content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid rgba(0,0,0,0);border-top-color:var(--mainForegroundColor);margin-top:-2px;z-index:100}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:15px;padding:3px 35px 3px 12px;position:relative;border:1px solid var(--inputBorderColor);background:transparent none;-webkit-appearance:none;appearance:none;text-overflow:ellipsis;color:var(--mainForegroundColor);line-height:23px}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:-moz-focusring{color:transparent;text-shadow:0 0 0 #000}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[value=undefined][_ngcontent-%COMP%]{font-weight:600}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]{background-color:var(--greyBackgroundColor);color:var(--greyForegroundColor)}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus, .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem #5858580d}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:hover, .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:active, .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus, .peertube-select-container.peertube-select-button[disabled][_ngcontent-%COMP%], .peertube-select-container.peertube-select-button.disabled[_ngcontent-%COMP%]{color:var(--greyForegroundColor);background-color:var(--greySecondaryBackgroundColor)}.peertube-select-container.peertube-select-button[disabled][_ngcontent-%COMP%], .peertube-select-container.peertube-select-button.disabled[_ngcontent-%COMP%]{cursor:default}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:var(--greyForegroundColor)}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-weight:600;color:var(--greyForegroundColor);border:0;padding:4px 35px 4px 12px}my-peertube-checkbox[_ngcontent-%COMP%]{display:block;margin-bottom:1rem}.nav-tabs[_ngcontent-%COMP%]{margin-bottom:15px}.video-edit[_ngcontent-%COMP%]{height:100%;min-height:300px}.video-edit[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;font-size:15px;padding:3px 15px;width:100%;max-width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid var(--inputBorderColor);border-radius:3px;line-height:23px}.video-edit[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}.video-edit[_ngcontent-%COMP%]   input[readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width: calc(100% + 40px)){.video-edit[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}.caption-entry[_ngcontent-%COMP%]{display:flex;height:40px;align-items:center}.caption-entry[_ngcontent-%COMP%]   a.caption-entry-label[_ngcontent-%COMP%]{color:var(--mainForegroundColor)}.caption-entry[_ngcontent-%COMP%]   a.caption-entry-label[_ngcontent-%COMP%]:hover, .caption-entry[_ngcontent-%COMP%]   a.caption-entry-label[_ngcontent-%COMP%]:focus, .caption-entry[_ngcontent-%COMP%]   a.caption-entry-label[_ngcontent-%COMP%]:active{text-decoration:none!important}.caption-entry[_ngcontent-%COMP%]   a.caption-entry-label[_ngcontent-%COMP%]:focus:not(:focus-visible){outline:none!important}.caption-entry[_ngcontent-%COMP%]   a.caption-entry-label[_ngcontent-%COMP%]:hover{opacity:.8}.caption-entry[_ngcontent-%COMP%]   .caption-entry-label[_ngcontent-%COMP%]{font-weight:700;min-width:100px;margin-inline-end:1.25rem}.caption-entry[_ngcontent-%COMP%]   .caption-entry-state[_ngcontent-%COMP%]{min-width:250px;margin-inline-end:.9375rem}.caption-entry[_ngcontent-%COMP%]   .caption-entry-state.caption-entry-state-create[_ngcontent-%COMP%]{color:#38ab0b}.caption-entry[_ngcontent-%COMP%]   .caption-entry-state.caption-entry-state-delete[_ngcontent-%COMP%]{color:red}.caption-entry[_ngcontent-%COMP%]   .caption-entry-edit[_ngcontent-%COMP%]{padding:4px 13px;border:0;font-weight:600;border-radius:3px!important;text-align:center;cursor:pointer;font-size:15px;line-height:23px}.caption-entry[_ngcontent-%COMP%]   .caption-entry-edit[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-inline-end:.25rem;margin-inline-start:.25rem}.caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]{padding:4px 13px;border:0;font-weight:600;border-radius:3px!important;text-align:center;cursor:pointer;font-size:15px;line-height:23px;background-color:var(--greyBackgroundColor);color:var(--greyForegroundColor)}.caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-inline-end:.25rem;margin-inline-start:.25rem}.caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]:focus, .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem #5858580d}.caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]:hover, .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]:active, .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]:focus, .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[disabled][_ngcontent-%COMP%], .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete.disabled[_ngcontent-%COMP%]{color:var(--greyForegroundColor);background-color:var(--greySecondaryBackgroundColor)}.caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[disabled][_ngcontent-%COMP%], .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete.disabled[_ngcontent-%COMP%]{cursor:default}.caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:var(--greyForegroundColor)}.no-caption[_ngcontent-%COMP%]{text-align:center}.submit-container[_ngcontent-%COMP%]{text-align:end}.submit-container[_ngcontent-%COMP%]   .message-submit[_ngcontent-%COMP%]{display:inline-block;color:var(--greyForegroundColor);margin-inline-end:calc(1.28125rem + .375vw)}@media (min-width: 1200px){.submit-container[_ngcontent-%COMP%]   .message-submit[_ngcontent-%COMP%]{margin-inline-end:1.5625rem}}p-calendar[_ngcontent-%COMP%]{display:block}p-calendar[_ngcontent-%COMP%]     .p-calendar{width:100%}p-calendar[_ngcontent-%COMP%]     .p-inputtext{color:#000;font-size:15px;padding:3px 15px;width:100%;max-width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid var(--inputBorderColor);border-radius:3px;line-height:23px}p-calendar[_ngcontent-%COMP%]     .p-inputtext::placeholder{color:var(--inputPlaceholderColor)}p-calendar[_ngcontent-%COMP%]     .p-inputtext[readonly]{opacity:.7}@media screen and (max-width: calc(100% + 40px)){p-calendar[_ngcontent-%COMP%]     .p-inputtext{width:100%}}.form-columns[_ngcontent-%COMP%]{display:grid;grid-template-columns:66% 1fr;grid-gap:30px}.button-file[_ngcontent-%COMP%]{width:max-content;position:relative;overflow:hidden;display:inline-block;padding:4px 13px;border:0;font-weight:600;border-radius:3px!important;text-align:center;cursor:pointer;font-size:15px;line-height:23px}.button-file[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:100%;height:100%;font-size:100px;text-align:end;filter:alpha(opacity=0);opacity:0;outline:none;background:var(--mainBackgroundColor);cursor:inherit;display:block}.button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-inline-end:.25rem;margin-inline-start:.25rem}.button-file[_ngcontent-%COMP%]:focus, .button-file[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--mainColorLightest)}.button-file[_ngcontent-%COMP%], .button-file[_ngcontent-%COMP%]:active, .button-file[_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}.button-file[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}.button-file[disabled][_ngcontent-%COMP%], .button-file.disabled[_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:var(--inputBorderColor)}.button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:#fff}.hide-chapter-label[_ngcontent-%COMP%]{height:0;opacity:0}.chapter[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto minmax(150px,350px) 1fr;grid-template-rows:auto auto;column-gap:1rem}.chapter[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]{height:31px;min-width:16px;display:flex;align-items:center}.chapter[_ngcontent-%COMP%]   my-delete-button[_ngcontent-%COMP%]{width:fit-content}.chapter[_ngcontent-%COMP%]   .form-error[_ngcontent-%COMP%]{margin-top:0}@media screen and (max-width: 1040px){.main-col:not(.expanded)[_nghost-%COMP%]   .form-columns[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .form-columns[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media screen and (max-width: 800px){.main-col.expanded[_nghost-%COMP%]   .form-columns[_ngcontent-%COMP%], .main-col.expanded   [_nghost-%COMP%]   .form-columns[_ngcontent-%COMP%]{grid-template-columns:1fr}}',".first-step-block[_ngcontent-%COMP%]   .torrent-or-magnet[_ngcontent-%COMP%]{width:95%;border-top:.05rem solid var(--inputPlaceholderColor);height:.05rem;text-align:center;display:block;position:relative}.first-step-block[_ngcontent-%COMP%]   .torrent-or-magnet[data-content][_ngcontent-%COMP%]{margin:.8rem 0}.first-step-block[_ngcontent-%COMP%]   .torrent-or-magnet[data-content][_ngcontent-%COMP%]:after{background:var(--submenuBackgroundColor);color:var(--inputPlaceholderColor);content:attr(data-content);display:inline-block;font-size:.7rem;padding:0 .4rem;transform:translateY(-.65rem)}.first-step-block[_ngcontent-%COMP%]   .torrent-or-magnet[data-content][_ngcontent-%COMP%]{margin:1.5rem 0}.first-step-block[_ngcontent-%COMP%]   .form-group-magnet-uri[_ngcontent-%COMP%]{margin-bottom:40px}",'.alert.alert-danger[_ngcontent-%COMP%]{text-align:center}.alert.alert-danger[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{font-weight:600}.first-step-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.first-step-block[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{width:90px;margin-bottom:25px}.first-step-block[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]     .feather, .first-step-block[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]     .material, .first-step-block[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]     .misc{color:var(--inputBorderColor)}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;width:275px;border-radius:3px;color:var(--inputForegroundColor);background:var(--inputBackgroundColor);position:relative;height:min-content}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container.disabled[_ngcontent-%COMP%]{background-color:#e5e5e5}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container.disabled[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:default}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{background-color:#f9f9f9}@media screen and (max-width: 275px){.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]{width:100%}}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:calc(0% + 15px);content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid rgba(0,0,0,0);border-top-color:var(--mainForegroundColor);margin-top:-2px;z-index:100}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:15px;padding:3px 35px 3px 12px;position:relative;border:1px solid var(--inputBorderColor);background:transparent none;-webkit-appearance:none;appearance:none;text-overflow:ellipsis;color:var(--mainForegroundColor);line-height:23px}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:-moz-focusring{color:transparent;text-shadow:0 0 0 #000}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[value=undefined][_ngcontent-%COMP%]{font-weight:600}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]{background-color:var(--greyBackgroundColor);color:var(--greyForegroundColor)}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus, .first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem #5858580d}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:hover, .first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:active, .first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus, .first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[disabled][_ngcontent-%COMP%], .first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button.disabled[_ngcontent-%COMP%]{color:var(--greyForegroundColor);background-color:var(--greySecondaryBackgroundColor)}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[disabled][_ngcontent-%COMP%], .first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button.disabled[_ngcontent-%COMP%]{cursor:default}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:var(--greyForegroundColor)}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-weight:600;color:var(--greyForegroundColor);border:0;padding:4px 35px 4px 12px}.first-step-block[_ngcontent-%COMP%]   my-select-options[_ngcontent-%COMP%]     ng-select, .first-step-block[_ngcontent-%COMP%]   my-select-channel[_ngcontent-%COMP%]     ng-select, .first-step-block[_ngcontent-%COMP%]   .peertube-radio-container[_ngcontent-%COMP%], .first-step-block[_ngcontent-%COMP%]   .form-group-description[_ngcontent-%COMP%]{width:275px}@media screen and (max-width: 275px){.first-step-block[_ngcontent-%COMP%]   my-select-options[_ngcontent-%COMP%]     ng-select, .first-step-block[_ngcontent-%COMP%]   my-select-channel[_ngcontent-%COMP%]     ng-select, .first-step-block[_ngcontent-%COMP%]   .peertube-radio-container[_ngcontent-%COMP%], .first-step-block[_ngcontent-%COMP%]   .form-group-description[_ngcontent-%COMP%]{width:100%}}.first-step-block[_ngcontent-%COMP%]   .form-group-description[_ngcontent-%COMP%]{white-space:nowrap}.first-step-block[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{display:block;font-size:15px;padding:3px 15px;width:275px;max-width:275px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid var(--inputBorderColor);border-radius:3px;line-height:23px}.first-step-block[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}.first-step-block[_ngcontent-%COMP%]   input[type=text][readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width: 315px){.first-step-block[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%}}.first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]{width:275px;margin-top:30px;padding:4px 13px;border:0;font-weight:600;border-radius:3px!important;text-align:center;cursor:pointer;font-size:15px;line-height:23px}.first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-inline-end:.25rem;margin-inline-start:.25rem}.first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]:focus, .first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--mainColorLightest)}.first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%], .first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]:active, .first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}.first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}.first-step-block[_ngcontent-%COMP%]   input[type=button][disabled][_ngcontent-%COMP%], .first-step-block[_ngcontent-%COMP%]   input[type=button].disabled[_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:var(--inputBorderColor)}.first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:#fff}.first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]{width:max-content;position:relative;overflow:hidden;display:inline-block;padding:4px 13px;border:0;font-weight:600;border-radius:3px!important;text-align:center;cursor:pointer;font-size:15px;line-height:23px}.first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:100%;height:100%;font-size:100px;text-align:end;filter:alpha(opacity=0);opacity:0;outline:none;background:var(--mainBackgroundColor);cursor:inherit;display:block}.first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-inline-end:.25rem;margin-inline-start:.25rem}.first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]:focus, .first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--mainColorLightest)}.first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%], .first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]:active, .first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}.first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}.first-step-block[_ngcontent-%COMP%]   .button-file[disabled][_ngcontent-%COMP%], .first-step-block[_ngcontent-%COMP%]   .button-file.disabled[_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:var(--inputBorderColor)}.first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:#fff}']}));var et=xe;var on=["videoEdit"];function rn(i,s){i&1&&(V(0),fe(1,4),v(2,"a",28),Me(),T());}function cn(i,s){i&1&&(c(0,"div",29),fe(1,5),v(2,"a",30),Me(),a());}function an(i,s){if(i&1){let e=x();c(0,"div",15)(1,"div",16),v(2,"my-global-icon",17),c(3,"div",18)(4,"label",19),g(5,1),a(),c(6,"my-help"),O(7,rn,3,0,"ng-template",20),a(),c(8,"input",21),I("ngModelChange",function(t){u(e);let o=_();return S(o.targetUrl,t)||(o.targetUrl=t),C(t);}),a(),O(9,cn,3,0,"div",22),a(),c(10,"div",18)(11,"label",23),g(12,2),a(),c(13,"my-select-channel",24),I("ngModelChange",function(t){u(e);let o=_();return S(o.firstStepChannelId,t)||(o.firstStepChannelId=t),C(t);}),a()(),c(14,"div",18)(15,"label",25),g(16,3),a(),c(17,"my-select-options",26),I("ngModelChange",function(t){u(e);let o=_();return S(o.firstStepPrivacyId,t)||(o.firstStepPrivacyId=t),C(t);}),a()(),c(18,"input",27),M("click",function(){u(e);let t=_();return C(t.importVideo());}),a()()();}if(i&2){let e=_();l(8),E("ngModel",e.targetUrl),l(),p("ngIf",e.isChannelSyncEnabled()),l(4),p("items",e.userVideoChannels),E("ngModel",e.firstStepChannelId),l(4),p("items",e.videoPrivacies),E("ngModel",e.firstStepPrivacyId),l(),p("disabled",!e.isTargetUrlValid()||e.isImportingVideo);}}function ln(i,s){if(i&1&&(c(0,"div",31)(1,"div"),g(2,6),a(),w(3),a()),i&2){let e=_();l(3),he(" ",e.error,`
`);}}function sn(i,s){if(i&1&&(c(0,"div",32),g(1,7),a()),i&2){let e=_();l(),W(e.targetUrl),q(1);}}var Ve=class Ve extends Q{constructor(e,n,t,o,m,P,h,y,b,f,D){super();this.formReactiveService=e;this.loadingBar=n;this.notifier=t;this.authService=o;this.serverService=m;this.videoService=P;this.videoCaptionService=h;this.videoChapterService=y;this.router=b;this.videoImportService=f;this.hooks=D;r(this,"videoEditComponent");r(this,"firstStepDone",new k());r(this,"firstStepError",new k());r(this,"targetUrl","");r(this,"isImportingVideo",!1);r(this,"hasImportedVideo",!1);r(this,"isUpdatingVideo",!1);r(this,"video");r(this,"error");}ngOnInit(){super.ngOnInit();}ngAfterViewInit(){this.hooks.runAction("action:video-url-import.init","video-edit");}canDeactivate(){return{canDeactivate:!0};}isTargetUrlValid(){var e;return(e=this.targetUrl)==null?void 0:e.match(/https?:\/\//);}isChannelSyncEnabled(){return this.serverConfig.import.videoChannelSynchronization.enabled;}importVideo(){this.isImportingVideo=!0;let e={privacy:this.highestPrivacy,waitTranscoding:!1,channelId:this.firstStepChannelId};this.loadingBar.useRef().start(),this.videoImportService.importVideoUrl(this.targetUrl,e).pipe(Oe(n=>Re([this.videoCaptionService.listCaptions(n.video.uuid),this.videoChapterService.getChapters({videoId:n.video.uuid}),this.videoService.getVideo({videoId:n.video.uuid})]).pipe(_t(([t,{chapters:o},m])=>({videoCaptions:t.data,chapters:o,video:m}))))).subscribe({next:({video:n,videoCaptions:t,chapters:o})=>{this.loadingBar.useRef().complete(),this.firstStepDone.emit(n.name),this.isImportingVideo=!1,this.hasImportedVideo=!0,this.video=new ue(n),this.video.patch({privacy:this.firstStepPrivacyId}),this.chaptersEdit.loadFromAPI(o),this.videoCaptions=t,We(this.form,this.video,!0),setTimeout(()=>this.videoEditComponent.patchChapters(this.chaptersEdit));},error:n=>{this.loadingBar.useRef().complete(),this.isImportingVideo=!1,this.firstStepError.emit(),this.notifier.error(n.message);}});}updateSecondStep(){return N(this,null,function*(){(yield this.isFormValid())&&(this.video.patch(this.form.value),this.chaptersEdit.patch(this.form.value),this.isUpdatingVideo=!0,this.updateVideoAndCaptionsAndChapters({video:this.video,captions:this.videoCaptions,chapters:this.chaptersEdit}).subscribe({next:()=>{this.isUpdatingVideo=!1,this.notifier.success("Video to import updated."),this.router.navigate(["/my-library","video-imports"]);},error:e=>{this.error=e.message,ce(),re.error(e);}}));});}};r(Ve,"\u0275fac",function(n){return new(n||Ve)(d(oe),d(ie),d(ae),d(H),d(X),d(pe),d(_e),d(me),d(z),d(Qe),d(j));}),r(Ve,"\u0275cmp",U({type:Ve,selectors:[["my-video-import-url"]],viewQuery:function(n,t){if(n&1&&R(on,5),n&2){let o;F(o=L())&&(t.videoEditComponent=o.first);}},outputs:{firstStepDone:"firstStepDone",firstStepError:"firstStepError"},standalone:!0,features:[$,B],decls:8,vars:11,consts:()=>{let e;e="Update";let n;n="Importar";let t;t="URL";let o;o="Canal";let m;m="Privacy";let P;P=" You can import any URL "+"\uFFFD#2\uFFFD"+"supported by youtube-dl"+"\uFFFD/#2\uFFFD"+" or URL that points to a media file. You should make sure you have diffusion rights over the content it points to, otherwise it could cause legal trouble to yourself and your instance. ";let h;h=" You can also synchronize a remote channel in "+"\uFFFD#2\uFFFD"+"your library"+"\uFFFD/#2\uFFFD"+"";let y;y="Ens sap greu, per\xF2 quelcom va malament";let b;return b="Enhorabona, s'importar\xE0 el v\xEDdeo allotjat en \n          "+"\uFFFD0\uFFFD"+"! Ja podeu afegir informaci\xF3 sobre aquest v\xEDdeo. \n        ",[["videoEdit",""],t,o,m,P,h,y,b,["class","upload-video-container",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","alert pt-alert-primary",4,"ngIf"],["novalidate","",3,"hidden","formGroup"],["forbidScheduledPublication","true","type","import-url",3,"form","formErrors","videoCaptions","validationMessages","userVideoChannels"],[1,"submit-container"],["theme","orange","label",e,"icon","circle-tick",3,"click","disabled"],[1,"upload-video-container"],[1,"first-step-block"],["iconName","upload","aria-hidden","true",1,"upload-icon"],[1,"form-group"],["for","targetUrl"],["ptTemplate","customHtml"],["type","text","id","targetUrl",1,"form-control",3,"ngModelChange","ngModel"],["class","form-group-description",4,"ngIf"],["for","first-step-channel"],["labelForId","first-step-channel",3,"ngModelChange","items","ngModel"],["for","first-step-privacy"],["labelForId","first-step-privacy",3,"ngModelChange","items","ngModel"],["type","button","value",n,3,"click","disabled"],["href","https://rg3.github.io/youtube-dl/supportedsites.html","target","_blank","rel","noopener noreferrer"],[1,"form-group-description"],["routerLink","/my-library/video-channel-syncs"],[1,"alert","alert-danger"],[1,"alert","pt-alert-primary"]];},template:function(n,t){if(n&1){let o=x();O(0,an,19,7,"div",8)(1,ln,4,1,"div",9)(2,sn,2,1,"div",10),c(3,"form",11),v(4,"my-video-edit",12,0),c(6,"div",13)(7,"my-button",14),M("click",function(){return u(o),C(t.updateSecondStep());}),a()()();}n&2&&(p("ngIf",!t.hasImportedVideo),l(),p("ngIf",t.error),l(),p("ngIf",!t.error&&t.hasImportedVideo),l(),p("hidden",!t.hasImportedVideo)("formGroup",t.form),l(),p("form",t.form)("formErrors",t.formErrors)("videoCaptions",t.videoCaptions)("validationMessages",t.validationMessages)("userVideoChannels",t.userVideoChannels),l(3),p("disabled",!t.form.valid||t.isUpdatingVideo===!0));},dependencies:[G,le,Xe,ze,te,Z,ye,Y,K,J,Ue,ge,se,ne,ee,Ce,de],styles:['.peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;width:auto;border-radius:3px;color:var(--inputForegroundColor);background:var(--inputBackgroundColor);position:relative;height:min-content}.peertube-select-container.disabled[_ngcontent-%COMP%]{background-color:#e5e5e5}.peertube-select-container.disabled[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:default}.peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{background-color:#f9f9f9}@media screen and (max-width: auto){.peertube-select-container[_ngcontent-%COMP%]{width:100%}}.peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:calc(0% + 15px);content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid rgba(0,0,0,0);border-top-color:var(--mainForegroundColor);margin-top:-2px;z-index:100}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:15px;padding:3px 35px 3px 12px;position:relative;border:1px solid var(--inputBorderColor);background:transparent none;-webkit-appearance:none;appearance:none;text-overflow:ellipsis;color:var(--mainForegroundColor);line-height:23px}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:-moz-focusring{color:transparent;text-shadow:0 0 0 #000}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[value=undefined][_ngcontent-%COMP%]{font-weight:600}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]{background-color:var(--greyBackgroundColor);color:var(--greyForegroundColor)}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus, .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem #5858580d}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:hover, .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:active, .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus, .peertube-select-container.peertube-select-button[disabled][_ngcontent-%COMP%], .peertube-select-container.peertube-select-button.disabled[_ngcontent-%COMP%]{color:var(--greyForegroundColor);background-color:var(--greySecondaryBackgroundColor)}.peertube-select-container.peertube-select-button[disabled][_ngcontent-%COMP%], .peertube-select-container.peertube-select-button.disabled[_ngcontent-%COMP%]{cursor:default}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:var(--greyForegroundColor)}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-weight:600;color:var(--greyForegroundColor);border:0;padding:4px 35px 4px 12px}my-peertube-checkbox[_ngcontent-%COMP%]{display:block;margin-bottom:1rem}.nav-tabs[_ngcontent-%COMP%]{margin-bottom:15px}.video-edit[_ngcontent-%COMP%]{height:100%;min-height:300px}.video-edit[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;font-size:15px;padding:3px 15px;width:100%;max-width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid var(--inputBorderColor);border-radius:3px;line-height:23px}.video-edit[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}.video-edit[_ngcontent-%COMP%]   input[readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width: calc(100% + 40px)){.video-edit[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}.caption-entry[_ngcontent-%COMP%]{display:flex;height:40px;align-items:center}.caption-entry[_ngcontent-%COMP%]   a.caption-entry-label[_ngcontent-%COMP%]{color:var(--mainForegroundColor)}.caption-entry[_ngcontent-%COMP%]   a.caption-entry-label[_ngcontent-%COMP%]:hover, .caption-entry[_ngcontent-%COMP%]   a.caption-entry-label[_ngcontent-%COMP%]:focus, .caption-entry[_ngcontent-%COMP%]   a.caption-entry-label[_ngcontent-%COMP%]:active{text-decoration:none!important}.caption-entry[_ngcontent-%COMP%]   a.caption-entry-label[_ngcontent-%COMP%]:focus:not(:focus-visible){outline:none!important}.caption-entry[_ngcontent-%COMP%]   a.caption-entry-label[_ngcontent-%COMP%]:hover{opacity:.8}.caption-entry[_ngcontent-%COMP%]   .caption-entry-label[_ngcontent-%COMP%]{font-weight:700;min-width:100px;margin-inline-end:1.25rem}.caption-entry[_ngcontent-%COMP%]   .caption-entry-state[_ngcontent-%COMP%]{min-width:250px;margin-inline-end:.9375rem}.caption-entry[_ngcontent-%COMP%]   .caption-entry-state.caption-entry-state-create[_ngcontent-%COMP%]{color:#38ab0b}.caption-entry[_ngcontent-%COMP%]   .caption-entry-state.caption-entry-state-delete[_ngcontent-%COMP%]{color:red}.caption-entry[_ngcontent-%COMP%]   .caption-entry-edit[_ngcontent-%COMP%]{padding:4px 13px;border:0;font-weight:600;border-radius:3px!important;text-align:center;cursor:pointer;font-size:15px;line-height:23px}.caption-entry[_ngcontent-%COMP%]   .caption-entry-edit[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-inline-end:.25rem;margin-inline-start:.25rem}.caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]{padding:4px 13px;border:0;font-weight:600;border-radius:3px!important;text-align:center;cursor:pointer;font-size:15px;line-height:23px;background-color:var(--greyBackgroundColor);color:var(--greyForegroundColor)}.caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-inline-end:.25rem;margin-inline-start:.25rem}.caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]:focus, .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem #5858580d}.caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]:hover, .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]:active, .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]:focus, .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[disabled][_ngcontent-%COMP%], .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete.disabled[_ngcontent-%COMP%]{color:var(--greyForegroundColor);background-color:var(--greySecondaryBackgroundColor)}.caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[disabled][_ngcontent-%COMP%], .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete.disabled[_ngcontent-%COMP%]{cursor:default}.caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:var(--greyForegroundColor)}.no-caption[_ngcontent-%COMP%]{text-align:center}.submit-container[_ngcontent-%COMP%]{text-align:end}.submit-container[_ngcontent-%COMP%]   .message-submit[_ngcontent-%COMP%]{display:inline-block;color:var(--greyForegroundColor);margin-inline-end:calc(1.28125rem + .375vw)}@media (min-width: 1200px){.submit-container[_ngcontent-%COMP%]   .message-submit[_ngcontent-%COMP%]{margin-inline-end:1.5625rem}}p-calendar[_ngcontent-%COMP%]{display:block}p-calendar[_ngcontent-%COMP%]     .p-calendar{width:100%}p-calendar[_ngcontent-%COMP%]     .p-inputtext{color:#000;font-size:15px;padding:3px 15px;width:100%;max-width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid var(--inputBorderColor);border-radius:3px;line-height:23px}p-calendar[_ngcontent-%COMP%]     .p-inputtext::placeholder{color:var(--inputPlaceholderColor)}p-calendar[_ngcontent-%COMP%]     .p-inputtext[readonly]{opacity:.7}@media screen and (max-width: calc(100% + 40px)){p-calendar[_ngcontent-%COMP%]     .p-inputtext{width:100%}}.form-columns[_ngcontent-%COMP%]{display:grid;grid-template-columns:66% 1fr;grid-gap:30px}.button-file[_ngcontent-%COMP%]{width:max-content;position:relative;overflow:hidden;display:inline-block;padding:4px 13px;border:0;font-weight:600;border-radius:3px!important;text-align:center;cursor:pointer;font-size:15px;line-height:23px}.button-file[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:100%;height:100%;font-size:100px;text-align:end;filter:alpha(opacity=0);opacity:0;outline:none;background:var(--mainBackgroundColor);cursor:inherit;display:block}.button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-inline-end:.25rem;margin-inline-start:.25rem}.button-file[_ngcontent-%COMP%]:focus, .button-file[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--mainColorLightest)}.button-file[_ngcontent-%COMP%], .button-file[_ngcontent-%COMP%]:active, .button-file[_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}.button-file[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}.button-file[disabled][_ngcontent-%COMP%], .button-file.disabled[_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:var(--inputBorderColor)}.button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:#fff}.hide-chapter-label[_ngcontent-%COMP%]{height:0;opacity:0}.chapter[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto minmax(150px,350px) 1fr;grid-template-rows:auto auto;column-gap:1rem}.chapter[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]{height:31px;min-width:16px;display:flex;align-items:center}.chapter[_ngcontent-%COMP%]   my-delete-button[_ngcontent-%COMP%]{width:fit-content}.chapter[_ngcontent-%COMP%]   .form-error[_ngcontent-%COMP%]{margin-top:0}@media screen and (max-width: 1040px){.main-col:not(.expanded)[_nghost-%COMP%]   .form-columns[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .form-columns[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media screen and (max-width: 800px){.main-col.expanded[_nghost-%COMP%]   .form-columns[_ngcontent-%COMP%], .main-col.expanded   [_nghost-%COMP%]   .form-columns[_ngcontent-%COMP%]{grid-template-columns:1fr}}','.alert.alert-danger[_ngcontent-%COMP%]{text-align:center}.alert.alert-danger[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{font-weight:600}.first-step-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.first-step-block[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{width:90px;margin-bottom:25px}.first-step-block[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]     .feather, .first-step-block[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]     .material, .first-step-block[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]     .misc{color:var(--inputBorderColor)}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;width:275px;border-radius:3px;color:var(--inputForegroundColor);background:var(--inputBackgroundColor);position:relative;height:min-content}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container.disabled[_ngcontent-%COMP%]{background-color:#e5e5e5}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container.disabled[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:default}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{background-color:#f9f9f9}@media screen and (max-width: 275px){.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]{width:100%}}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:calc(0% + 15px);content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid rgba(0,0,0,0);border-top-color:var(--mainForegroundColor);margin-top:-2px;z-index:100}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:15px;padding:3px 35px 3px 12px;position:relative;border:1px solid var(--inputBorderColor);background:transparent none;-webkit-appearance:none;appearance:none;text-overflow:ellipsis;color:var(--mainForegroundColor);line-height:23px}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:-moz-focusring{color:transparent;text-shadow:0 0 0 #000}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[value=undefined][_ngcontent-%COMP%]{font-weight:600}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]{background-color:var(--greyBackgroundColor);color:var(--greyForegroundColor)}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus, .first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem #5858580d}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:hover, .first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:active, .first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus, .first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[disabled][_ngcontent-%COMP%], .first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button.disabled[_ngcontent-%COMP%]{color:var(--greyForegroundColor);background-color:var(--greySecondaryBackgroundColor)}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[disabled][_ngcontent-%COMP%], .first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button.disabled[_ngcontent-%COMP%]{cursor:default}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:var(--greyForegroundColor)}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-weight:600;color:var(--greyForegroundColor);border:0;padding:4px 35px 4px 12px}.first-step-block[_ngcontent-%COMP%]   my-select-options[_ngcontent-%COMP%]     ng-select, .first-step-block[_ngcontent-%COMP%]   my-select-channel[_ngcontent-%COMP%]     ng-select, .first-step-block[_ngcontent-%COMP%]   .peertube-radio-container[_ngcontent-%COMP%], .first-step-block[_ngcontent-%COMP%]   .form-group-description[_ngcontent-%COMP%]{width:275px}@media screen and (max-width: 275px){.first-step-block[_ngcontent-%COMP%]   my-select-options[_ngcontent-%COMP%]     ng-select, .first-step-block[_ngcontent-%COMP%]   my-select-channel[_ngcontent-%COMP%]     ng-select, .first-step-block[_ngcontent-%COMP%]   .peertube-radio-container[_ngcontent-%COMP%], .first-step-block[_ngcontent-%COMP%]   .form-group-description[_ngcontent-%COMP%]{width:100%}}.first-step-block[_ngcontent-%COMP%]   .form-group-description[_ngcontent-%COMP%]{white-space:nowrap}.first-step-block[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{display:block;font-size:15px;padding:3px 15px;width:275px;max-width:275px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid var(--inputBorderColor);border-radius:3px;line-height:23px}.first-step-block[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}.first-step-block[_ngcontent-%COMP%]   input[type=text][readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width: 315px){.first-step-block[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%}}.first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]{width:275px;margin-top:30px;padding:4px 13px;border:0;font-weight:600;border-radius:3px!important;text-align:center;cursor:pointer;font-size:15px;line-height:23px}.first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-inline-end:.25rem;margin-inline-start:.25rem}.first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]:focus, .first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--mainColorLightest)}.first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%], .first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]:active, .first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}.first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}.first-step-block[_ngcontent-%COMP%]   input[type=button][disabled][_ngcontent-%COMP%], .first-step-block[_ngcontent-%COMP%]   input[type=button].disabled[_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:var(--inputBorderColor)}.first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:#fff}.first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]{width:max-content;position:relative;overflow:hidden;display:inline-block;padding:4px 13px;border:0;font-weight:600;border-radius:3px!important;text-align:center;cursor:pointer;font-size:15px;line-height:23px}.first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:100%;height:100%;font-size:100px;text-align:end;filter:alpha(opacity=0);opacity:0;outline:none;background:var(--mainBackgroundColor);cursor:inherit;display:block}.first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-inline-end:.25rem;margin-inline-start:.25rem}.first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]:focus, .first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--mainColorLightest)}.first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%], .first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]:active, .first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}.first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}.first-step-block[_ngcontent-%COMP%]   .button-file[disabled][_ngcontent-%COMP%], .first-step-block[_ngcontent-%COMP%]   .button-file.disabled[_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:var(--inputBorderColor)}.first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:#fff}']}));var tt=Ve;var pn=["videofileInput"];function dn(i,s){if(i&1){let e=x();V(0),c(1,"div",28)(2,"label",29),g(3,4),a(),c(4,"div",30),fe(5,5),v(6,"br"),Me(),a(),c(7,"my-preview-upload",31),I("ngModelChange",function(t){u(e);let o=_(2);return S(o.previewfileUpload,t)||(o.previewfileUpload=t),C(t);}),a()(),c(8,"div",32)(9,"my-button",33),M("click",function(){u(e);let t=_(2);return C(t.uploadAudio());}),a()(),T();}if(i&2){let e=_(2);l(7),E("ngModel",e.previewfileUpload),l(2),p("label",e.getAudioUploadLabel());}}function _n(i,s){if(i&1){let e=x();c(0,"div",16),M("fileDropped",function(t){u(e);let o=_();return C(o.onFileDropped(t));}),c(1,"div",17),v(2,"my-global-icon",18),c(3,"div",19)(4,"span"),g(5,1),a(),c(6,"input",20,0),M("change",function(t){u(e);let o=_();return C(o.onFileChange(t));}),a()(),c(8,"div",21)(9,"label",22),g(10,2),a(),c(11,"my-select-channel",23),I("ngModelChange",function(t){u(e);let o=_();return S(o.firstStepChannelId,t)||(o.firstStepChannelId=t),C(t);}),a()(),c(12,"div",24)(13,"label",25),g(14,3),a(),c(15,"my-select-options",26),I("ngModelChange",function(t){u(e);let o=_();return S(o.firstStepPrivacyId,t)||(o.firstStepPrivacyId=t),C(t);}),a()(),O(16,dn,10,2,"ng-container",27),a()();}if(i&2){let e=_();l(3),p("ngbTooltip","(extensions: "+e.getVideoExtensions()+")"),l(3),p("accept",e.getVideoExtensions()),l(5),p("items",e.userVideoChannels),E("ngModel",e.firstStepChannelId),l(4),p("items",e.videoPrivacies),E("ngModel",e.firstStepPrivacyId),l(),p("ngIf",e.isUploadingAudioFile);}}function gn(i,s){i&1&&(c(0,"div",34),g(1,6),a());}function un(i,s){i&1&&(c(0,"div",35),g(1,7),a());}var Te=class Te extends Q{constructor(e,n,t,o,m,P,h,y,b,f,D,A,Qn,Wn,qn){super();this.formReactiveService=e;this.loadingBar=n;this.notifier=t;this.authService=o;this.serverService=m;this.videoService=P;this.videoCaptionService=h;this.videoChapterService=y;this.userService=b;this.router=f;this.hooks=D;this.resumableUploadService=A;this.metaService=Qn;this.route=Wn;this.videoUploadService=qn;r(this,"firstStepDone",new k());r(this,"firstStepError",new k());r(this,"videofileInput");r(this,"userVideoQuotaUsed",0);r(this,"userVideoQuotaUsedDaily",0);r(this,"isUploadingAudioFile",!1);r(this,"isUploadingVideo",!1);r(this,"videoUploaded",!1);r(this,"videoUploadPercents",0);r(this,"videoUploadedIds",{id:0,uuid:"",shortUUID:""});r(this,"formData");r(this,"previewfileUpload");r(this,"error");r(this,"enableRetryAfterError");r(this,"isUpdatingVideo",!1);r(this,"fileToUpload");r(this,"alreadyRefreshedToken",!1);r(this,"uploadServiceSubscription");}ngOnInit(){super.ngOnInit(),this.userService.getMyVideoQuotaUsed().subscribe(e=>{this.userVideoQuotaUsed=e.videoQuotaUsed,this.userVideoQuotaUsedDaily=e.videoQuotaUsedDaily;}),this.uploadServiceSubscription=this.resumableUploadService.events.subscribe(e=>this.onUploadVideoOngoing(e));}ngAfterViewInit(){this.hooks.runAction("action:video-upload.init","video-edit");}ngOnDestroy(){this.resumableUploadService.disconnect(),this.uploadServiceSubscription&&this.uploadServiceSubscription.unsubscribe();}canDeactivate(){let e="";return this.videoUploaded===!0?e="Your video was uploaded to your account and is private."+" "+"Per\xF2 es perdran les dades associades (etiquetes, descripci\xF3 ...), est\xE0s segur que vols deixar aquesta p\xE0gina?":e="El teu v\xEDdeo encara no s'ha carregat, est\xE0s segur que vols sortir d'aquesta p\xE0gina?",{canDeactivate:!this.isUploadingVideo,text:e};}updateTitle(){let e=this.form.get("name").value;this.videoUploaded?this.metaService.setTitle("Publish "+e+""):this.isUploadingAudioFile||this.isUploadingVideo?this.metaService.setTitle(`${this.videoUploadPercents}% - ${e}`):this.metaService.update(this.route.snapshot.data.meta);}getVideoExtensions(){return this.videoUploadService.getVideoExtensions().join(", ");}onUploadVideoOngoing(e){switch(e.status){case"error":{if(!this.alreadyRefreshedToken&&e.responseStatus===it.UNAUTHORIZED_401)return this.alreadyRefreshedToken=!0,this.refreshTokenAndRetryUpload();this.handleUploadError(At(e));break;}case"cancelled":this.isUploadingVideo=!1,this.videoUploadPercents=0,this.firstStepError.emit(),this.enableRetryAfterError=!1,this.error="",this.isUploadingAudioFile=!1;break;case"queue":this.closeFirstStep(e.name);break;case"uploading":this.videoUploadPercents=e.progress;break;case"paused":this.notifier.info("Pujada en espera");break;case"complete":this.videoUploaded=!0,this.videoUploadPercents=100,this.videoUploadedIds=e==null?void 0:e.response.video;break;}this.updateTitle();}onFileDropped(e){this.videofileInput.nativeElement.files=e,this.onFileChange({target:this.videofileInput.nativeElement});}onFileChange(e){let n=e.target.files[0];if(!n)return;let t=this.authService.getUser();if(this.videoUploadService.checkQuotaAndNotify(n,t.videoQuota,this.userVideoQuotaUsed)&&this.videoUploadService.checkQuotaAndNotify(n,t.videoQuotaDaily,this.userVideoQuotaUsedDaily)){if(this.videoUploadService.isAudioFile(n.name)){this.isUploadingAudioFile=!0;return;}this.isUploadingVideo=!0,this.fileToUpload=n,this.uploadFile(n);}}uploadAudio(){this.uploadFile(this.getInputVideoFile(),this.previewfileUpload);}retryUpload(){this.enableRetryAfterError=!1,this.error="",this.uploadFile(this.fileToUpload);}cancelUpload(){this.resumableUploadService.control({action:"cancel"});}isPublishingButtonDisabled(){return!this.form.valid||this.isUpdatingVideo===!0||this.videoUploaded!==!0||!this.videoUploadedIds.id;}getAudioUploadLabel(){let e=this.getInputVideoFile();return e?"Puja \n          "+e.name+"\n        ":"Upload";}updateSecondStep(){return N(this,null,function*(){if(!(yield this.isFormValid())||this.isPublishingButtonDisabled())return;let e=new ue();e.patch(this.form.value),e.id=this.videoUploadedIds.id,e.uuid=this.videoUploadedIds.uuid,e.shortUUID=this.videoUploadedIds.shortUUID,this.chaptersEdit.patch(this.form.value),this.isUpdatingVideo=!0,this.updateVideoAndCaptionsAndChapters({video:e,captions:this.videoCaptions,chapters:this.chaptersEdit}).subscribe({next:()=>{this.isUpdatingVideo=!1,this.isUploadingVideo=!1,this.notifier.success("V\xEDdeo publicat."),this.router.navigateByUrl(He.buildWatchUrl(e));},error:n=>{this.error=n.message,ce(),re.error(n);}});});}getInputVideoFile(){return this.videofileInput.nativeElement.files[0];}uploadFile(e,n){let t={waitTranscoding:!0,channelId:this.firstStepChannelId,nsfw:this.serverConfig.instance.isNSFW,privacy:this.highestPrivacy.toString(),name:this.buildVideoFilename(e.name),filename:e.name,previewfile:n};this.resumableUploadService.handleFiles(e,Ae(we({},this.videoUploadService.getNewUploadxOptions()),{metadata:t})),this.isUploadingVideo=!0;}handleUploadError(e){this.videoUploadPercents=0,this.enableRetryAfterError=!0,this.error=wt({err:e,name:"v\xEDdeo",notifier:this.notifier,sticky:!1}),e.status===it.UNSUPPORTED_MEDIA_TYPE_415&&this.cancelUpload();}closeFirstStep(e){let n=this.buildVideoFilename(e);this.form.patchValue({name:n,privacy:this.firstStepPrivacyId,nsfw:this.serverConfig.instance.isNSFW,channelId:this.firstStepChannelId,previewfile:this.previewfileUpload}),this.firstStepDone.emit(n),this.updateTitle();}buildVideoFilename(e){let n=e.replace(/\.[^/.]+$/,""),t=n.length<3?e:n,o=110;return t.length>o&&(t=kt(t,{length:o,omission:""})),t;}refreshTokenAndRetryUpload(){this.authService.refreshAccessToken().subscribe(()=>this.retryUpload());}};r(Te,"\u0275fac",function(n){return new(n||Te)(d(oe),d(ie),d(ae),d(H),d(X),d(pe),d(_e),d(me),d(Ge),d(z),d(j),d($t),d(Lt),d(Le),d(qe));}),r(Te,"\u0275cmp",U({type:Te,selectors:[["my-video-upload"]],viewQuery:function(n,t){if(n&1&&R(pn,5),n&2){let o;F(o=L())&&(t.videofileInput=o.first);}},outputs:{firstStepDone:"firstStepDone",firstStepError:"firstStepError"},standalone:!0,features:[$,B],decls:8,vars:16,consts:()=>{let e;e="Publica";let n;n="Trieu el fitxer a pujar";let t;t="Trieu el fitxer a pujar";let o;o="Canal";let m;m="Privacy";let P;P="Editar";let h;h="Imatge de fons del v\xEDdeo";let y;y="La imatge es fusionar\xE0 amb el vostre fitxer d\u2019\xE0udio. \n          "+"\uFFFD#6\uFFFD\uFFFD/#6\uFFFD"+" La imatge escollida ser\xE0 definitiva i no es podr\xE0 modificar. \n        ";let b;b="Felicitats! El teu v\xEDdeo ja est\xE0 disponible a la biblioteca privada.";let f;return f="La publicaci\xF3 estar\xE0 disponible quan finalitzi la c\xE0rrega",[["videofileInput",""],t,o,m,h,y,b,f,["class","upload-video-container","myDragDrop","",3,"fileDropped",4,"ngIf"],[3,"cancel","retry","isUploading","uploadPercents","error","uploaded","enableRetryAfterError"],["class","alert pt-alert-primary",4,"ngIf"],["novalidate","",1,"mb-3",3,"hidden","formGroup"],["forbidScheduledPublication","false","type","upload",3,"form","formErrors","videoCaptions","validationMessages","userVideoChannels"],[1,"submit-container"],["class","message-submit",4,"ngIf"],["theme","orange","label",e,"icon","circle-tick",3,"click","keydown.enter","disabled"],["myDragDrop","",1,"upload-video-container",3,"fileDropped"],[1,"first-step-block"],["iconName","upload","aria-hidden","true",1,"upload-icon"],[1,"button-file","form-control",3,"ngbTooltip"],["aria-label",n,"id","videofile","type","file",3,"change","accept"],[1,"form-group","form-group-channel"],["for","first-step-channel"],["labelForId","first-step-channel",3,"ngModelChange","items","ngModel"],[1,"form-group"],["for","first-step-privacy"],["labelForId","first-step-privacy",3,"ngModelChange","items","ngModel"],[4,"ngIf"],[1,"form-group","audio-preview"],["for","previewfileUpload"],[1,"audio-image-info"],["inputLabel",P,"inputName","previewfileUpload","previewWidth","360px","previewHeight","200px",3,"ngModelChange","ngModel"],[1,"form-group","upload-audio-button"],["theme","orange","icon","upload",3,"click","label"],[1,"alert","pt-alert-primary"],[1,"message-submit"]];},template:function(n,t){n&1&&(O(0,_n,17,7,"div",8),c(1,"my-upload-progress",9),M("cancel",function(){return t.cancelUpload();})("retry",function(){return t.retryUpload();}),a(),O(2,gn,2,0,"div",10),c(3,"form",11),v(4,"my-video-edit",12),c(5,"div",13),O(6,un,2,0,"div",14),c(7,"my-button",15),M("click",function(){return t.updateSecondStep();})("keydown.enter",function(){return t.updateSecondStep();}),a()()()),n&2&&(p("ngIf",!t.isUploadingVideo),l(),p("isUploading",t.isUploadingVideo)("uploadPercents",t.videoUploadPercents)("error",t.error)("uploaded",t.videoUploaded)("enableRetryAfterError",t.enableRetryAfterError),l(),p("ngIf",t.videoUploaded&&!t.error),l(),p("hidden",!t.isUploadingVideo)("formGroup",t.form),l(),p("form",t.form)("formErrors",t.formErrors)("videoCaptions",t.videoCaptions)("validationMessages",t.validationMessages)("userVideoChannels",t.userVideoChannels),l(2),p("ngIf",t.videoUploaded===!1),l(),p("disabled",t.isPublishingButtonDisabled()));},dependencies:[G,De,le,Be,ge,te,Z,Y,K,J,se,zt,de,Bt,ne,ee,Ce],styles:['.peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;width:auto;border-radius:3px;color:var(--inputForegroundColor);background:var(--inputBackgroundColor);position:relative;height:min-content}.peertube-select-container.disabled[_ngcontent-%COMP%]{background-color:#e5e5e5}.peertube-select-container.disabled[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:default}.peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{background-color:#f9f9f9}@media screen and (max-width: auto){.peertube-select-container[_ngcontent-%COMP%]{width:100%}}.peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:calc(0% + 15px);content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid rgba(0,0,0,0);border-top-color:var(--mainForegroundColor);margin-top:-2px;z-index:100}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:15px;padding:3px 35px 3px 12px;position:relative;border:1px solid var(--inputBorderColor);background:transparent none;-webkit-appearance:none;appearance:none;text-overflow:ellipsis;color:var(--mainForegroundColor);line-height:23px}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:-moz-focusring{color:transparent;text-shadow:0 0 0 #000}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[value=undefined][_ngcontent-%COMP%]{font-weight:600}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]{background-color:var(--greyBackgroundColor);color:var(--greyForegroundColor)}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus, .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem #5858580d}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:hover, .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:active, .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus, .peertube-select-container.peertube-select-button[disabled][_ngcontent-%COMP%], .peertube-select-container.peertube-select-button.disabled[_ngcontent-%COMP%]{color:var(--greyForegroundColor);background-color:var(--greySecondaryBackgroundColor)}.peertube-select-container.peertube-select-button[disabled][_ngcontent-%COMP%], .peertube-select-container.peertube-select-button.disabled[_ngcontent-%COMP%]{cursor:default}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:var(--greyForegroundColor)}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-weight:600;color:var(--greyForegroundColor);border:0;padding:4px 35px 4px 12px}my-peertube-checkbox[_ngcontent-%COMP%]{display:block;margin-bottom:1rem}.nav-tabs[_ngcontent-%COMP%]{margin-bottom:15px}.video-edit[_ngcontent-%COMP%]{height:100%;min-height:300px}.video-edit[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;font-size:15px;padding:3px 15px;width:100%;max-width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid var(--inputBorderColor);border-radius:3px;line-height:23px}.video-edit[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}.video-edit[_ngcontent-%COMP%]   input[readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width: calc(100% + 40px)){.video-edit[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}.caption-entry[_ngcontent-%COMP%]{display:flex;height:40px;align-items:center}.caption-entry[_ngcontent-%COMP%]   a.caption-entry-label[_ngcontent-%COMP%]{color:var(--mainForegroundColor)}.caption-entry[_ngcontent-%COMP%]   a.caption-entry-label[_ngcontent-%COMP%]:hover, .caption-entry[_ngcontent-%COMP%]   a.caption-entry-label[_ngcontent-%COMP%]:focus, .caption-entry[_ngcontent-%COMP%]   a.caption-entry-label[_ngcontent-%COMP%]:active{text-decoration:none!important}.caption-entry[_ngcontent-%COMP%]   a.caption-entry-label[_ngcontent-%COMP%]:focus:not(:focus-visible){outline:none!important}.caption-entry[_ngcontent-%COMP%]   a.caption-entry-label[_ngcontent-%COMP%]:hover{opacity:.8}.caption-entry[_ngcontent-%COMP%]   .caption-entry-label[_ngcontent-%COMP%]{font-weight:700;min-width:100px;margin-inline-end:1.25rem}.caption-entry[_ngcontent-%COMP%]   .caption-entry-state[_ngcontent-%COMP%]{min-width:250px;margin-inline-end:.9375rem}.caption-entry[_ngcontent-%COMP%]   .caption-entry-state.caption-entry-state-create[_ngcontent-%COMP%]{color:#38ab0b}.caption-entry[_ngcontent-%COMP%]   .caption-entry-state.caption-entry-state-delete[_ngcontent-%COMP%]{color:red}.caption-entry[_ngcontent-%COMP%]   .caption-entry-edit[_ngcontent-%COMP%]{padding:4px 13px;border:0;font-weight:600;border-radius:3px!important;text-align:center;cursor:pointer;font-size:15px;line-height:23px}.caption-entry[_ngcontent-%COMP%]   .caption-entry-edit[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-inline-end:.25rem;margin-inline-start:.25rem}.caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]{padding:4px 13px;border:0;font-weight:600;border-radius:3px!important;text-align:center;cursor:pointer;font-size:15px;line-height:23px;background-color:var(--greyBackgroundColor);color:var(--greyForegroundColor)}.caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-inline-end:.25rem;margin-inline-start:.25rem}.caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]:focus, .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem #5858580d}.caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]:hover, .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]:active, .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]:focus, .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[disabled][_ngcontent-%COMP%], .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete.disabled[_ngcontent-%COMP%]{color:var(--greyForegroundColor);background-color:var(--greySecondaryBackgroundColor)}.caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[disabled][_ngcontent-%COMP%], .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete.disabled[_ngcontent-%COMP%]{cursor:default}.caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:var(--greyForegroundColor)}.no-caption[_ngcontent-%COMP%]{text-align:center}.submit-container[_ngcontent-%COMP%]{text-align:end}.submit-container[_ngcontent-%COMP%]   .message-submit[_ngcontent-%COMP%]{display:inline-block;color:var(--greyForegroundColor);margin-inline-end:calc(1.28125rem + .375vw)}@media (min-width: 1200px){.submit-container[_ngcontent-%COMP%]   .message-submit[_ngcontent-%COMP%]{margin-inline-end:1.5625rem}}p-calendar[_ngcontent-%COMP%]{display:block}p-calendar[_ngcontent-%COMP%]     .p-calendar{width:100%}p-calendar[_ngcontent-%COMP%]     .p-inputtext{color:#000;font-size:15px;padding:3px 15px;width:100%;max-width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid var(--inputBorderColor);border-radius:3px;line-height:23px}p-calendar[_ngcontent-%COMP%]     .p-inputtext::placeholder{color:var(--inputPlaceholderColor)}p-calendar[_ngcontent-%COMP%]     .p-inputtext[readonly]{opacity:.7}@media screen and (max-width: calc(100% + 40px)){p-calendar[_ngcontent-%COMP%]     .p-inputtext{width:100%}}.form-columns[_ngcontent-%COMP%]{display:grid;grid-template-columns:66% 1fr;grid-gap:30px}.button-file[_ngcontent-%COMP%]{width:max-content;position:relative;overflow:hidden;display:inline-block;padding:4px 13px;border:0;font-weight:600;border-radius:3px!important;text-align:center;cursor:pointer;font-size:15px;line-height:23px}.button-file[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:100%;height:100%;font-size:100px;text-align:end;filter:alpha(opacity=0);opacity:0;outline:none;background:var(--mainBackgroundColor);cursor:inherit;display:block}.button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-inline-end:.25rem;margin-inline-start:.25rem}.button-file[_ngcontent-%COMP%]:focus, .button-file[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--mainColorLightest)}.button-file[_ngcontent-%COMP%], .button-file[_ngcontent-%COMP%]:active, .button-file[_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}.button-file[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}.button-file[disabled][_ngcontent-%COMP%], .button-file.disabled[_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:var(--inputBorderColor)}.button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:#fff}.hide-chapter-label[_ngcontent-%COMP%]{height:0;opacity:0}.chapter[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto minmax(150px,350px) 1fr;grid-template-rows:auto auto;column-gap:1rem}.chapter[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]{height:31px;min-width:16px;display:flex;align-items:center}.chapter[_ngcontent-%COMP%]   my-delete-button[_ngcontent-%COMP%]{width:fit-content}.chapter[_ngcontent-%COMP%]   .form-error[_ngcontent-%COMP%]{margin-top:0}@media screen and (max-width: 1040px){.main-col:not(.expanded)[_nghost-%COMP%]   .form-columns[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .form-columns[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media screen and (max-width: 800px){.main-col.expanded[_nghost-%COMP%]   .form-columns[_ngcontent-%COMP%], .main-col.expanded   [_nghost-%COMP%]   .form-columns[_ngcontent-%COMP%]{grid-template-columns:1fr}}',".first-step-block[_ngcontent-%COMP%]   .form-group-channel[_ngcontent-%COMP%]{margin-bottom:20px;margin-top:35px}.first-step-block[_ngcontent-%COMP%]   .audio-image-info[_ngcontent-%COMP%]{margin-bottom:10px}.first-step-block[_ngcontent-%COMP%]   .audio-preview[_ngcontent-%COMP%]{margin:30px 0}",'.alert.alert-danger[_ngcontent-%COMP%]{text-align:center}.alert.alert-danger[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{font-weight:600}.first-step-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.first-step-block[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{width:90px;margin-bottom:25px}.first-step-block[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]     .feather, .first-step-block[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]     .material, .first-step-block[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]     .misc{color:var(--inputBorderColor)}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;width:275px;border-radius:3px;color:var(--inputForegroundColor);background:var(--inputBackgroundColor);position:relative;height:min-content}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container.disabled[_ngcontent-%COMP%]{background-color:#e5e5e5}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container.disabled[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:default}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{background-color:#f9f9f9}@media screen and (max-width: 275px){.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]{width:100%}}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:calc(0% + 15px);content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid rgba(0,0,0,0);border-top-color:var(--mainForegroundColor);margin-top:-2px;z-index:100}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:15px;padding:3px 35px 3px 12px;position:relative;border:1px solid var(--inputBorderColor);background:transparent none;-webkit-appearance:none;appearance:none;text-overflow:ellipsis;color:var(--mainForegroundColor);line-height:23px}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:-moz-focusring{color:transparent;text-shadow:0 0 0 #000}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[value=undefined][_ngcontent-%COMP%]{font-weight:600}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]{background-color:var(--greyBackgroundColor);color:var(--greyForegroundColor)}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus, .first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem #5858580d}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:hover, .first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:active, .first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus, .first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[disabled][_ngcontent-%COMP%], .first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button.disabled[_ngcontent-%COMP%]{color:var(--greyForegroundColor);background-color:var(--greySecondaryBackgroundColor)}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[disabled][_ngcontent-%COMP%], .first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button.disabled[_ngcontent-%COMP%]{cursor:default}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:var(--greyForegroundColor)}.first-step-block[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-weight:600;color:var(--greyForegroundColor);border:0;padding:4px 35px 4px 12px}.first-step-block[_ngcontent-%COMP%]   my-select-options[_ngcontent-%COMP%]     ng-select, .first-step-block[_ngcontent-%COMP%]   my-select-channel[_ngcontent-%COMP%]     ng-select, .first-step-block[_ngcontent-%COMP%]   .peertube-radio-container[_ngcontent-%COMP%], .first-step-block[_ngcontent-%COMP%]   .form-group-description[_ngcontent-%COMP%]{width:275px}@media screen and (max-width: 275px){.first-step-block[_ngcontent-%COMP%]   my-select-options[_ngcontent-%COMP%]     ng-select, .first-step-block[_ngcontent-%COMP%]   my-select-channel[_ngcontent-%COMP%]     ng-select, .first-step-block[_ngcontent-%COMP%]   .peertube-radio-container[_ngcontent-%COMP%], .first-step-block[_ngcontent-%COMP%]   .form-group-description[_ngcontent-%COMP%]{width:100%}}.first-step-block[_ngcontent-%COMP%]   .form-group-description[_ngcontent-%COMP%]{white-space:nowrap}.first-step-block[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{display:block;font-size:15px;padding:3px 15px;width:275px;max-width:275px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid var(--inputBorderColor);border-radius:3px;line-height:23px}.first-step-block[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}.first-step-block[_ngcontent-%COMP%]   input[type=text][readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width: 315px){.first-step-block[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%}}.first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]{width:275px;margin-top:30px;padding:4px 13px;border:0;font-weight:600;border-radius:3px!important;text-align:center;cursor:pointer;font-size:15px;line-height:23px}.first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-inline-end:.25rem;margin-inline-start:.25rem}.first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]:focus, .first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--mainColorLightest)}.first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%], .first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]:active, .first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}.first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}.first-step-block[_ngcontent-%COMP%]   input[type=button][disabled][_ngcontent-%COMP%], .first-step-block[_ngcontent-%COMP%]   input[type=button].disabled[_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:var(--inputBorderColor)}.first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .first-step-block[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:#fff}.first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]{width:max-content;position:relative;overflow:hidden;display:inline-block;padding:4px 13px;border:0;font-weight:600;border-radius:3px!important;text-align:center;cursor:pointer;font-size:15px;line-height:23px}.first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:100%;height:100%;font-size:100px;text-align:end;filter:alpha(opacity=0);opacity:0;outline:none;background:var(--mainBackgroundColor);cursor:inherit;display:block}.first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-inline-end:.25rem;margin-inline-start:.25rem}.first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]:focus, .first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--mainColorLightest)}.first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%], .first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]:active, .first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}.first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}.first-step-block[_ngcontent-%COMP%]   .button-file[disabled][_ngcontent-%COMP%], .first-step-block[_ngcontent-%COMP%]   .button-file.disabled[_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:var(--inputBorderColor)}.first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .first-step-block[_ngcontent-%COMP%]   .button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:#fff}']}));var nt=Te;var Cn=["videoUpload"],mn=["videoImportUrl"],On=["videoImportTorrent"],fn=["videoGoLive"],Mn=i=>({"hide-nav":i});function Pn(i,s){i&1&&(c(0,"a",19),g(1,6),a());}function bn(i,s){i&1&&(c(0,"a",20),g(1,7),a());}function vn(i,s){if(i&1&&O(0,Pn,2,0,"a",17)(1,bn,2,0,"a",18),i&2){let e=_();p("ngIf",!e.isContactFormEnabled),l(),p("ngIf",e.isContactFormEnabled);}}function hn(i,s){}function yn(i,s){if(i&1&&(V(0),c(1,"div",21)(2,"div"),w(3),a(),O(4,hn,0,0,"ng-template",22),a(),c(5,"div",23),v(6,"img",24),a(),T()),i&2){let e=_(),n=ve(1);l(3),Pe(e.uploadMessages==null?null:e.uploadMessages.noQuota),l(),p("ngTemplateOutlet",n);}}function En(i,s){}function Sn(i,s){if(i&1&&O(0,En,0,0,"ng-template",22),i&2){_(3);let e=ve(1);p("ngTemplateOutlet",e);}}function In(i,s){if(i&1&&(c(0,"div",29)(1,"div"),w(2),a(),O(3,Sn,1,1,null,15),a()),i&2){let e=_(2);l(2),Pe(e.uploadMessages==null?null:e.uploadMessages.autoBlock),l(),p("ngIf",!e.hasNoQuotaLeft&&!e.hasNoQuotaLeftDaily);}}function Dn(i,s){}function xn(i,s){if(i&1&&O(0,Dn,0,0,"ng-template",22),i&2){_(3);let e=ve(1);p("ngTemplateOutlet",e);}}function Vn(i,s){if(i&1&&(c(0,"div",30)(1,"div"),w(2),a(),O(3,xn,1,1,null,15),a()),i&2){let e=_(2);l(2),Pe(e.uploadMessages==null?null:e.uploadMessages.quotaLeftDaily),l(),p("ngIf",!e.hasNoQuotaLeft);}}function Tn(i,s){}function kn(i,s){if(i&1&&(c(0,"div",31)(1,"div"),w(2),a(),O(3,Tn,0,0,"ng-template",22),a()),i&2){let e=_(2),n=ve(1);l(2),Pe(e.uploadMessages==null?null:e.uploadMessages.quotaLeft),l(),p("ngTemplateOutlet",n);}}function Nn(i,s){i&1&&(c(0,"div",32),fe(1,8),v(2,"strong")(3,"br")(4,"a",33),Me(),a());}function wn(i,s){if(i&1&&(V(0),O(1,In,4,2,"div",25)(2,Vn,4,2,"div",26)(3,kn,4,2,"div",27)(4,Nn,5,0,"div",28),T()),i&2){let e=_();l(),p("ngIf",e.user.isAutoBlocked(e.serverConfig)),l(),p("ngIf",e.hasNoQuotaLeftDaily),l(),p("ngIf",e.hasNoQuotaLeft),l(),p("ngIf",e.isRootUser());}}function An(i,s){i&1&&v(0,"my-user-quota");}function Rn(i,s){if(i&1&&(V(0),g(1,10),T()),i&2){let e=_(3);l(),W(e.videoName),q(1);}}function Fn(i,s){if(i&1&&(V(0),g(1,11),T()),i&2){let e=_(3);l(),W(e.videoName),q(1);}}function Ln(i,s){if(i&1&&(c(0,"div",44),O(1,Rn,2,1,"ng-container",15)(2,Fn,2,1,"ng-container",15),a()),i&2){let e=_(2);l(),p("ngIf",e.secondStepType==="import-url"||e.secondStepType==="import-torrent"),l(),p("ngIf",e.secondStepType==="upload");}}function Un(i,s){if(i&1){let e=x();c(0,"my-video-upload",45,2),M("firstStepDone",function(t){u(e);let o=_(2);return C(o.onFirstStepDone("upload",t));})("firstStepError",function(){u(e);let t=_(2);return C(t.onError());}),a();}}function $n(i,s){if(i&1){let e=x();c(0,"my-video-import-url",45,3),M("firstStepDone",function(t){u(e);let o=_(3);return C(o.onFirstStepDone("import-url",t));})("firstStepError",function(){u(e);let t=_(3);return C(t.onError());}),a();}}function Bn(i,s){i&1&&(V(0,46),c(1,"a",38)(2,"span"),g(3,12),a()(),O(4,$n,2,0,"ng-template",39),T());}function Gn(i,s){if(i&1){let e=x();c(0,"my-video-import-torrent",45,4),M("firstStepDone",function(t){u(e);let o=_(3);return C(o.onFirstStepDone("import-torrent",t));})("firstStepError",function(){u(e);let t=_(3);return C(t.onError());}),a();}}function zn(i,s){i&1&&(V(0,47),c(1,"a",38)(2,"span"),g(3,13),a()(),O(4,Gn,2,0,"ng-template",39),T());}function Xn(i,s){if(i&1){let e=x();c(0,"my-video-go-live",45,5),M("firstStepDone",function(t){u(e);let o=_(3);return C(o.onFirstStepDone("go-live",t));})("firstStepError",function(){u(e);let t=_(3);return C(t.onError());}),a();}}function Hn(i,s){i&1&&(V(0,48),c(1,"a",38)(2,"span"),g(3,14),a()(),O(4,Xn,2,0,"ng-template",39),T());}function jn(i,s){if(i&1){let e=x();c(0,"div",34),O(1,An,1,0,"my-user-quota",15)(2,Ln,3,2,"div",35),v(3,"my-channels-setup-message"),c(4,"div",36,1),M("activeIdChange",function(t){u(e);let o=_();return C(o.onNavChange(t));}),V(6,37),c(7,"a",38)(8,"span"),g(9,9),a()(),O(10,Un,2,0,"ng-template",39),T(),O(11,Bn,5,0,"ng-container",40)(12,zn,5,0,"ng-container",41)(13,Hn,5,0,"ng-container",42),a(),v(14,"div",43),a();}if(i&2){let e=ve(5),n=_();l(),p("ngIf",!n.isInSecondStep()||n.secondStepType==="go-live"),l(),p("ngIf",n.isInSecondStep()),l(2),p("activeId",n.activeNav)("ngClass",ft(8,Mn,!!n.secondStepType)),l(7),p("ngIf",n.isVideoImportHttpEnabled()),l(),p("ngIf",n.isVideoImportTorrentEnabled()),l(),p("ngIf",n.isVideoLiveEnabled()),l(),p("ngbNavOutlet",e);}}var ke=class ke{constructor(s,e,n,t,o,m){this.auth=s;this.userService=e;this.hooks=n;this.serverService=t;this.route=o;this.router=m;r(this,"videoUpload");r(this,"videoImportUrl");r(this,"videoImportTorrent");r(this,"videoGoLive");r(this,"user",null);r(this,"secondStepType");r(this,"videoName");r(this,"activeNav");r(this,"uploadMessages");r(this,"hasNoQuotaLeft",!1);r(this,"hasNoQuotaLeftDaily",!1);r(this,"serverConfig");}get isContactFormEnabled(){return this.serverConfig.email.enabled&&this.serverConfig.contactForm.enabled;}get userInformationLoaded(){return this.auth.userInformationLoaded;}ngOnInit(){this.user=this.auth.getUser(),this.serverConfig=this.serverService.getHTMLConfig(),this.route.snapshot.fragment&&this.onNavChange(this.route.snapshot.fragment),this.buildUploadMessages(),this.userService.getMyVideoQuotaUsed().subscribe(s=>{s.videoQuotaUsed>this.user.videoQuota*.9&&(this.hasNoQuotaLeft=!0),this.user.videoQuota===-1&&(this.hasNoQuotaLeft=!1),s.videoQuotaUsedDaily>this.user.videoQuotaDaily*.9&&(this.hasNoQuotaLeftDaily=!0),this.user.videoQuotaDaily===-1&&(this.hasNoQuotaLeftDaily=!1);});}buildUploadMessages(){return N(this,null,function*(){let s="Ho sentim, la funci\xF3 de pujada est\xE0 deshabilitada per al teu compte. Si vols agregar v\xEDdeos, un administrador ha de desbloquejar la teua quota",e="Uploaded videos are reviewed before publishing for your account. If you want to add videos without moderation review, an admin must turn off your videos auto-block.",n="Your daily video quota is insufficient. If you want to add more videos, you must wait for 24 hours or an admin must increase your daily quota.",t="Your video quota is insufficient. If you want to add more videos, an admin must increase your quota.",o={noQuota:s,autoBlock:e,quotaLeftDaily:n,quotaLeft:t};this.uploadMessages=yield this.hooks.wrapObject(o,"common","filter:upload.messages.create.result");});}onNavChange(s){this.activeNav=s,this.router.navigate([],{fragment:this.activeNav});}onFirstStepDone(s,e){this.secondStepType=s,this.videoName=e;}onError(){this.videoName=void 0,this.secondStepType=void 0;}onUnload(s){let{text:e,canDeactivate:n}=this.canDeactivate();if(!n)return s.returnValue=e,e;}canDeactivate(){return this.secondStepType==="upload"?this.videoUpload.canDeactivate():this.secondStepType==="import-url"?this.videoImportUrl.canDeactivate():this.secondStepType==="import-torrent"?this.videoImportTorrent.canDeactivate():this.secondStepType==="go-live"?this.videoGoLive.canDeactivate():{canDeactivate:!0};}isVideoImportHttpEnabled(){return this.serverConfig.import.videos.http.enabled;}isVideoImportTorrentEnabled(){return this.serverConfig.import.videos.torrent.enabled;}isVideoLiveEnabled(){return this.serverConfig.live.enabled;}isInSecondStep(){return!!this.secondStepType;}isRootUser(){return this.user.username==="root";}};r(ke,"\u0275fac",function(e){return new(e||ke)(d(H),d(Ge),d(j),d(X),d(Le),d(z));}),r(ke,"\u0275cmp",U({type:ke,selectors:[["my-videos-add"]],viewQuery:function(e,n){if(e&1&&(R(Cn,5),R(mn,5),R(On,5),R(fn,5)),e&2){let t;F(t=L())&&(n.videoUpload=t.first),F(t=L())&&(n.videoImportUrl=t.first),F(t=L())&&(n.videoImportTorrent=t.first),F(t=L())&&(n.videoGoLive=t.first);}},hostBindings:function(e,n){e&1&&M("beforeunload",function(o){return n.onUnload(o);},!1,mt);},standalone:!0,features:[B],decls:5,vars:3,consts:()=>{let s;s="Llegir les normes de la inst\xE0ncia per a obtindre ajuda";let e;e="Contact us";let n;n="\n    We recommend you to not use the \n          "+"\uFFFD#2\uFFFD"+"root\n          "+"\uFFFD/#2\uFFFD"+" user to publish your videos, since it's the super-admin account of your instance.\n    \n          "+"\uFFFD#3\uFFFD\uFFFD/#3\uFFFD"+"\n    Instead, \n          "+"\uFFFD#4\uFFFD"+"create a dedicated account\n          "+"\uFFFD/#4\uFFFD"+" to upload your videos.\n  \n        ";let t;t="Puja un fitxer";let o;o="Importar "+"\uFFFD0\uFFFD"+"";let m;m="Pujar "+"\uFFFD0\uFFFD"+"";let P;P="Importar amb URL";let h;h="Importar amb torrent";let y;return y="Posar-se en directe",[["AlertButtons",""],["nav","ngbNav"],["videoUpload",""],["videoImportUrl",""],["videoImportTorrent",""],["videoGoLive",""],s,e,n,t,o,m,P,h,y,[4,"ngIf"],["class","margin-content",4,"ngIf"],["routerLink","/about/instance","class","about-link",4,"ngIf"],["routerLink","/about/contact","class","contact-link",4,"ngIf"],["routerLink","/about/instance",1,"about-link"],["routerLink","/about/contact",1,"contact-link"],[1,"upload-message","upload-disabled","alert","alert-warning"],[3,"ngTemplateOutlet"],[1,"upload-image"],["src","/client/assets/images/mascot/defeated.svg","alt","defeated mascot"],["class","upload-message auto-blocked alert alert-warning",4,"ngIf"],["class","upload-message quota-daily-left alert alert-warning",4,"ngIf"],["class","upload-message quota-left alert alert-warning",4,"ngIf"],["class","upload-message root-user alert alert-warning",4,"ngIf"],[1,"upload-message","auto-blocked","alert","alert-warning"],[1,"upload-message","quota-daily-left","alert","alert-warning"],[1,"upload-message","quota-left","alert","alert-warning"],[1,"upload-message","root-user","alert","alert-warning"],["routerLink","/admin/users"],[1,"margin-content"],["class","title-page",4,"ngIf"],["ngbNav","",1,"nav-tabs","video-add-nav",3,"activeIdChange","activeId","ngClass"],["ngbNavItem","upload"],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","import-url",4,"ngIf"],["ngbNavItem","import-torrent",4,"ngIf"],["ngbNavItem","go-live",4,"ngIf"],[3,"ngbNavOutlet"],[1,"title-page"],[3,"firstStepDone","firstStepError"],["ngbNavItem","import-url"],["ngbNavItem","import-torrent"],["ngbNavItem","go-live"]];},template:function(e,n){e&1&&O(0,vn,2,2,"ng-template",null,0,bt)(2,yn,7,2,"ng-container",15)(3,wn,5,4,"ng-container",15)(4,jn,15,10,"div",16),e&2&&(l(2),p("ngIf",n.user.isUploadDisabled()),l(),p("ngIf",!n.user.isUploadDisabled()),l(),p("ngIf",!n.user.isUploadDisabled()));},dependencies:[G,Ue,ht,Gt,Xt,Dt,vt,It,Vt,xt,St,nt,tt,et,Ye,Tt],styles:[".upload-message[_ngcontent-%COMP%]{width:100%;text-align:center;margin-bottom:0;border-radius:0}.upload-message[_ngcontent-%COMP%]:last-child{margin-bottom:1rem}.upload-message[_ngcontent-%COMP%]   .about-link[_ngcontent-%COMP%], .upload-message[_ngcontent-%COMP%]   .contact-link[_ngcontent-%COMP%]{height:fit-content;margin-top:10px;display:inline-block;padding:4px 13px;border:0;font-weight:600;border-radius:3px!important;text-align:center;cursor:pointer;font-size:15px;line-height:23px}.upload-message[_ngcontent-%COMP%]   .about-link[_ngcontent-%COMP%]:hover, .upload-message[_ngcontent-%COMP%]   .about-link[_ngcontent-%COMP%]:focus, .upload-message[_ngcontent-%COMP%]   .about-link[_ngcontent-%COMP%]:active, .upload-message[_ngcontent-%COMP%]   .contact-link[_ngcontent-%COMP%]:hover, .upload-message[_ngcontent-%COMP%]   .contact-link[_ngcontent-%COMP%]:focus, .upload-message[_ngcontent-%COMP%]   .contact-link[_ngcontent-%COMP%]:active{text-decoration:none!important}.upload-message[_ngcontent-%COMP%]   .about-link[_ngcontent-%COMP%]:focus:not(:focus-visible), .upload-message[_ngcontent-%COMP%]   .contact-link[_ngcontent-%COMP%]:focus:not(:focus-visible){outline:none!important}.upload-message[_ngcontent-%COMP%]   .about-link[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%] + *[_ngcontent-%COMP%], .upload-message[_ngcontent-%COMP%]   .contact-link[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-inline-end:.25rem;margin-inline-start:.25rem}.upload-message[_ngcontent-%COMP%]   .about-link[_ngcontent-%COMP%]:focus, .upload-message[_ngcontent-%COMP%]   .about-link[_ngcontent-%COMP%]:focus-visible, .upload-message[_ngcontent-%COMP%]   .contact-link[_ngcontent-%COMP%]:focus, .upload-message[_ngcontent-%COMP%]   .contact-link[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--mainColorLightest)}.upload-message[_ngcontent-%COMP%]   .about-link[_ngcontent-%COMP%], .upload-message[_ngcontent-%COMP%]   .about-link[_ngcontent-%COMP%]:active, .upload-message[_ngcontent-%COMP%]   .about-link[_ngcontent-%COMP%]:focus, .upload-message[_ngcontent-%COMP%]   .contact-link[_ngcontent-%COMP%], .upload-message[_ngcontent-%COMP%]   .contact-link[_ngcontent-%COMP%]:active, .upload-message[_ngcontent-%COMP%]   .contact-link[_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}.upload-message[_ngcontent-%COMP%]   .about-link[_ngcontent-%COMP%]:hover, .upload-message[_ngcontent-%COMP%]   .contact-link[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}.upload-message[_ngcontent-%COMP%]   .about-link[disabled][_ngcontent-%COMP%], .upload-message[_ngcontent-%COMP%]   .about-link.disabled[_ngcontent-%COMP%], .upload-message[_ngcontent-%COMP%]   .contact-link[disabled][_ngcontent-%COMP%], .upload-message[_ngcontent-%COMP%]   .contact-link.disabled[_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:var(--inputBorderColor)}.upload-message[_ngcontent-%COMP%]   .about-link[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .upload-message[_ngcontent-%COMP%]   .about-link[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .upload-message[_ngcontent-%COMP%]   .about-link[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc, .upload-message[_ngcontent-%COMP%]   .contact-link[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .upload-message[_ngcontent-%COMP%]   .contact-link[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .upload-message[_ngcontent-%COMP%]   .contact-link[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:#fff}.upload-image[_ngcontent-%COMP%]{width:100%;text-align:center}.upload-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:75px;width:220px;height:auto}@media screen and (max-height: 600px){.upload-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:5px;width:160px}}.margin-content[_ngcontent-%COMP%]{padding-top:20px}  .video-add-nav{border-bottom:3px solid #EAEAEA;margin:20px 0 0!important}  .video-add-nav.hide-nav{display:none!important}  .video-add-nav a.nav-link{margin-bottom:-3px;height:40px!important;padding:0 30px!important;border:3px solid transparent}  .video-add-nav a.nav-link:hover,   .video-add-nav a.nav-link:focus,   .video-add-nav a.nav-link:active{text-decoration:none!important}  .video-add-nav a.nav-link:focus:not(:focus-visible){outline:none!important}  .video-add-nav a.nav-link span{border-bottom:2px solid transparent}  .video-add-nav a.nav-link.active{border-color:#eaeaea;border-bottom-color:transparent}  .video-add-nav a.nav-link.active span{border-bottom-color:var(--mainColor)}  .video-add-nav a.nav-link:hover:not(.active){border-color:transparent}  .video-add-nav a.nav-link.active{background-color:var(--submenuBackgroundColor)!important}  .upload-video-container{border:3px solid #EAEAEA;border-top:transparent;background-color:var(--submenuBackgroundColor);border-bottom-left-radius:3px;border-bottom-right-radius:3px;width:100%;min-height:440px;padding-bottom:20px;display:flex;justify-content:center;padding-top:20px}  .upload-video-container.dragover{border:3px dashed var(--mainColor)}@media screen and (max-width: 800px){  .video-add-nav{height:46px;overflow-x:auto;white-space:nowrap;flex-wrap:unset}  .video-add-nav a.nav-link.active{border-color:transparent;background-color:var(--mainBackgroundColor)!important}}@media screen and (max-width: 1040px){.main-col:not(.expanded)[_nghost-%COMP%]     .video-add-nav, .main-col:not(.expanded)   [_nghost-%COMP%]     .video-add-nav{height:46px;overflow-x:auto;white-space:nowrap;flex-wrap:unset}.main-col:not(.expanded)[_nghost-%COMP%]     .video-add-nav a.nav-link.active, .main-col:not(.expanded)   [_nghost-%COMP%]     .video-add-nav a.nav-link.active{border-color:transparent;background-color:var(--mainBackgroundColor)!important}}"]}));var ot=ke;var wr=[{path:"",component:ot,canActivate:[Ft],canDeactivate:[Rt],providers:[je,Qt,qe]}];export{wr as default};/**i18n:2f710d33ac9c4f1483429afcadbb48fcf333aac524700807e70179670fe63b48*/