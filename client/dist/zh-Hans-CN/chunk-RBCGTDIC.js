import{a as V}from"./chunk-DPQ4XGHN.js";import{$ as c,B as a,Bf as L,Gc as g,Kc as E,Qf as H,T as u,Ue as v,Y as C,e as d,gg as f,kg as R,m}from"./chunk-4A7FW7VV.js";import{j as n}from"./chunk-K6ICEIKK.js";var i=class i{constructor(e,t){this.authHttp=e;this.restExtractor=t;n(this,"accountLoaded",new d(1))}getAccount(e){return this.authHttp.get(i.BASE_ACCOUNT_URL+e).pipe(m(t=>new L(t)),u(t=>this.accountLoaded.next(t)),a(t=>this.restExtractor.handleError(t)))}};n(i,"BASE_ACCOUNT_URL",v.apiUrl+"/api/v1/accounts/"),n(i,"\u0275fac",function(t){return new(t||i)(c(E),c(f))}),n(i,"\u0275prov",C({token:i,factory:i.\u0275fac}));var A=i;var r=class r{constructor(e,t,o,s){this.authHttp=e;this.restService=t;this.restExtractor=o;this.serverService=s;n(this,"videoChannelLoaded",new d(1))}static extractVideoChannels(e){let t=[];for(let o of e.data)t.push(new V(o));return{data:t,total:e.total}}getVideoChannel(e){return this.authHttp.get(r.BASE_VIDEO_CHANNEL_URL+e).pipe(m(t=>new V(t)),u(t=>this.videoChannelLoaded.next(t)),a(t=>this.restExtractor.handleError(t)))}listAccountVideoChannels(e){let{account:t,componentPagination:o,withStats:s=!1,sort:h,search:l}=e,I=Math.min(this.serverService.getHTMLConfig().videoChannels.maxPerUser,100),b=o?this.restService.componentToRestPagination(o):{start:0,count:I},p=new g;p=this.restService.addRestGetParams(p,b,h),p=p.set("withStats",s+""),l&&(p=p.set("search",l));let N=A.BASE_ACCOUNT_URL+t.nameWithHost+"/video-channels";return this.authHttp.get(N,{params:p}).pipe(m(S=>r.extractVideoChannels(S)),a(S=>this.restExtractor.handleError(S)))}createVideoChannel(e){return this.authHttp.post(r.BASE_VIDEO_CHANNEL_URL,e).pipe(a(t=>this.restExtractor.handleError(t)))}updateVideoChannel(e,t){return this.authHttp.put(r.BASE_VIDEO_CHANNEL_URL+e,t).pipe(a(o=>this.restExtractor.handleError(o)))}changeVideoChannelImage(e,t,o){let s=r.BASE_VIDEO_CHANNEL_URL+e+"/"+o+"/pick";return this.authHttp.post(s,t).pipe(a(h=>this.restExtractor.handleError(h)))}deleteVideoChannelImage(e,t){let o=r.BASE_VIDEO_CHANNEL_URL+e+"/"+t;return this.authHttp.delete(o).pipe(a(s=>this.restExtractor.handleError(s)))}removeVideoChannel(e){return this.authHttp.delete(r.BASE_VIDEO_CHANNEL_URL+e.nameWithHost).pipe(a(t=>this.restExtractor.handleError(t)))}importVideos(e,t,o){let s=r.BASE_VIDEO_CHANNEL_URL+e+"/import-videos",h={externalChannelUrl:t,videoChannelSyncId:o};return this.authHttp.post(s,h).pipe(a(l=>this.restExtractor.handleError(l)))}};n(r,"BASE_VIDEO_CHANNEL_URL",v.apiUrl+"/api/v1/video-channels/"),n(r,"\u0275fac",function(t){return new(t||r)(c(E),c(R),c(f),c(H))}),n(r,"\u0275prov",C({token:r,factory:r.\u0275fac,providedIn:"root"}));var x=r;export{A as a,x as b};
/**i18n:2f710d33ac9c4f1483429afcadbb48fcf333aac524700807e70179670fe63b48*/
