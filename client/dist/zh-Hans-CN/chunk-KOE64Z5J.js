import{$ as p,$d as b,B as o,Kc as g,Qf as E,Te as l,Ue as v,Y as h,gg as S,m as u,qe as m,qg as A,r as d}from"./chunk-4A7FW7VV.js";import{j as c,k as f}from"./chunk-K6ICEIKK.js";var e=class e{constructor(r,t,a,i){this.authHttp=r;this.restExtractor=t;this.markdownService=a;this.serverService=i}getAbout(){return this.authHttp.get(e.BASE_CONFIG_URL+"/about").pipe(o(r=>this.restExtractor.handleError(r)))}updateInstanceBanner(r){let t=e.BASE_CONFIG_URL+"/instance-banner/pick";return this.authHttp.post(t,r).pipe(o(a=>this.restExtractor.handleError(a)))}deleteInstanceBanner(){let r=e.BASE_CONFIG_URL+"/instance-banner";return this.authHttp.delete(r).pipe(o(t=>this.restExtractor.handleError(t)))}updateInstanceAvatar(r){let t=e.BASE_CONFIG_URL+"/instance-avatar/pick";return this.authHttp.post(t,r).pipe(o(a=>this.restExtractor.handleError(a)))}deleteInstanceAvatar(){let r=e.BASE_CONFIG_URL+"/instance-avatar";return this.authHttp.delete(r).pipe(o(t=>this.restExtractor.handleError(t)))}contactAdministrator(r,t,a,i){let n={fromEmail:r,fromName:t,subject:a,body:i};return this.authHttp.post(e.BASE_SERVER_URL+"/contact",n).pipe(o(s=>this.restExtractor.handleError(s)))}buildHtml(r){return f(this,null,function*(){let t={terms:"",codeOfConduct:"",moderationInformation:"",administrator:"",creationReason:"",maintenanceLifetime:"",businessModel:"",hardwareInformation:""};for(let a of b(t))t[a]=yield this.markdownService.enhancedMarkdownToHTML({markdown:r.instance[a]});return t})}buildTranslatedLanguages(r){return d([this.serverService.getVideoLanguages(),this.serverService.getServerLocale()]).pipe(u(([t,a])=>r.instance.languages.map(i=>{let n=t.find(s=>s.id===i);return n?m(n.label,a):(l.error(`Cannot find language ${i} in available languages`),"")})))}buildTranslatedCategories(r){return d([this.serverService.getVideoCategories(),this.serverService.getServerLocale()]).pipe(u(([t,a])=>r.instance.categories.map(i=>{let n=t.find(s=>s.id===i);return n?m(n.label,a):(l.error(`Cannot find instance category ${i} in available categories`),"")})))}};c(e,"BASE_CONFIG_URL",v.apiUrl+"/api/v1/config"),c(e,"BASE_SERVER_URL",v.apiUrl+"/api/v1/server"),c(e,"\u0275fac",function(t){return new(t||e)(p(g),p(S),p(A),p(E))}),c(e,"\u0275prov",h({token:e,factory:e.\u0275fac}));var L=e;export{L as a};
/**i18n:2f710d33ac9c4f1483429afcadbb48fcf333aac524700807e70179670fe63b48*/
