import{b as y}from"./chunk-NO6VG5DO.js";import"./chunk-WRZZAQTV.js";import{h as G}from"./chunk-5CNYD3QV.js";import{b as $,c as b}from"./chunk-RZGVOE4L.js";import{A as I,d as O,f as C,g as v,l as M,o as N,r as w,z as D}from"./chunk-AHXSH3AS.js";import{Ca as _,Da as t,Ib as T,La as c,Sa as S,Zc as g,ab as d,ad as A,ba as u,bb as i,cb as l,fg as h,kb as p,ob as P,ug as W}from"./chunk-4A7FW7VV.js";import"./chunk-BERSDMCF.js";import"./chunk-ONF7AOBQ.js";import{j as a}from"./chunk-K6ICEIKK.js";var F={VALIDATORS:[O.required],MESSAGES:{required:"\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801\u3002"}};var s=class s extends b{constructor(e,o,r,m,E){super();this.formReactiveService=e;this.userService=o;this.notifier=r;this.router=m;this.route=E;a(this,"userId");a(this,"verificationString");}ngOnInit(){this.buildForm({password:G,"password-confirm":F}),this.userId=this.route.snapshot.queryParams.userId,this.verificationString=this.route.snapshot.queryParams.verificationString,(!this.userId||!this.verificationString)&&(this.notifier.error("\u65E0\u6CD5\u627E\u5230\u7528\u6237 ID \u6216\u9A8C\u8BC1\u4EE3\u7801\u3002"),this.router.navigate(["/"]));}resetPassword(){this.userService.resetPassword(this.userId,this.verificationString,this.form.value.password).subscribe({next:()=>{this.notifier.success("\u5BC6\u7801\u91CD\u7F6E\u6210\u529F\uFF01"),this.router.navigate(["/login"]);},error:e=>this.notifier.error(e.message)});}isConfirmedPasswordValid(){let e=this.form.value;return e.password===e["password-confirm"];}};a(s,"\u0275fac",function(o){return new(o||s)(t($),t(W),t(h),t(A),t(g));}),a(s,"\u0275cmp",u({type:s,selectors:[["ng-component"]],standalone:!0,features:[c,T],decls:13,vars:4,consts:()=>{let e;e="\u5BC6\u7801";let o;o="\u5DF2\u786E\u8BA4\u5BC6\u7801";let r;r="\u91CD\u7F6E\u5BC6\u7801";let m;m="\u91CD\u7F6E\u5BC6\u7801";let E;E="\u5BC6\u7801";let f;return f="\u786E\u8BA4\u5BC6\u7801",[m,E,f,[1,"margin-content"],[1,"title-page"],["role","form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","password"],["formControlName","password","inputId","password","placeholder",e,"autocomplete","new-password",3,"formError"],["for","password-confirm"],["formControlName","password-confirm","inputId","password-confirm","placeholder",o,"autocomplete","new-password",3,"formError"],["type","submit","value",r,1,"peertube-button","orange-button",3,"disabled"]];},template:function(o,r){o&1&&(d(0,"div",3)(1,"h1",4),p(2,0),i(),d(3,"form",5),P("ngSubmit",function(){return r.resetPassword();}),d(4,"div",6)(5,"label",7),p(6,1),i(),l(7,"my-input-text",8),i(),d(8,"div",6)(9,"label",9),p(10,2),i(),l(11,"my-input-text",10),i(),l(12,"input",11),i()()),o&2&&(_(3),S("formGroup",r.form),_(4),S("formError",r.formErrors.password),_(4),S("formError",r.formErrors["password-confirm"]),_(),S("disabled",!r.form.valid||!r.isConfirmedPasswordValid()));},dependencies:[D,M,C,v,I,N,w,y],styles:["my-input-text[_ngcontent-%COMP%]{max-width:340px;display:block}"]}));var R=s;var re=[{path:"",component:R,data:{meta:{title:"\u91CD\u7F6E\u5BC6\u7801"}}}];export{re as default};/**i18n:2f710d33ac9c4f1483429afcadbb48fcf333aac524700807e70179670fe63b48*/