import{a as O}from"./chunk-ENSRLQ2F.js";import{a as I}from"./chunk-K67EGD4G.js";import{a as x}from"./chunk-AHXSH3AS.js";import{Ca as s,Da as u,Ef as y,Hb as C,Ib as S,Lb as m,Oa as f,Qf as M,Sa as a,X as c,ab as h,ba as v,bb as p,cb as l,ob as _,pb as g,rc as w,vc as P,za as d}from"./chunk-4A7FW7VV.js";import{j as i}from"./chunk-K6ICEIKK.js";var T=(o,e)=>({width:o,height:e});function R(o,e){if(o&1&&l(0,"img",5),o&2){let t=g();a("ngStyle",m(2,T,t.previewWidth,t.previewHeight))("src",t.imageSrc,d);}}function N(o,e){if(o&1&&l(0,"div",6),o&2){let t=g();a("ngStyle",m(1,T,t.previewWidth,t.previewHeight));}}var r=class r{constructor(e){this.serverService=e;i(this,"inputLabel");i(this,"inputName");i(this,"previewWidth");i(this,"previewHeight");i(this,"imageSrc");i(this,"allowedExtensionsMessage","");i(this,"maxSizeText");i(this,"serverConfig");i(this,"bytesPipe");i(this,"file");i(this,"propagateChange",e=>{});this.bytesPipe=new I(),this.maxSizeText="\u6700\u5927\u5927\u5C0F";}get videoImageExtensions(){return this.serverConfig.video.image.extensions;}get maxVideoImageSize(){return this.serverConfig.video.image.size.max;}get maxVideoImageSizeInBytes(){return this.bytesPipe.transform(this.maxVideoImageSize);}getReactiveFileButtonTooltip(){return"\uFF08\u6269\u5C55\u540D\uFF1A"+this.videoImageExtensions+"\u3001"+this.maxSizeText+"\uFF1A"+this.maxVideoImageSizeInBytes+"\uFF09";}ngOnInit(){this.serverConfig=this.serverService.getHTMLConfig(),this.allowedExtensionsMessage=this.videoImageExtensions.join(", ");}onFileChanged(e){this.file=e,this.propagateChange(this.file),this.updatePreview();}writeValue(e){this.file=e,this.updatePreview();}registerOnChange(e){this.propagateChange=e;}registerOnTouched(){}updatePreview(){this.file&&y(this.file).then(e=>this.imageSrc=e);}};i(r,"\u0275fac",function(t){return new(t||r)(u(M));}),i(r,"\u0275cmp",v({type:r,selectors:[["my-preview-upload"]],inputs:{inputLabel:"inputLabel",inputName:"inputName",previewWidth:"previewWidth",previewHeight:"previewHeight"},standalone:!0,features:[C([{provide:x,useExisting:c(()=>r),multi:!0}]),S],decls:5,vars:7,consts:()=>{let e;return e="\u9884\u89C8",[[1,"root"],[1,"preview-container"],["placement","right","icon","edit",3,"fileChanged","inputName","inputLabel","extensions","maxFileSize","buttonTooltip"],["class","preview","alt",e,3,"ngStyle","src",4,"ngIf"],["class","preview no-image",3,"ngStyle",4,"ngIf"],["alt",e,1,"preview",3,"ngStyle","src"],[1,"preview","no-image",3,"ngStyle"]];},template:function(t,n){t&1&&(h(0,"div",0)(1,"div",1)(2,"my-reactive-file",2),_("fileChanged",function(b){return n.onFileChanged(b);}),p(),f(3,R,1,5,"img",3)(4,N,1,4,"div",4),p()()),t&2&&(s(2),a("inputName",n.inputName)("inputLabel",n.inputLabel)("extensions",n.videoImageExtensions)("maxFileSize",n.maxVideoImageSize)("buttonTooltip",n.getReactiveFileButtonTooltip()),s(),a("ngIf",n.imageSrc),s(),a("ngIf",!n.imageSrc));},dependencies:[O,w,P],styles:[".root[_ngcontent-%COMP%]{height:auto;display:flex;flex-direction:column}.root[_ngcontent-%COMP%]   .preview-container[_ngcontent-%COMP%]{position:relative}.root[_ngcontent-%COMP%]   .preview-container[_ngcontent-%COMP%]   my-reactive-file[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:10px}.root[_ngcontent-%COMP%]   .preview-container[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{object-fit:cover;border-radius:4px;max-width:100%}.root[_ngcontent-%COMP%]   .preview-container[_ngcontent-%COMP%]   .preview.no-image[_ngcontent-%COMP%]{border:2px solid #808080;background-color:var(--mainBackgroundColor)}"]}));var E=r;export{E as a};/**i18n:2f710d33ac9c4f1483429afcadbb48fcf333aac524700807e70179670fe63b48*/