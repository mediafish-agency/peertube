import{a as lt,b as I,c as X,d as Kt,e as Qt,f as Ot,g as zn,h as Un}from"./chunk-AJL6C324.js";import{a as Vn}from"./chunk-D3FHDE3Z.js";import{a as qt}from"./chunk-CF2PRKCK.js";import{a as Fn}from"./chunk-FCT3LKDI.js";import{a as jt}from"./chunk-NAT3JZF7.js";import{a as Ln}from"./chunk-JPIRBOZL.js";import"./chunk-EBTUWTIZ.js";import{a as Te}from"./chunk-GVEWSQRS.js";import"./chunk-CNM6TRJ3.js";import{c as Zt}from"./chunk-GP5LX4CA.js";import{a as wn,b as Rn}from"./chunk-KG4UYECH.js";import"./chunk-4XL6BJ7M.js";import"./chunk-RBCGTDIC.js";import"./chunk-DPQ4XGHN.js";import{t as yn,u as Sn,v as En,w as In,x as On,y as Pn}from"./chunk-XEFO2OX5.js";import"./chunk-WRZZAQTV.js";import{f as _n,k as Tn,z as bn}from"./chunk-AHXSH3AS.js";import{$ as ge,$b as hn,Ab as j,B as Yt,Bb as sn,Ca as C,Da as Q,Eb as ln,Fb as cn,Gb as un,Gc as _e,Hb as dn,Ib as mn,Kc as gn,Oa as k,Rf as Dn,Sa as M,Ue as xn,Wf as Mn,Y as Je,Zc as vn,Zd as It,ab as O,ba as tn,bb as y,cb as Xt,db as en,eb as nn,fg as Nn,gb as ve,gg as An,j as fe,kb as Wt,la as St,lb as an,ma as Et,mb as on,nd as Cn,ob as Bt,pb as q,qc as pn,rc as fn,yb as rn,zb as Y}from"./chunk-4A7FW7VV.js";import"./chunk-BERSDMCF.js";import"./chunk-ONF7AOBQ.js";import{a as yt,b as Qe,e as Gi,g as $i,j as b}from"./chunk-K6ICEIKK.js";var kn=Gi((ka,Jt)=>{"use strict";(function(t,n,a,r){"use strict";var s=["","webkit","Moz","MS","ms","o"],c=n.createElement("div"),u="function",m=Math.round,f=Math.abs,p=Date.now;function g(e,i,o){return setTimeout(ne(e,o),i);}function T(e,i,o){return Array.isArray(e)?(_(e,o[i],o),!0):!1;}function _(e,i,o){var l;if(e)if(e.forEach)e.forEach(i,o);else if(e.length!==r)for(l=0;l<e.length;)i.call(o,e[l],l,e),l++;else for(l in e)e.hasOwnProperty(l)&&i.call(o,e[l],l,e);}function z(e,i,o){var l="DEPRECATED METHOD: "+i+`
`+o+` AT 
`;return function(){var d=new Error("get-stack-trace"),h=d&&d.stack?d.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",v=t.console&&(t.console.warn||t.console.log);return v&&v.call(t.console,l,h),e.apply(this,arguments);};}var x;typeof Object.assign!="function"?x=function(i){if(i===r||i===null)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(i),l=1;l<arguments.length;l++){var d=arguments[l];if(d!==r&&d!==null)for(var h in d)d.hasOwnProperty(h)&&(o[h]=d[h]);}return o;}:x=Object.assign;var ot=z(function(i,o,l){for(var d=Object.keys(o),h=0;h<d.length;)(!l||l&&i[d[h]]===r)&&(i[d[h]]=o[d[h]]),h++;return i;},"extend","Use `assign`."),ri=z(function(i,o){return ot(i,o,!0);},"merge","Use `assign`.");function V(e,i,o){var l=i.prototype,d;d=e.prototype=Object.create(l),d.constructor=e,d._super=l,o&&x(d,o);}function ne(e,i){return function(){return e.apply(i,arguments);};}function ie(e,i){return typeof e==u?e.apply(i&&i[0]||r,i):e;}function xe(e,i){return e===r?i:e;}function Dt(e,i,o){_(Nt(i),function(l){e.addEventListener(l,o,!1);});}function Mt(e,i,o){_(Nt(i),function(l){e.removeEventListener(l,o,!1);});}function De(e,i){for(;e;){if(e==i)return!0;e=e.parentNode;}return!1;}function et(e,i){return e.indexOf(i)>-1;}function Nt(e){return e.trim().split(/\s+/g);}function rt(e,i,o){if(e.indexOf&&!o)return e.indexOf(i);for(var l=0;l<e.length;){if(o&&e[l][o]==i||!o&&e[l]===i)return l;l++;}return-1;}function At(e){return Array.prototype.slice.call(e,0);}function Me(e,i,o){for(var l=[],d=[],h=0;h<e.length;){var v=i?e[h][i]:e[h];rt(d,v)<0&&l.push(e[h]),d[h]=v,h++;}return o&&(i?l=l.sort(function(D,A){return D[i]>A[i];}):l=l.sort()),l;}function wt(e,i){for(var o,l,d=i[0].toUpperCase()+i.slice(1),h=0;h<s.length;){if(o=s[h],l=o?o+d:i,l in e)return l;h++;}return r;}var si=1;function li(){return si++;}function Ne(e){var i=e.ownerDocument||e;return i.defaultView||i.parentWindow||t;}var ci=/mobile|tablet|ip(ad|hone|od)|android/i,Ae="ontouchstart"in t,ui=wt(t,"PointerEvent")!==r,di=Ae&&ci.test(navigator.userAgent),pt="touch",mi="pen",ae="mouse",hi="kinect",pi=25,N=1,nt=2,E=4,w=8,Rt=1,ft=2,gt=4,vt=8,_t=16,H=ft|gt,it=vt|_t,we=H|it,Re=["x","y"],Vt=["clientX","clientY"];function F(e,i){var o=this;this.manager=e,this.callback=i,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(l){ie(e.options.enable,[e])&&o.handler(l);},this.init();}F.prototype={handler:function(){},init:function(){this.evEl&&Dt(this.element,this.evEl,this.domHandler),this.evTarget&&Dt(this.target,this.evTarget,this.domHandler),this.evWin&&Dt(Ne(this.element),this.evWin,this.domHandler);},destroy:function(){this.evEl&&Mt(this.element,this.evEl,this.domHandler),this.evTarget&&Mt(this.target,this.evTarget,this.domHandler),this.evWin&&Mt(Ne(this.element),this.evWin,this.domHandler);}};function fi(e){var i,o=e.options.inputClass;return o?i=o:ui?i=re:di?i=zt:Ae?i=se:i=Lt,new i(e,gi);}function gi(e,i,o){var l=o.pointers.length,d=o.changedPointers.length,h=i&N&&l-d===0,v=i&(E|w)&&l-d===0;o.isFirst=!!h,o.isFinal=!!v,h&&(e.session={}),o.eventType=i,vi(e,o),e.emit("hammer.input",o),e.recognize(o),e.session.prevInput=o;}function vi(e,i){var o=e.session,l=i.pointers,d=l.length;o.firstInput||(o.firstInput=Ve(i)),d>1&&!o.firstMultiple?o.firstMultiple=Ve(i):d===1&&(o.firstMultiple=!1);var h=o.firstInput,v=o.firstMultiple,P=v?v.center:h.center,D=i.center=Fe(l);i.timeStamp=p(),i.deltaTime=i.timeStamp-h.timeStamp,i.angle=oe(P,D),i.distance=Ft(P,D),_i(o,i),i.offsetDirection=ze(i.deltaX,i.deltaY);var A=Le(i.deltaTime,i.deltaX,i.deltaY);i.overallVelocityX=A.x,i.overallVelocityY=A.y,i.overallVelocity=f(A.x)>f(A.y)?A.x:A.y,i.scale=v?Ci(v.pointers,l):1,i.rotation=v?bi(v.pointers,l):0,i.maxPointers=o.prevInput?i.pointers.length>o.prevInput.maxPointers?i.pointers.length:o.prevInput.maxPointers:i.pointers.length,Ti(o,i);var $=e.element;De(i.srcEvent.target,$)&&($=i.srcEvent.target),i.target=$;}function _i(e,i){var o=i.center,l=e.offsetDelta||{},d=e.prevDelta||{},h=e.prevInput||{};(i.eventType===N||h.eventType===E)&&(d=e.prevDelta={x:h.deltaX||0,y:h.deltaY||0},l=e.offsetDelta={x:o.x,y:o.y}),i.deltaX=d.x+(o.x-l.x),i.deltaY=d.y+(o.y-l.y);}function Ti(e,i){var o=e.lastInterval||i,l=i.timeStamp-o.timeStamp,d,h,v,P;if(i.eventType!=w&&(l>pi||o.velocity===r)){var D=i.deltaX-o.deltaX,A=i.deltaY-o.deltaY,$=Le(l,D,A);h=$.x,v=$.y,d=f($.x)>f($.y)?$.x:$.y,P=ze(D,A),e.lastInterval=i;}else d=o.velocity,h=o.velocityX,v=o.velocityY,P=o.direction;i.velocity=d,i.velocityX=h,i.velocityY=v,i.direction=P;}function Ve(e){for(var i=[],o=0;o<e.pointers.length;)i[o]={clientX:m(e.pointers[o].clientX),clientY:m(e.pointers[o].clientY)},o++;return{timeStamp:p(),pointers:i,center:Fe(i),deltaX:e.deltaX,deltaY:e.deltaY};}function Fe(e){var i=e.length;if(i===1)return{x:m(e[0].clientX),y:m(e[0].clientY)};for(var o=0,l=0,d=0;d<i;)o+=e[d].clientX,l+=e[d].clientY,d++;return{x:m(o/i),y:m(l/i)};}function Le(e,i,o){return{x:i/e||0,y:o/e||0};}function ze(e,i){return e===i?Rt:f(e)>=f(i)?e<0?ft:gt:i<0?vt:_t;}function Ft(e,i,o){o||(o=Re);var l=i[o[0]]-e[o[0]],d=i[o[1]]-e[o[1]];return Math.sqrt(l*l+d*d);}function oe(e,i,o){o||(o=Re);var l=i[o[0]]-e[o[0]],d=i[o[1]]-e[o[1]];return Math.atan2(d,l)*180/Math.PI;}function bi(e,i){return oe(i[1],i[0],Vt)+oe(e[1],e[0],Vt);}function Ci(e,i){return Ft(i[0],i[1],Vt)/Ft(e[0],e[1],Vt);}var yi={mousedown:N,mousemove:nt,mouseup:E},Si="mousedown",Ei="mousemove mouseup";function Lt(){this.evEl=Si,this.evWin=Ei,this.pressed=!1,F.apply(this,arguments);}V(Lt,F,{handler:function(i){var o=yi[i.type];o&N&&i.button===0&&(this.pressed=!0),o&nt&&i.which!==1&&(o=E),this.pressed&&(o&E&&(this.pressed=!1),this.callback(this.manager,o,{pointers:[i],changedPointers:[i],pointerType:ae,srcEvent:i}));}});var Ii={pointerdown:N,pointermove:nt,pointerup:E,pointercancel:w,pointerout:w},Oi={2:pt,3:mi,4:ae,5:hi},Ue="pointerdown",ke="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(Ue="MSPointerDown",ke="MSPointerMove MSPointerUp MSPointerCancel");function re(){this.evEl=Ue,this.evWin=ke,F.apply(this,arguments),this.store=this.manager.session.pointerEvents=[];}V(re,F,{handler:function(i){var o=this.store,l=!1,d=i.type.toLowerCase().replace("ms",""),h=Ii[d],v=Oi[i.pointerType]||i.pointerType,P=v==pt,D=rt(o,i.pointerId,"pointerId");h&N&&(i.button===0||P)?D<0&&(o.push(i),D=o.length-1):h&(E|w)&&(l=!0),!(D<0)&&(o[D]=i,this.callback(this.manager,h,{pointers:o,changedPointers:[i],pointerType:v,srcEvent:i}),l&&o.splice(D,1));}});var Pi={touchstart:N,touchmove:nt,touchend:E,touchcancel:w},xi="touchstart",Di="touchstart touchmove touchend touchcancel";function He(){this.evTarget=xi,this.evWin=Di,this.started=!1,F.apply(this,arguments);}V(He,F,{handler:function(i){var o=Pi[i.type];if(o===N&&(this.started=!0),!!this.started){var l=Mi.call(this,i,o);o&(E|w)&&l[0].length-l[1].length===0&&(this.started=!1),this.callback(this.manager,o,{pointers:l[0],changedPointers:l[1],pointerType:pt,srcEvent:i});}}});function Mi(e,i){var o=At(e.touches),l=At(e.changedTouches);return i&(E|w)&&(o=Me(o.concat(l),"identifier",!0)),[o,l];}var Ni={touchstart:N,touchmove:nt,touchend:E,touchcancel:w},Ai="touchstart touchmove touchend touchcancel";function zt(){this.evTarget=Ai,this.targetIds={},F.apply(this,arguments);}V(zt,F,{handler:function(i){var o=Ni[i.type],l=wi.call(this,i,o);l&&this.callback(this.manager,o,{pointers:l[0],changedPointers:l[1],pointerType:pt,srcEvent:i});}});function wi(e,i){var o=At(e.touches),l=this.targetIds;if(i&(N|nt)&&o.length===1)return l[o[0].identifier]=!0,[o,o];var d,h,v=At(e.changedTouches),P=[],D=this.target;if(h=o.filter(function(A){return De(A.target,D);}),i===N)for(d=0;d<h.length;)l[h[d].identifier]=!0,d++;for(d=0;d<v.length;)l[v[d].identifier]&&P.push(v[d]),i&(E|w)&&delete l[v[d].identifier],d++;if(P.length)return[Me(h.concat(P),"identifier",!0),P];}var Ri=2500,Ge=25;function se(){F.apply(this,arguments);var e=ne(this.handler,this);this.touch=new zt(this.manager,e),this.mouse=new Lt(this.manager,e),this.primaryTouch=null,this.lastTouches=[];}V(se,F,{handler:function(i,o,l){var d=l.pointerType==pt,h=l.pointerType==ae;if(!(h&&l.sourceCapabilities&&l.sourceCapabilities.firesTouchEvents)){if(d)Vi.call(this,o,l);else if(h&&Fi.call(this,l))return;this.callback(i,o,l);}},destroy:function(){this.touch.destroy(),this.mouse.destroy();}});function Vi(e,i){e&N?(this.primaryTouch=i.changedPointers[0].identifier,$e.call(this,i)):e&(E|w)&&$e.call(this,i);}function $e(e){var i=e.changedPointers[0];if(i.identifier===this.primaryTouch){var o={x:i.clientX,y:i.clientY};this.lastTouches.push(o);var l=this.lastTouches,d=function(){var h=l.indexOf(o);h>-1&&l.splice(h,1);};setTimeout(d,Ri);}}function Fi(e){for(var i=e.srcEvent.clientX,o=e.srcEvent.clientY,l=0;l<this.lastTouches.length;l++){var d=this.lastTouches[l],h=Math.abs(i-d.x),v=Math.abs(o-d.y);if(h<=Ge&&v<=Ge)return!0;}return!1;}var Ye=wt(c.style,"touchAction"),Xe=Ye!==r,We="compute",Be="auto",le="manipulation",at="none",Tt="pan-x",bt="pan-y",Ut=zi();function ce(e,i){this.manager=e,this.set(i);}ce.prototype={set:function(e){e==We&&(e=this.compute()),Xe&&this.manager.element.style&&Ut[e]&&(this.manager.element.style[Ye]=e),this.actions=e.toLowerCase().trim();},update:function(){this.set(this.manager.options.touchAction);},compute:function(){var e=[];return _(this.manager.recognizers,function(i){ie(i.options.enable,[i])&&(e=e.concat(i.getTouchAction()));}),Li(e.join(" "));},preventDefaults:function(e){var i=e.srcEvent,o=e.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return;}var l=this.actions,d=et(l,at)&&!Ut[at],h=et(l,bt)&&!Ut[bt],v=et(l,Tt)&&!Ut[Tt];if(d){var P=e.pointers.length===1,D=e.distance<2,A=e.deltaTime<250;if(P&&D&&A)return;}if(!(v&&h)&&(d||h&&o&H||v&&o&it))return this.preventSrc(i);},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault();}};function Li(e){if(et(e,at))return at;var i=et(e,Tt),o=et(e,bt);return i&&o?at:i||o?i?Tt:bt:et(e,le)?le:Be;}function zi(){if(!Xe)return!1;var e={},i=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(o){e[o]=i?t.CSS.supports("touch-action",o):!0;}),e;}var kt=1,L=2,st=4,K=8,W=K,Ct=16,G=32;function B(e){this.options=x({},this.defaults,e||{}),this.id=li(),this.manager=null,this.options.enable=xe(this.options.enable,!0),this.state=kt,this.simultaneous={},this.requireFail=[];}B.prototype={defaults:{},set:function(e){return x(this.options,e),this.manager&&this.manager.touchAction.update(),this;},recognizeWith:function(e){if(T(e,"recognizeWith",this))return this;var i=this.simultaneous;return e=Ht(e,this),i[e.id]||(i[e.id]=e,e.recognizeWith(this)),this;},dropRecognizeWith:function(e){return T(e,"dropRecognizeWith",this)?this:(e=Ht(e,this),delete this.simultaneous[e.id],this);},requireFailure:function(e){if(T(e,"requireFailure",this))return this;var i=this.requireFail;return e=Ht(e,this),rt(i,e)===-1&&(i.push(e),e.requireFailure(this)),this;},dropRequireFailure:function(e){if(T(e,"dropRequireFailure",this))return this;e=Ht(e,this);var i=rt(this.requireFail,e);return i>-1&&this.requireFail.splice(i,1),this;},hasRequireFailures:function(){return this.requireFail.length>0;},canRecognizeWith:function(e){return!!this.simultaneous[e.id];},emit:function(e){var i=this,o=this.state;function l(d){i.manager.emit(d,e);}o<K&&l(i.options.event+Ze(o)),l(i.options.event),e.additionalEvent&&l(e.additionalEvent),o>=K&&l(i.options.event+Ze(o));},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=G;},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(G|kt)))return!1;e++;}return!0;},recognize:function(e){var i=x({},e);if(!ie(this.options.enable,[this,i])){this.reset(),this.state=G;return;}this.state&(W|Ct|G)&&(this.state=kt),this.state=this.process(i),this.state&(L|st|K|Ct)&&this.tryEmit(i);},process:function(e){},getTouchAction:function(){},reset:function(){}};function Ze(e){return e&Ct?"cancel":e&K?"end":e&st?"move":e&L?"start":"";}function qe(e){return e==_t?"down":e==vt?"up":e==ft?"left":e==gt?"right":"";}function Ht(e,i){var o=i.manager;return o?o.get(e):e;}function U(){B.apply(this,arguments);}V(U,B,{defaults:{pointers:1},attrTest:function(e){var i=this.options.pointers;return i===0||e.pointers.length===i;},process:function(e){var i=this.state,o=e.eventType,l=i&(L|st),d=this.attrTest(e);return l&&(o&w||!d)?i|Ct:l||d?o&E?i|K:i&L?i|st:L:G;}});function Gt(){U.apply(this,arguments),this.pX=null,this.pY=null;}V(Gt,U,{defaults:{event:"pan",threshold:10,pointers:1,direction:we},getTouchAction:function(){var e=this.options.direction,i=[];return e&H&&i.push(bt),e&it&&i.push(Tt),i;},directionTest:function(e){var i=this.options,o=!0,l=e.distance,d=e.direction,h=e.deltaX,v=e.deltaY;return d&i.direction||(i.direction&H?(d=h===0?Rt:h<0?ft:gt,o=h!=this.pX,l=Math.abs(e.deltaX)):(d=v===0?Rt:v<0?vt:_t,o=v!=this.pY,l=Math.abs(e.deltaY))),e.direction=d,o&&l>i.threshold&&d&i.direction;},attrTest:function(e){return U.prototype.attrTest.call(this,e)&&(this.state&L||!(this.state&L)&&this.directionTest(e));},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var i=qe(e.direction);i&&(e.additionalEvent=this.options.event+i),this._super.emit.call(this,e);}});function ue(){U.apply(this,arguments);}V(ue,U,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[at];},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&L);},emit:function(e){if(e.scale!==1){var i=e.scale<1?"in":"out";e.additionalEvent=this.options.event+i;}this._super.emit.call(this,e);}});function de(){B.apply(this,arguments),this._timer=null,this._input=null;}V(de,B,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Be];},process:function(e){var i=this.options,o=e.pointers.length===i.pointers,l=e.distance<i.threshold,d=e.deltaTime>i.time;if(this._input=e,!l||!o||e.eventType&(E|w)&&!d)this.reset();else if(e.eventType&N)this.reset(),this._timer=g(function(){this.state=W,this.tryEmit();},i.time,this);else if(e.eventType&E)return W;return G;},reset:function(){clearTimeout(this._timer);},emit:function(e){this.state===W&&(e&&e.eventType&E?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=p(),this.manager.emit(this.options.event,this._input)));}});function me(){U.apply(this,arguments);}V(me,U,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[at];},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&L);}});function he(){U.apply(this,arguments);}V(he,U,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:H|it,pointers:1},getTouchAction:function(){return Gt.prototype.getTouchAction.call(this);},attrTest:function(e){var i=this.options.direction,o;return i&(H|it)?o=e.overallVelocity:i&H?o=e.overallVelocityX:i&it&&(o=e.overallVelocityY),this._super.attrTest.call(this,e)&&i&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&f(o)>this.options.velocity&&e.eventType&E;},emit:function(e){var i=qe(e.offsetDirection);i&&this.manager.emit(this.options.event+i,e),this.manager.emit(this.options.event,e);}});function $t(){B.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0;}V($t,B,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[le];},process:function(e){var i=this.options,o=e.pointers.length===i.pointers,l=e.distance<i.threshold,d=e.deltaTime<i.time;if(this.reset(),e.eventType&N&&this.count===0)return this.failTimeout();if(l&&d&&o){if(e.eventType!=E)return this.failTimeout();var h=this.pTime?e.timeStamp-this.pTime<i.interval:!0,v=!this.pCenter||Ft(this.pCenter,e.center)<i.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,!v||!h?this.count=1:this.count+=1,this._input=e;var P=this.count%i.taps;if(P===0)return this.hasRequireFailures()?(this._timer=g(function(){this.state=W,this.tryEmit();},i.interval,this),L):W;}return G;},failTimeout:function(){return this._timer=g(function(){this.state=G;},this.options.interval,this),G;},reset:function(){clearTimeout(this._timer);},emit:function(){this.state==W&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input));}});function Z(e,i){return i=i||{},i.recognizers=xe(i.recognizers,Z.defaults.preset),new pe(e,i);}Z.VERSION="2.0.7",Z.defaults={domEvents:!1,touchAction:We,enable:!0,inputTarget:null,inputClass:null,preset:[[me,{enable:!1}],[ue,{enable:!1},["rotate"]],[he,{direction:H}],[Gt,{direction:H},["swipe"]],[$t],[$t,{event:"doubletap",taps:2},["tap"]],[de]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Ui=1,je=2;function pe(e,i){this.options=x({},Z.defaults,i||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=fi(this),this.touchAction=new ce(this,this.options.touchAction),Ke(this,!0),_(this.options.recognizers,function(o){var l=this.add(new o[0](o[1]));o[2]&&l.recognizeWith(o[2]),o[3]&&l.requireFailure(o[3]);},this);}pe.prototype={set:function(e){return x(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this;},stop:function(e){this.session.stopped=e?je:Ui;},recognize:function(e){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(e);var o,l=this.recognizers,d=i.curRecognizer;(!d||d&&d.state&W)&&(d=i.curRecognizer=null);for(var h=0;h<l.length;)o=l[h],i.stopped!==je&&(!d||o==d||o.canRecognizeWith(d))?o.recognize(e):o.reset(),!d&&o.state&(L|st|K)&&(d=i.curRecognizer=o),h++;}},get:function(e){if(e instanceof B)return e;for(var i=this.recognizers,o=0;o<i.length;o++)if(i[o].options.event==e)return i[o];return null;},add:function(e){if(T(e,"add",this))return this;var i=this.get(e.options.event);return i&&this.remove(i),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e;},remove:function(e){if(T(e,"remove",this))return this;if(e=this.get(e),e){var i=this.recognizers,o=rt(i,e);o!==-1&&(i.splice(o,1),this.touchAction.update());}return this;},on:function(e,i){if(e!==r&&i!==r){var o=this.handlers;return _(Nt(e),function(l){o[l]=o[l]||[],o[l].push(i);}),this;}},off:function(e,i){if(e!==r){var o=this.handlers;return _(Nt(e),function(l){i?o[l]&&o[l].splice(rt(o[l],i),1):delete o[l];}),this;}},emit:function(e,i){this.options.domEvents&&ki(e,i);var o=this.handlers[e]&&this.handlers[e].slice();if(!(!o||!o.length)){i.type=e,i.preventDefault=function(){i.srcEvent.preventDefault();};for(var l=0;l<o.length;)o[l](i),l++;}},destroy:function(){this.element&&Ke(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null;}};function Ke(e,i){var o=e.element;if(o.style){var l;_(e.options.cssProps,function(d,h){l=wt(o.style,h),i?(e.oldCssProps[l]=o.style[l],o.style[l]=d):o.style[l]=e.oldCssProps[l]||"";}),i||(e.oldCssProps={});}}function ki(e,i){var o=n.createEvent("Event");o.initEvent(e,!0,!0),o.gesture=i,i.target.dispatchEvent(o);}x(Z,{INPUT_START:N,INPUT_MOVE:nt,INPUT_END:E,INPUT_CANCEL:w,STATE_POSSIBLE:kt,STATE_BEGAN:L,STATE_CHANGED:st,STATE_ENDED:K,STATE_RECOGNIZED:W,STATE_CANCELLED:Ct,STATE_FAILED:G,DIRECTION_NONE:Rt,DIRECTION_LEFT:ft,DIRECTION_RIGHT:gt,DIRECTION_UP:vt,DIRECTION_DOWN:_t,DIRECTION_HORIZONTAL:H,DIRECTION_VERTICAL:it,DIRECTION_ALL:we,Manager:pe,Input:F,TouchAction:ce,TouchInput:zt,MouseInput:Lt,PointerEventInput:re,TouchMouseInput:se,SingleTouchInput:He,Recognizer:B,AttrRecognizer:U,Tap:$t,Pan:Gt,Swipe:he,Pinch:ue,Rotate:me,Press:de,on:Dt,off:Mt,each:_,merge:ri,extend:ot,assign:x,inherit:V,bindFn:ne,prefixed:wt});var Hi=typeof t<"u"?t:typeof self<"u"?self:{};Hi.Hammer=Z,typeof define=="function"&&define.amd?define(function(){return Z;}):typeof Jt<"u"&&Jt.exports?Jt.exports=Z:t[a]=Z;})(window,document,"Hammer");});var ct=$i(kn());var xt=t=>t&&t.enabled&&t.modifierKey,Zn=(t,n)=>t&&n[t+"Key"],Oe=(t,n)=>t&&!n[t+"Key"];function J(t,n,a){return t===void 0?!0:typeof t=="string"?t.indexOf(n)!==-1:typeof t=="function"?t({chart:a}).indexOf(n)!==-1:!1;}function be(t,n){return typeof t=="function"&&(t=t({chart:n})),typeof t=="string"?{x:t.indexOf("x")!==-1,y:t.indexOf("y")!==-1}:{x:!1,y:!1};}function Yi(t,n){let a;return function(){return clearTimeout(a),a=setTimeout(t,n),n;};}function Xi({x:t,y:n},a){let r=a.scales,s=Object.keys(r);for(let c=0;c<s.length;c++){let u=r[s[c]];if(n>=u.top&&n<=u.bottom&&t>=u.left&&t<=u.right)return u;}return null;}function qn(t,n,a){let{mode:r="xy",scaleMode:s,overScaleMode:c}=t||{},u=Xi(n,a),m=be(r,a),f=be(s,a);if(c){let g=be(c,a);for(let T of["x","y"])g[T]&&(f[T]=m[T],m[T]=!1);}if(u&&f[u.axis])return[u];let p=[];return X(a.scales,function(g){m[g.axis]&&p.push(g);}),p;}var Ce=new WeakMap();function S(t){let n=Ce.get(t);return n||(n={originalScaleLimits:{},updatedScaleLimits:{},handlers:{},panDelta:{}},Ce.set(t,n)),n;}function Wi(t){Ce.delete(t);}function jn(t,n,a){let r=t.max-t.min,s=r*(n-1),c=t.isHorizontal()?a.x:a.y,u=Math.max(0,Math.min(1,(t.getValueForPixel(c)-t.min)/r||0)),m=1-u;return{min:s*u,max:s*m};}function Hn(t,n,a,r,s){let c=a[r];if(c==="original"){let u=t.originalScaleLimits[n.id][r];c=lt(u.options,u.scale);}return lt(c,s);}function Bi(t,n,a){let r=t.getValueForPixel(n),s=t.getValueForPixel(a);return{min:Math.min(r,s),max:Math.max(r,s)};}function ut(t,{min:n,max:a},r,s=!1){let c=S(t.chart),{id:u,axis:m,options:f}=t,p=r&&(r[u]||r[m])||{},{minRange:g=0}=p,T=Hn(c,t,p,"min",-1/0),_=Hn(c,t,p,"max",1/0),z=s?Math.max(a-n,g):t.max-t.min,x=(z-a+n)/2;return n-=x,a+=x,n<T?(n=T,a=Math.min(T+z,_)):a>_&&(a=_,n=Math.max(_-z,T)),f.min=n,f.max=a,c.updatedScaleLimits[t.id]={min:n,max:a},t.parse(n)!==t.min||t.parse(a)!==t.max;}function Zi(t,n,a,r){let s=jn(t,n,a),c={min:t.min+s.min,max:t.max-s.max};return ut(t,c,r,!0);}function qi(t,n,a,r){ut(t,Bi(t,n,a),r,!0);}var Gn=t=>t===0||isNaN(t)?0:t<0?Math.min(Math.round(t),-1):Math.max(Math.round(t),1);function ji(t){let a=t.getLabels().length-1;t.min>0&&(t.min-=1),t.max<a&&(t.max+=1);}function Ki(t,n,a,r){let s=jn(t,n,a);t.min===t.max&&n<1&&ji(t);let c={min:t.min+Gn(s.min),max:t.max-Gn(s.max)};return ut(t,c,r,!0);}function Qi(t){return t.isHorizontal()?t.width:t.height;}function Ji(t,n,a){let s=t.getLabels().length-1,{min:c,max:u}=t,m=Math.max(u-c,1),f=Math.round(Qi(t)/Math.max(m,10)),p=Math.round(Math.abs(n/f)),g;return n<-f?(u=Math.min(u+p,s),c=m===1?u:u-m,g=u===s):n>f&&(c=Math.max(0,c-p),u=m===1?c:c+m,g=c===0),ut(t,{min:c,max:u},a)||g;}var ta={second:500,minute:30*1e3,hour:30*60*1e3,day:12*60*60*1e3,week:3.5*24*60*60*1e3,month:15*24*60*60*1e3,quarter:60*24*60*60*1e3,year:182*24*60*60*1e3};function Kn(t,n,a,r=!1){let{min:s,max:c,options:u}=t,m=u.time&&u.time.round,f=ta[m]||0,p=t.getValueForPixel(t.getPixelForValue(s+f)-n),g=t.getValueForPixel(t.getPixelForValue(c+f)-n),{min:T=-1/0,max:_=1/0}=r&&a&&a[t.axis]||{};return isNaN(p)||isNaN(g)||p<T||g>_?!0:ut(t,{min:p,max:g},a,r);}function $n(t,n,a){return Kn(t,n,a,!0);}var ye={category:Ki,default:Zi},Se={default:qi},Ee={category:Ji,default:Kn,logarithmic:$n,timeseries:$n};function ea(t,n,a){let{id:r,options:{min:s,max:c}}=t;if(!n[r]||!a[r])return!0;let u=a[r];return u.min!==s||u.max!==c;}function Yn(t,n){X(t,(a,r)=>{n[r]||delete t[r];});}function dt(t,n){let{scales:a}=t,{originalScaleLimits:r,updatedScaleLimits:s}=n;return X(a,function(c){ea(c,r,s)&&(r[c.id]={min:{scale:c.min,options:c.options.min},max:{scale:c.max,options:c.options.max}});}),Yn(r,a),Yn(s,a),r;}function Xn(t,n,a,r){let s=ye[t.type]||ye.default;I(s,[t,n,a,r]);}function Wn(t,n,a,r,s){let c=Se[t.type]||Se.default;I(c,[t,n,a,r,s]);}function na(t){let n=t.chartArea;return{x:(n.left+n.right)/2,y:(n.top+n.bottom)/2};}function Pe(t,n,a="none"){let{x:r=1,y:s=1,focalPoint:c=na(t)}=typeof n=="number"?{x:n,y:n}:n,u=S(t),{options:{limits:m,zoom:f}}=u;dt(t,u);let p=r!==1,g=s!==1,T=qn(f,c,t);X(T||t.scales,function(_){_.isHorizontal()&&p?Xn(_,r,c,m):!_.isHorizontal()&&g&&Xn(_,s,c,m);}),t.update(a),I(f.onZoom,[{chart:t}]);}function Qn(t,n,a,r="none"){let s=S(t),{options:{limits:c,zoom:u}}=s,{mode:m="xy"}=u;dt(t,s);let f=J(m,"x",t),p=J(m,"y",t);X(t.scales,function(g){g.isHorizontal()&&f?Wn(g,n.x,a.x,c):!g.isHorizontal()&&p&&Wn(g,n.y,a.y,c);}),t.update(r),I(u.onZoom,[{chart:t}]);}function ia(t,n,a,r="none"){dt(t,S(t));let s=t.scales[n];ut(s,a,void 0,!0),t.update(r);}function aa(t,n="default"){let a=S(t),r=dt(t,a);X(t.scales,function(s){let c=s.options;r[s.id]?(c.min=r[s.id].min.options,c.max=r[s.id].max.options):(delete c.min,delete c.max);}),t.update(n),I(a.options.zoom.onZoomComplete,[{chart:t}]);}function oa(t,n){let a=t.originalScaleLimits[n];if(!a)return;let{min:r,max:s}=a;return lt(s.options,s.scale)-lt(r.options,r.scale);}function ra(t){let n=S(t),a=1,r=1;return X(t.scales,function(s){let c=oa(n,s.id);if(c){let u=Math.round(c/(s.max-s.min)*100)/100;a=Math.min(a,u),r=Math.max(r,u);}}),a<1?a:r;}function Bn(t,n,a,r){let{panDelta:s}=r,c=s[t.id]||0;Kt(c)===Kt(n)&&(n+=c);let u=Ee[t.type]||Ee.default;I(u,[t,n,a])?s[t.id]=0:s[t.id]=n;}function Jn(t,n,a,r="none"){let{x:s=0,y:c=0}=typeof n=="number"?{x:n,y:n}:n,u=S(t),{options:{pan:m,limits:f}}=u,{onPan:p}=m||{};dt(t,u);let g=s!==0,T=c!==0;X(a||t.scales,function(_){_.isHorizontal()&&g?Bn(_,s,f,u):!_.isHorizontal()&&T&&Bn(_,c,f,u);}),t.update(r),I(p,[{chart:t}]);}function ti(t){let n=S(t);dt(t,n);let a={};for(let r of Object.keys(t.scales)){let{min:s,max:c}=n.originalScaleLimits[r]||{min:{},max:{}};a[r]={min:s.scale,max:c.scale};}return a;}function sa(t){let n=ti(t);for(let a of Object.keys(t.scales)){let{min:r,max:s}=n[a];if(r!==void 0&&t.scales[a].min!==r||s!==void 0&&t.scales[a].max!==s)return!0;}return!1;}function R(t,n){let{handlers:a}=S(t),r=a[n];r&&r.target&&(r.target.removeEventListener(n,r),delete a[n]);}function Pt(t,n,a,r){let{handlers:s,options:c}=S(t),u=s[a];u&&u.target===n||(R(t,a),s[a]=m=>r(t,m,c),s[a].target=n,n.addEventListener(a,s[a]));}function la(t,n){let a=S(t);a.dragStart&&(a.dragging=!0,a.dragEnd=n,t.update("none"));}function ca(t,n){let a=S(t);!a.dragStart||n.key!=="Escape"||(R(t,"keydown"),a.dragging=!1,a.dragStart=a.dragEnd=null,t.update("none"));}function ei(t,n,a){let{onZoomStart:r,onZoomRejected:s}=a;if(r){let c=Ot(n,t);if(I(r,[{chart:t,event:n,point:c}])===!1)return I(s,[{chart:t,event:n}]),!1;}}function ua(t,n){let a=S(t),{pan:r,zoom:s={}}=a.options;if(n.button!==0||Zn(xt(r),n)||Oe(xt(s.drag),n))return I(s.onZoomRejected,[{chart:t,event:n}]);ei(t,n,s)!==!1&&(a.dragStart=n,Pt(t,t.canvas,"mousemove",la),Pt(t,window.document,"keydown",ca));}function ni(t,n,a,r){let s=J(n,"x",t),c=J(n,"y",t),{top:u,left:m,right:f,bottom:p,width:g,height:T}=t.chartArea,_=Ot(a,t),z=Ot(r,t);s&&(m=Math.min(_.x,z.x),f=Math.max(_.x,z.x)),c&&(u=Math.min(_.y,z.y),p=Math.max(_.y,z.y));let x=f-m,ot=p-u;return{left:m,top:u,right:f,bottom:p,width:x,height:ot,zoomX:s&&x?1+(g-x)/g:1,zoomY:c&&ot?1+(T-ot)/T:1};}function da(t,n){let a=S(t);if(!a.dragStart)return;R(t,"mousemove");let{mode:r,onZoomComplete:s,drag:{threshold:c=0}}=a.options.zoom,u=ni(t,r,a.dragStart,n),m=J(r,"x",t)?u.width:0,f=J(r,"y",t)?u.height:0,p=Math.sqrt(m*m+f*f);if(a.dragStart=a.dragEnd=null,p<=c){a.dragging=!1,t.update("none");return;}Qn(t,{x:u.left,y:u.top},{x:u.right,y:u.bottom},"zoom"),setTimeout(()=>a.dragging=!1,500),I(s,[{chart:t}]);}function ma(t,n,a){if(Oe(xt(a.wheel),n)){I(a.onZoomRejected,[{chart:t,event:n}]);return;}if(ei(t,n,a)!==!1&&(n.cancelable&&n.preventDefault(),n.deltaY!==void 0))return!0;}function ha(t,n){let{handlers:{onZoomComplete:a},options:{zoom:r}}=S(t);if(!ma(t,n,r))return;let s=n.target.getBoundingClientRect(),c=1+(n.deltaY>=0?-r.wheel.speed:r.wheel.speed),u={x:c,y:c,focalPoint:{x:n.clientX-s.left,y:n.clientY-s.top}};Pe(t,u),a&&a();}function pa(t,n,a,r){a&&(S(t).handlers[n]=Yi(()=>I(a,[{chart:t}]),r));}function fa(t,n){let a=t.canvas,{wheel:r,drag:s,onZoomComplete:c}=n.zoom;r.enabled?(Pt(t,a,"wheel",ha),pa(t,"onZoomComplete",c,250)):R(t,"wheel"),s.enabled?(Pt(t,a,"mousedown",ua),Pt(t,a.ownerDocument,"mouseup",da)):(R(t,"mousedown"),R(t,"mousemove"),R(t,"mouseup"),R(t,"keydown"));}function ga(t){R(t,"mousedown"),R(t,"mousemove"),R(t,"mouseup"),R(t,"wheel"),R(t,"click"),R(t,"keydown");}function va(t,n){return function(a,r){let{pan:s,zoom:c={}}=n.options;if(!s||!s.enabled)return!1;let u=r&&r.srcEvent;return u&&!n.panning&&r.pointerType==="mouse"&&(Oe(xt(s),u)||Zn(xt(c.drag),u))?(I(s.onPanRejected,[{chart:t,event:r}]),!1):!0;};}function _a(t,n){let a=Math.abs(t.clientX-n.clientX),r=Math.abs(t.clientY-n.clientY),s=a/r,c,u;return s>.3&&s<1.7?c=u=!0:a>r?c=!0:u=!0,{x:c,y:u};}function ii(t,n,a){if(n.scale){let{center:r,pointers:s}=a,c=1/n.scale*a.scale,u=a.target.getBoundingClientRect(),m=_a(s[0],s[1]),f=n.options.zoom.mode,p={x:m.x&&J(f,"x",t)?c:1,y:m.y&&J(f,"y",t)?c:1,focalPoint:{x:r.x-u.left,y:r.y-u.top}};Pe(t,p),n.scale=a.scale;}}function Ta(t,n){n.options.zoom.pinch.enabled&&(n.scale=1);}function ba(t,n,a){n.scale&&(ii(t,n,a),n.scale=null,I(n.options.zoom.onZoomComplete,[{chart:t}]));}function ai(t,n,a){let r=n.delta;r&&(n.panning=!0,Jn(t,{x:a.deltaX-r.x,y:a.deltaY-r.y},n.panScales),n.delta={x:a.deltaX,y:a.deltaY});}function Ca(t,n,a){let{enabled:r,onPanStart:s,onPanRejected:c}=n.options.pan;if(!r)return;let u=a.target.getBoundingClientRect(),m={x:a.center.x-u.left,y:a.center.y-u.top};if(I(s,[{chart:t,event:a,point:m}])===!1)return I(c,[{chart:t,event:a}]);n.panScales=qn(n.options.pan,m,t),n.delta={x:0,y:0},clearTimeout(n.panEndTimeout),ai(t,n,a);}function ya(t,n){n.delta=null,n.panning&&(n.panEndTimeout=setTimeout(()=>n.panning=!1,500),I(n.options.pan.onPanComplete,[{chart:t}]));}var Ie=new WeakMap();function Sa(t,n){let a=S(t),r=t.canvas,{pan:s,zoom:c}=n,u=new ct.default.Manager(r);c&&c.pinch.enabled&&(u.add(new ct.default.Pinch()),u.on("pinchstart",()=>Ta(t,a)),u.on("pinch",m=>ii(t,a,m)),u.on("pinchend",m=>ba(t,a,m))),s&&s.enabled&&(u.add(new ct.default.Pan({threshold:s.threshold,enable:va(t,a)})),u.on("panstart",m=>Ca(t,a,m)),u.on("panmove",m=>ai(t,a,m)),u.on("panend",()=>ya(t,a))),Ie.set(t,u);}function Ea(t){let n=Ie.get(t);n&&(n.remove("pinchstart"),n.remove("pinch"),n.remove("pinchend"),n.remove("panstart"),n.remove("pan"),n.remove("panend"),n.destroy(),Ie.delete(t));}var Ia="2.0.1";function te(t,n,a){let r=a.zoom.drag,{dragStart:s,dragEnd:c}=S(t);if(r.drawTime!==n||!c)return;let{left:u,top:m,width:f,height:p}=ni(t,a.zoom.mode,s,c),g=t.ctx;g.save(),g.beginPath(),g.fillStyle=r.backgroundColor||"rgba(225,225,225,0.3)",g.fillRect(u,m,f,p),r.borderWidth>0&&(g.lineWidth=r.borderWidth,g.strokeStyle=r.borderColor||"rgba(225,225,225)",g.strokeRect(u,m,f,p)),g.restore();}var oi={id:"zoom",version:Ia,defaults:{pan:{enabled:!1,mode:"xy",threshold:10,modifierKey:null},zoom:{wheel:{enabled:!1,speed:.1,modifierKey:null},drag:{enabled:!1,drawTime:"beforeDatasetsDraw",modifierKey:null},pinch:{enabled:!1},mode:"xy"}},start:function(t,n,a){let r=S(t);r.options=a,Object.prototype.hasOwnProperty.call(a.zoom,"enabled")&&console.warn("The option `zoom.enabled` is no longer supported. Please use `zoom.wheel.enabled`, `zoom.drag.enabled`, or `zoom.pinch.enabled`."),(Object.prototype.hasOwnProperty.call(a.zoom,"overScaleMode")||Object.prototype.hasOwnProperty.call(a.pan,"overScaleMode"))&&console.warn("The option `overScaleMode` is deprecated. Please use `scaleMode` instead (and update `mode` as desired)."),ct.default&&Sa(t,a),t.pan=(s,c,u)=>Jn(t,s,c,u),t.zoom=(s,c)=>Pe(t,s,c),t.zoomRect=(s,c,u)=>Qn(t,s,c,u),t.zoomScale=(s,c,u)=>ia(t,s,c,u),t.resetZoom=s=>aa(t,s),t.getZoomLevel=()=>ra(t),t.getInitialScaleBounds=()=>ti(t),t.isZoomedOrPanned=()=>sa(t);},beforeEvent(t){let n=S(t);if(n.panning||n.dragging)return!1;},beforeUpdate:function(t,n,a){let r=S(t);r.options=a,fa(t,a);},beforeDatasetsDraw(t,n,a){te(t,"beforeDatasetsDraw",a);},afterDatasetsDraw(t,n,a){te(t,"afterDatasetsDraw",a);},beforeDraw(t,n,a){te(t,"beforeDraw",a);},afterDraw(t,n,a){te(t,"afterDraw",a);},stop:function(t){ga(t),ct.default&&Ea(t),Wi(t);},panFunctions:Ee,zoomFunctions:ye,zoomRectFunctions:Se};var tt=class tt{constructor(n,a){this.authHttp=n;this.restExtractor=a;}getOverallStats(n){let{videoId:a,startDate:r,endDate:s}=n,c=new _e();return r&&(c=c.append("startDate",r.toISOString())),s&&(c=c.append("endDate",s.toISOString())),this.authHttp.get(Zt.BASE_VIDEO_URL+"/"+a+"/stats/overall",{params:c}).pipe(Yt(u=>this.restExtractor.handleError(u)));}getTimeserieStats(n){let{videoId:a,metric:r,startDate:s,endDate:c}=n,u=new _e();return s&&(u=u.append("startDate",s.toISOString())),c&&(u=u.append("endDate",c.toISOString())),this.authHttp.get(Zt.BASE_VIDEO_URL+"/"+a+"/stats/timeseries/"+r,{params:u}).pipe(Yt(m=>this.restExtractor.handleError(m)));}getRetentionStats(n){return this.authHttp.get(Zt.BASE_VIDEO_URL+"/"+n+"/stats/retention").pipe(Yt(a=>this.restExtractor.handleError(a)));}};b(tt,"BASE_VIDEO_STATS_URL",xn.apiUrl+"/api/v1/videos/"),b(tt,"\u0275fac",function(a){return new(a||tt)(ge(gn),ge(An));}),b(tt,"\u0275prov",Je({token:tt,factory:tt.ɵfac,providedIn:"root"}));var mt=tt;function Da(t,n){if(t&1&&Y(0),t&2){let a=q(2).$implicit;j(a.help);}}function Ma(t,n){t&1&&(O(0,"my-help"),k(1,Da,1,1,"ng-template",24),y());}function Na(t,n){if(t&1&&(O(0,"div",25),Y(1),y()),t&2){let a=q().$implicit;C(),j(a.moreInfo);}}function Aa(t,n){if(t&1&&(O(0,"div",19)(1,"div",20),Y(2),k(3,Ma,2,0,"my-help",21),y(),O(4,"div",22),Y(5),y(),k(6,Na,2,1,"div",23),y()),t&2){let a=n.$implicit;C(2),sn(" ",a.label," "),C(),M("ngIf",a.help),C(2),j(a.value),C(),M("ngIf",a.moreInfo);}}function wa(t,n){if(t&1&&(O(0,"div",25),Y(1),y()),t&2){let a=q().$implicit;C(),j(a.moreInfo);}}function Ra(t,n){if(t&1&&(O(0,"div",19)(1,"div",20),Y(2),y(),O(3,"div",22),Y(4),y(),k(5,wa,2,1,"div",23),y()),t&2){let a=n.$implicit;C(2),j(a.label),C(2),j(a.value),C(),M("ngIf",a.moreInfo);}}function Va(t,n){if(t&1&&Xt(0,"p-chart",34),t&2){let a=q(2).$implicit,r=q();M("height",r.chartHeight)("width",r.chartWidth)("type",r.chartOptions[a.id].type)("options",r.chartOptions[a.id].options)("data",r.chartOptions[a.id].data)("plugins",r.chartPlugins);}}function Fa(t,n){t&1&&(O(0,"span",35),Wt(1,2),y());}function La(t,n){if(t&1){let a=ve();O(0,"my-button",36),Bt("click",function(){St(a);let s=q(3);return Et(s.resetZoom());}),Wt(1,3),y();}}function za(t,n){if(t&1&&(O(0,"div",29),k(1,Va,1,6,"p-chart",30),y(),O(2,"div",31),k(3,Fa,2,0,"span",32)(4,La,2,0,"my-button",33),y()),t&2){let a=q().$implicit,r=q();C(),M("ngIf",r.chartOptions[a.id]),C(2),M("ngIf",!r.hasZoom()&&a.zoomEnabled),C(),M("ngIf",r.hasZoom());}}function Ua(t,n){if(t&1&&(en(0,26),O(1,"a",27)(2,"span"),Y(3),y()(),k(4,za,5,3,"ng-template",28),nn()),t&2){let a=n.$implicit;M("ngbNavItem",a.id),C(3),j(a.label);}}Qt.backgroundColor=getComputedStyle(document.body).getPropertyValue("--mainBackgroundColor");Qt.borderColor=getComputedStyle(document.body).getPropertyValue("--greySecondaryBackgroundColor");Qt.color=getComputedStyle(document.body).getPropertyValue("--mainForegroundColor");var ht=class ht{constructor(n,a,r,s,c,u,m){this.localeId=n;this.route=a;this.notifier=r;this.statsService=s;this.peertubeRouter=c;this.numberFormatter=u;this.liveService=m;b(this,"globalStatsCards",[]);b(this,"overallStatCards",[]);b(this,"chartOptions",{});b(this,"chartHeight","300px");b(this,"chartWidth",null);b(this,"availableCharts",[]);b(this,"activeGraphId","viewers");b(this,"video");b(this,"countries",[]);b(this,"regions",[]);b(this,"chartPlugins",[oi]);b(this,"currentDateFilter","all");b(this,"dateFilters",[{id:"all",label:"\u81EA\u89C6\u9891\u53D1\u5E03\u4EE5\u6765"}]);b(this,"statsStartDate");b(this,"statsEndDate");b(this,"chartIngestData",{});}ngOnInit(){this.video=this.route.snapshot.data.video,this.availableCharts=[{id:"viewers",label:"\u89C2\u4F17\u6570",zoomEnabled:!0},{id:"aggregateWatchTime",label:"\u89C2\u770B\u65F6\u95F4",zoomEnabled:!0},{id:"countries",label:"\u56FD\u5BB6",zoomEnabled:!1},{id:"regions",label:"Regions",zoomEnabled:!1}],this.video.isLive||this.availableCharts.push({id:"retention",label:"\u7559\u5B58\u7387",zoomEnabled:!1});let n=this.route.snapshot.queryParams;(n.startDate||n.endDate)&&this.addAndSelectCustomDateFilter(),this.route.queryParams.subscribe(a=>{this.statsStartDate=a.startDate?new Date(a.startDate):void 0,this.statsEndDate=a.endDate?new Date(a.endDate):void 0,this.loadChart(),this.loadOverallStats();}),this.loadDateFilters();}hasCountries(){return this.countries.length!==0;}hasRegions(){return this.regions.length!==0;}onChartChange(n){this.activeGraphId=n,n==="countries"?this.chartHeight=`${Math.max(this.countries.length*20,300)}px`:n==="regions"?this.chartHeight=`${Math.max(this.regions.length*20,300)}px`:this.chartHeight="300px",this.loadChart();}resetZoom(){this.peertubeRouter.silentNavigate([],{}),this.removeAndResetCustomDateFilter();}hasZoom(){return!!this.statsStartDate&&this.isTimeserieGraph(this.activeGraphId);}getViewersStatsTitle(){return this.statsStartDate&&this.statsEndDate?""+this.toMediumDate(this.statsStartDate)+" \u548C "+this.toMediumDate(this.statsEndDate)+" \u4E4B\u95F4\u7684\u89C2\u4F17\u7EDF\u8BA1\u4FE1\u606F":"\u89C2\u4F17\u7EDF\u8BA1\u4FE1\u606F";}onDateFilterChange(){if(this.currentDateFilter==="all")return this.resetZoom();let n=this.currentDateFilter.split("|");if(n.length===2)return this.peertubeRouter.silentNavigate([],{startDate:n[0],endDate:n[1]});}isTimeserieGraph(n){return n==="aggregateWatchTime"||n==="viewers";}loadOverallStats(){this.statsService.getOverallStats({videoId:this.video.uuid,startDate:this.statsStartDate,endDate:this.statsEndDate}).subscribe({next:n=>{this.countries=n.countries.map(a=>({name:this.countryCodeToName(a.isoCode),viewers:a.viewers})),this.regions=n.subdivisions,this.buildOverallStatCard(n);},error:n=>this.notifier.error(n.message)});}loadDateFilters(){return this.video.isLive?this.loadLiveDateFilters():this.loadVODDateFilters();}loadLiveDateFilters(){this.liveService.listSessions(this.video.id).subscribe({next:({data:n})=>{let a=n.map(r=>this.buildLiveFilter(r));this.dateFilters=this.dateFilters.concat(a);},error:n=>this.notifier.error(n.message)});}loadVODDateFilters(){this.liveService.findLiveSessionFromVOD(this.video.id).subscribe({next:n=>{this.dateFilters=this.dateFilters.concat([this.buildLiveFilter(n)]);},error:n=>{n.status!==Cn.NOT_FOUND_404&&this.notifier.error(n.message);}});}buildLiveFilter(n){return{id:n.startDate+"|"+n.endDate,label:"\u76F4\u64AD\u5230 "+this.toMediumDate(new Date(n.startDate))+""};}addAndSelectCustomDateFilter(){this.dateFilters.some(a=>a.id==="custom")||(this.dateFilters=this.dateFilters.concat([{id:"custom",label:"\u81EA\u5B9A\u4E49\u65E5\u671F"}])),this.currentDateFilter="custom";}removeAndResetCustomDateFilter(){this.dateFilters=this.dateFilters.filter(n=>n.id!=="custom"),this.currentDateFilter="all";}buildOverallStatCard(n){this.globalStatsCards=[{label:"\u89C2\u770B\u6B21\u6570",value:this.numberFormatter.transform(this.video.views),help:"A view means that someone watched the video for several seconds (10 seconds by default)"},{label:"\u559C\u6B22\u6570",value:this.numberFormatter.transform(this.video.likes)}],this.overallStatCards=[{label:"\u5E73\u5747\u89C2\u770B\u65F6\u95F4",value:It({seconds:n.averageWatchTime,format:"locale-string"})},{label:"\u603B\u89C2\u770B\u65F6\u95F4",value:It({seconds:n.totalWatchTime,format:"locale-string"})},{label:"\u5CF0\u503C\u89C2\u4F17\u6570",value:this.numberFormatter.transform(n.viewersPeak),moreInfo:n.viewersPeak!==0?"\u4E8E "+this.toMediumDate(new Date(n.viewersPeakDate))+"":void 0},{label:"\u975E\u91CD\u590D\u89C2\u4F17",value:this.numberFormatter.transform(n.totalViewers)}],n.countries.length!==0&&this.overallStatCards.push({label:"\u56FD\u5BB6",value:this.numberFormatter.transform(n.countries.length)}),n.subdivisions.length!==0&&this.overallStatCards.push({label:"Regions",value:this.numberFormatter.transform(n.subdivisions.length)});}loadChart(){({retention:this.statsService.getRetentionStats(this.video.uuid),aggregateWatchTime:this.statsService.getTimeserieStats({videoId:this.video.uuid,startDate:this.statsStartDate,endDate:this.statsEndDate,metric:"aggregateWatchTime"}),viewers:this.statsService.getTimeserieStats({videoId:this.video.uuid,startDate:this.statsStartDate,endDate:this.statsEndDate,metric:"viewers"}),countries:fe(this.countries),regions:fe(this.regions)})[this.activeGraphId].subscribe({next:a=>{this.chartIngestData[this.activeGraphId]=a,this.chartOptions[this.activeGraphId]=this.buildChartOptions(this.activeGraphId);},error:a=>this.notifier.error(a.message)});}buildChartOptions(n){let a={retention:p=>this.buildRetentionChartOptions(p),aggregateWatchTime:p=>this.buildTimeserieChartOptions(p),viewers:p=>this.buildTimeserieChartOptions(p),countries:p=>this.buildGeoChartOptions(p),regions:p=>this.buildGeoChartOptions(p)},{type:r,data:s,displayLegend:c,plugins:u,options:m}=a[n](this.chartIngestData[n]),f=this;return{type:r,data:s,options:Qe(yt({},m),{responsive:!0,scales:{x:{ticks:{callback:function(p){return f.formatXTick({graphId:n,value:p,data:f.chartIngestData[n],scale:this});}}},y:{beginAtZero:!0,max:this.activeGraphId==="retention"?100:void 0,ticks:{callback:function(p){return f.formatYTick({graphId:n,value:p,scale:this});}}}},plugins:yt({legend:{display:c},tooltip:{callbacks:{title:p=>this.formatTooltipTitle({graphId:n,items:p}),label:p=>this.formatYTick({graphId:n,value:p.raw})}}},u)})};}buildRetentionChartOptions(n){let a=[],r=[];for(let s of n.data)a.push(It(s.second)),r.push(Math.round(s.retentionPercent));return{type:"line",displayLegend:!1,plugins:yt({},this.buildDisabledZoomPlugin()),data:{labels:a,datasets:[{data:r,borderColor:this.buildChartColor()}]}};}buildTimeserieChartOptions(n){let a=[],r=[];for(let s of n.data)a.push(s.date),r.push(s.value);return{type:"line",displayLegend:!1,plugins:{zoom:{zoom:{wheel:{enabled:!1},drag:{enabled:!0},pinch:{enabled:!0},mode:"x",onZoomComplete:({chart:s})=>{let{min:c,max:u}=s.scales.x,m=n.data[c].date,f=u===n.data.length-1?(this.statsEndDate||new Date()).toISOString():n.data[u+1].date;this.peertubeRouter.silentNavigate([],{startDate:m,endDate:f}),this.addAndSelectCustomDateFilter();}},limits:{x:{minRange:2}}}},data:{labels:a,datasets:[{data:r,borderColor:this.buildChartColor()}]}};}buildGeoChartOptions(n){let a=[],r=[];for(let s of n)a.push(s.name),r.push(s.viewers);return{type:"bar",options:{indexAxis:"y"},displayLegend:!0,plugins:yt({},this.buildDisabledZoomPlugin()),data:{labels:a,datasets:[{label:"\u89C2\u4F17\u6570",backgroundColor:this.buildChartColor(),maxBarThickness:20,data:r}]}};}buildChartColor(){return getComputedStyle(document.body).getPropertyValue("--mainColorLighter");}formatXTick(n){let{graphId:a,value:r,data:s,scale:c}=n,u=c.getLabelForValue(r);if(!this.isTimeserieGraph(a))return u;let m=new Date(u);return s.groupInterval.match(/ months?$/)?m.toLocaleDateString([],{year:"2-digit",month:"numeric"}):s.groupInterval.match(/ days?$/)?m.toLocaleDateString([],{month:"numeric",day:"numeric"}):s.groupInterval.match(/ hours?$/)?m.toLocaleTimeString([],{month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"}):m.toLocaleTimeString([],{hour:"numeric",minute:"numeric"});}formatYTick(n){let{graphId:a,value:r,scale:s}=n;return a==="retention"?r+" %":a==="aggregateWatchTime"?It(+r):(a==="countries"||a==="regions")&&s?s.getLabelForValue(r):r.toLocaleString(this.localeId);}formatTooltipTitle(n){let{graphId:a,items:r}=n,s=r[0];return this.isTimeserieGraph(a)?this.toMediumDate(new Date(s.label)):s.label;}countryCodeToName(n){let a=Intl;return a.DisplayNames?new a.DisplayNames([],{type:"region"}).of(n):n;}buildDisabledZoomPlugin(){return{zoom:{zoom:{wheel:{enabled:!1},drag:{enabled:!1},pinch:{enabled:!1}}}};}toMediumDate(n){return new Date(n).toLocaleString(this.localeId,{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"});}};b(ht,"\u0275fac",function(a){return new(a||ht)(Q(hn),Q(vn),Q(Nn),Q(mt),Q(Dn),Q(jt),Q(qt));}),b(ht,"\u0275cmp",tn({type:ht,selectors:[["ng-component"]],standalone:!0,features:[dn([jt]),mn],decls:20,vars:10,consts:()=>{let n;n=""+"\uFFFD0\uFFFD"+"";let a;a="\u4F60\u53EF\u4EE5\u9009\u62E9\u56FE\u8868\u4E2D\u7684\u90E8\u5206\u653E\u5927";let r;return r="\u91CD\u7F6E\u7F29\u653E",[["nav","ngbNav"],n,a,r,[1,"margin-content"],[1,"title-page"],[1,"stats-embed"],[1,"global-stats"],["class","card stats-card",4,"ngFor","ngForOf"],[3,"video"],[1,"stats-with-date"],[1,"overall-stats"],[1,"date-filter-wrapper"],[3,"ngModelChange","ngModel","items"],[1,"cards"],[1,"timeserie"],["ngbNav","",1,"nav-tabs",3,"activeIdChange","activeId"],[3,"ngbNavItem",4,"ngFor","ngForOf"],[3,"ngbNavOutlet"],[1,"card","stats-card"],[1,"label"],[4,"ngIf"],[1,"value"],["class","more-info",4,"ngIf"],["ptTemplate","customHtml"],[1,"more-info"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[1,"chart-container"],[3,"height","width","type","options","data","plugins",4,"ngIf"],[1,"zoom-container"],["class","description",4,"ngIf"],[3,"click",4,"ngIf"],[3,"height","width","type","options","data","plugins"],[1,"description"],[3,"click"]];},template:function(a,r){if(a&1){let s=ve();O(0,"div",4)(1,"h1",5),Wt(2,1),y(),O(3,"div",6)(4,"div",7),k(5,Aa,7,4,"div",8),y(),Xt(6,"my-embed",9),y(),O(7,"div",10)(8,"div",11)(9,"div",12)(10,"h2"),Y(11),y(),O(12,"my-select-options",13),un("ngModelChange",function(u){return St(s),cn(r.currentDateFilter,u)||(r.currentDateFilter=u),Et(u);}),Bt("ngModelChange",function(){return St(s),Et(r.onDateFilterChange());}),y()(),O(13,"div",14),k(14,Ra,6,3,"div",8),y()(),O(15,"div",15)(16,"div",16,0),Bt("activeIdChange",function(u){return St(s),Et(r.onChartChange(u));}),k(18,Ua,5,2,"ng-container",17),y(),Xt(19,"div",18),y()()();}if(a&2){let s=rn(17);C(2),an(r.video.name),on(2),C(3),M("ngForOf",r.globalStatsCards),C(),M("video",r.video),C(5),j(r.getViewersStatsTitle()),C(),ln("ngModel",r.currentDateFilter),M("items",r.dateFilters),C(2),M("ngForOf",r.overallStatCards),C(2),M("activeId",r.activeGraphId),C(2),M("ngForOf",r.availableCharts),C(),M("ngbNavOutlet",s);}},dependencies:[pn,fn,Rn,wn,Fn,Vn,bn,_n,Tn,En,Sn,On,In,yn,Un,zn,Ln,Pn],styles:[".stats-embed[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.overall-stats[_ngcontent-%COMP%], .global-stats[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.overall-stats[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .global-stats[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px;width:100%}.overall-stats[_ngcontent-%COMP%]{justify-content:space-between}.overall-stats[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.overall-stats[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]{margin-bottom:10px;min-width:300px}.stats-card[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:fit-content;min-height:100px;min-width:200px;background-color:var(--submenuBackgroundColor);margin-bottom:15px;margin-inline-end:.9375rem}.stats-card[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .stats-card[_ngcontent-%COMP%]   .more-info[_ngcontent-%COMP%]{font-size:14px}.stats-card[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:24px;font-weight:600}@media screen and (max-width: 500px){.stats-card[_ngcontent-%COMP%]{min-height:fit-content;min-width:fit-content;padding:15px}}my-embed[_ngcontent-%COMP%]{display:block;max-width:500px;width:100%}.stats-with-date[_ngcontent-%COMP%]{margin-top:30px;padding-top:30px;border-top:1px solid rgba(0,0,0,.1)}@media screen and (max-width: 1040px){.main-col:not(.expanded)[_nghost-%COMP%]   my-embed[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   my-embed[_ngcontent-%COMP%]{display:none}}@media screen and (max-width: 800px){.main-col.expanded[_nghost-%COMP%]   my-embed[_ngcontent-%COMP%], .main-col.expanded   [_nghost-%COMP%]   my-embed[_ngcontent-%COMP%]{display:none}}.tab-content[_ngcontent-%COMP%]{margin-top:5px}.nav-tabs[_ngcontent-%COMP%]{border-bottom:2px solid #EAEAEA;margin:20px 0 0!important}.nav-tabs.hide-nav[_ngcontent-%COMP%]{display:none!important}.nav-tabs[_ngcontent-%COMP%]   a.nav-link[_ngcontent-%COMP%]{margin-bottom:-2px;height:40px!important;padding:0 30px!important;border:2px solid transparent}.nav-tabs[_ngcontent-%COMP%]   a.nav-link[_ngcontent-%COMP%]:hover, .nav-tabs[_ngcontent-%COMP%]   a.nav-link[_ngcontent-%COMP%]:focus, .nav-tabs[_ngcontent-%COMP%]   a.nav-link[_ngcontent-%COMP%]:active{text-decoration:none!important}.nav-tabs[_ngcontent-%COMP%]   a.nav-link[_ngcontent-%COMP%]:focus:not(:focus-visible){outline:none!important}.nav-tabs[_ngcontent-%COMP%]   a.nav-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border-bottom:2px solid transparent}.nav-tabs[_ngcontent-%COMP%]   a.nav-link.active[_ngcontent-%COMP%]{border-color:#eaeaea;border-bottom-color:transparent}.nav-tabs[_ngcontent-%COMP%]   a.nav-link.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border-bottom-color:var(--mainColor)}.nav-tabs[_ngcontent-%COMP%]   a.nav-link[_ngcontent-%COMP%]:hover:not(.active){border-color:transparent}.chart-container[_ngcontent-%COMP%]{margin-bottom:10px}.zoom-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.zoom-container[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-style:italic}"]}));var ee=ht;var el=[{path:"videos/:videoId",canActivate:[Mn],component:ee,data:{meta:{title:"\u89C6\u9891\u7EDF\u8BA1"}},providers:[qt,mt,Te],resolve:{video:Te}}];export{el as default};/**i18n:2f710d33ac9c4f1483429afcadbb48fcf333aac524700807e70179670fe63b48*/