import{a as Io}from"./chunk-VHK64JUH.js";import{b as fo,c as Eo,d as Po}from"./chunk-WLZVZYNX.js";import{a as So}from"./chunk-KXFPPJ76.js";import{a as Jn}from"./chunk-X5HB26GE.js";import{a as To,b as mo,c as uo,d as po,e as Mo,f as Oo,g as Ao,h as Fe}from"./chunk-HSMLP335.js";import"./chunk-XGXRY5NY.js";import{c as Co}from"./chunk-IA75VPMY.js";import{a as go}from"./chunk-OOKZXLTV.js";import{a as co}from"./chunk-RY6C3VVE.js";import{a as yo}from"./chunk-DBRTOSQ5.js";import{a as Ro,b as vo}from"./chunk-4G4LA24F.js";import{a as yt,h as Ut,i as bt,j as Yt,p as $t,q as No}from"./chunk-VPUMNBNK.js";import"./chunk-XIGDB2RN.js";import{e as ro,f as _o,g as lo}from"./chunk-FDM4WNGU.js";import"./chunk-24QQSIIJ.js";import"./chunk-FCT3LKDI.js";import{a as vt}from"./chunk-K67EGD4G.js";import{a as ht}from"./chunk-LQ3CTFST.js";import"./chunk-SPKU4WOP.js";import{a as so}from"./chunk-JPIRBOZL.js";import"./chunk-EBTUWTIZ.js";import{a as qn,b as Qn}from"./chunk-FNNJJWLI.js";import"./chunk-3VYEMMNL.js";import{a as Zn}from"./chunk-FAZZDQFH.js";import"./chunk-XLVZGSUB.js";import{a as jn}from"./chunk-IFUKAL2P.js";import"./chunk-FOKVUJB6.js";import"./chunk-LUFSC2DY.js";import"./chunk-CNM6TRJ3.js";import"./chunk-X6JWC5WV.js";import{c as ao}from"./chunk-GP5LX4CA.js";import{a as Le}from"./chunk-4V7EB4W6.js";import"./chunk-KG4UYECH.js";import{b as Oe}from"./chunk-NO6VG5DO.js";import"./chunk-UDQ7P63C.js";import"./chunk-6C7DPHTS.js";import"./chunk-7HXKHM3O.js";import"./chunk-4XL6BJ7M.js";import{a as Kn}from"./chunk-GOWSOB6U.js";import"./chunk-RBCGTDIC.js";import"./chunk-DPQ4XGHN.js";import{B as $e,r as xn}from"./chunk-XEFO2OX5.js";import{a as w}from"./chunk-WRZZAQTV.js";import{d as eo,f as It,g as to,h as Rt,j as no,n as oo,o as io}from"./chunk-5CNYD3QV.js";import{b as oe,c as Ne}from"./chunk-RZGVOE4L.js";import{A as ne,c as gt,f as G,g as Z,k as pe,l as J,o as ee,r as te,s as Un,t as bn,u as Yn,z as X}from"./chunk-AHXSH3AS.js";import{$ as Ae,$a as Pn,$d as Ln,Ab as Y,B as _e,Bb as K,C as Nn,Ca as a,D as gn,Da as m,Eb as le,Ec as vn,Fb as ce,Gb as Ce,Ib as S,Jb as In,Kb as Se,Kc as Ot,La as H,Ne as St,Oa as p,Oe as ft,Of as we,Pf as Dn,Qf as ie,R as An,Sa as c,Sb as q,T as Sn,Tb as rn,Ub as Te,Ue as Ee,Vf as zn,Wb as Rn,Wf as Bn,Xf as Vn,Y as ut,Ya as me,Za as fn,Ze as Gn,_a as En,_c as yn,ab as r,ad as hn,ae as an,ba as A,bb as i,bd as Nt,cb as d,db as O,eb as N,fg as $,gb as h,gg as Pt,hg as F,i as pn,ib as z,j as mt,jb as B,kb as l,kd as At,la as f,lb as ae,ld as _n,lg as Wn,m as Mn,ma as E,mb as se,md as $n,nd as de,oa as pt,ob as M,pb as T,pc as Ye,qc as Mt,qe as Fn,r as ve,rc as b,rd as wn,rg as Hn,tf as Et,uf as Xn,ug as V,vb as he,vd as fe,vf as kn,wb as Ue,x as On,xb as be,xd as Me,yc as ue,za as ye,zb as I}from"./chunk-4A7FW7VV.js";import"./chunk-BERSDMCF.js";import"./chunk-ONF7AOBQ.js";import{j as s,k as Re}from"./chunk-K6ICEIKK.js";var xe=class xe{};s(xe,"\u0275fac",function(e){return new(e||xe)();}),s(xe,"\u0275cmp",A({type:xe,selectors:[["my-account-abuses-list"]],standalone:!0,features:[S],decls:5,vars:0,consts:()=>{let t;return t="\u56DE\u5831",[t,["iconName","flag","aria-hidden","true"],["viewType","user"]];},template:function(e,n){e&1&&(r(0,"h1"),d(1,"my-global-icon",1),O(2),l(3,0),N(),i(),d(4,"my-abuse-list-table",2));},dependencies:[w,To],encapsulation:2}));var wt=xe;var Ge=class Ge{constructor(t,e,n,o,C){this.authService=t;this.scopedTokensService=e;this.videoService=n;this.notifier=o;this.confirmService=C;s(this,"feedUrl");s(this,"feedToken");s(this,"baseURL",Ee.originServerUrl||window.location.origin);}ngOnInit(){this.feedUrl=this.baseURL,this.scopedTokensService.getScopedTokens().subscribe({next:t=>this.regenApplications(t),error:t=>this.notifier.error(t.message)});}renewToken(){return Re(this,null,function*(){(yield this.confirmService.confirm("\u66F4\u65B0\u6B0A\u6756\u5C07\u7981\u6B62\u5148\u524D\u8A2D\u5B9A\u597D\u7684\u5BA2\u6236\u7AEF\u641C\u5C0B feed\uFF0C\u9664\u975E\u5B83\u5011\u4F7F\u7528\u65B0\u7684\u6B0A\u6756\u3002\u8981\u7E7C\u7E8C\u55CE\uFF1F","\u66F4\u65B0\u6B0A\u6756"))!==!1&&this.scopedTokensService.renewScopedTokens().subscribe({next:e=>{this.regenApplications(e),this.notifier.success("\u6B0A\u6756\u5DF2\u66F4\u65B0\u3002\u8ACB\u66F4\u65B0\u60A8\u7684\u5BA2\u6236\u7AEF\u5C0D\u61C9\u7684\u8A2D\u5B9A\u3002");},error:e=>this.notifier.error(e.message)});});}regenApplications(t){let e=this.authService.getUser(),n=this.videoService.getVideoSubscriptionFeedUrls(e.account.id,t.feedToken);this.feedUrl=this.baseURL+n.find(o=>o.format===$n.RSS).url,this.feedToken=t.feedToken;}};s(Ge,"\u0275fac",function(e){return new(e||Ge)(m(F),m(Wn),m(ao),m($),m(we));}),s(Ge,"\u0275cmp",A({type:Ge,selectors:[["my-account-applications"]],standalone:!0,features:[S],decls:22,vars:8,consts:()=>{let t;t="\u66F4\u65B0\u6B0A\u6756";let e;e="\u61C9\u7528\u7A0B\u5F0F";let n;n="\u8A02\u95B1 feed";let o;o="\u4F7F\u7528\u7B2C\u4E09\u65B9 feed \u805A\u5408\u5668\u4F86\u64F7\u53D6\u60A8\u8A02\u95B1\u983B\u9053\u7684\u5F71\u7247\u6E05\u55AE\u3002";let C;C="\u994B\u9001 URL";let u;u="Feed \u6B0A\u6756";let g;return g="\u26A0\uFE0F \u6C38\u9060\u4E0D\u8981\u5C07\u60A8\u7684 feed \u6B0A\u6756\u8207\u4EFB\u4F55\u4EBA\u5206\u4EAB\u3002",[e,n,o,C,u,g,["iconName","codesandbox","aria-hidden","true"],[1,"pt-two-cols"],[1,"title-col"],[1,"applications-description"],[1,"content-col"],[1,"form-group"],["for","feed-url"],[3,"value","withToggle","withCopy","show","readonly"],["for","feed-token"],[3,"value","withCopy","readonly"],[1,"form-group-description"],["type","submit","value",t,1,"peertube-button","orange-button","mt-4",3,"click"]];},template:function(e,n){e&1&&(r(0,"h1"),d(1,"my-global-icon",6),O(2),l(3,0),N(),i(),r(4,"div",7)(5,"div",8)(6,"h2"),l(7,1),i(),r(8,"div",9),l(9,2),i()(),r(10,"div",10)(11,"div",11)(12,"label",12),l(13,3),i(),d(14,"my-input-text",13),i(),r(15,"div",11)(16,"label",14),l(17,4),i(),d(18,"my-input-text",15),r(19,"div",16),l(20,5),i()(),r(21,"input",17),M("click",function(){return n.renewToken();}),i()()()),e&2&&(a(14),c("value",n.feedUrl)("withToggle",!1)("withCopy",!0)("show",!0)("readonly",!0),a(4),c("value",n.feedToken)("withCopy",!0)("readonly",!0));},dependencies:[w,Oe],styles:[".pt-two-cols[_ngcontent-%COMP%]   .content-col[_ngcontent-%COMP%]{max-width:500px}"]}));var Lt=Ge;var Q=class Q{constructor(t,e){this.authHttp=t;this.restExtractor=e;}listAvailable(t){let e=Q.BASE_AUTOMATIC_TAGS_URL+"accounts/"+t.accountName+"/available";return this.authHttp.get(e).pipe(_e(n=>this.restExtractor.handleError(n)));}getCommentPolicies(t){let e=Q.BASE_AUTOMATIC_TAGS_URL+"policies/accounts/"+t.accountName+"/comments";return this.authHttp.get(e).pipe(_e(n=>this.restExtractor.handleError(n)));}updateCommentPolicies(t){let e=Q.BASE_AUTOMATIC_TAGS_URL+"policies/accounts/"+t.accountName+"/comments";return this.authHttp.put(e,{review:t.review}).pipe(_e(n=>this.restExtractor.handleError(n)));}};s(Q,"BASE_AUTOMATIC_TAGS_URL",Ee.apiUrl+"/api/v1/automatic-tags/"),s(Q,"\u0275fac",function(e){return new(e||Q)(Ae(Ot),Ae(Pt));}),s(Q,"\u0275prov",ut({token:Q,factory:Q.Éµfac,providedIn:"root"}));var Ft=Q;function $o(_,t){if(_&1){let e=h();r(0,"div",4)(1,"my-peertube-checkbox",5),Ce("ngModelChange",function(o){let C=f(e).$implicit;return ce(C.review,o)||(C.review=o),E(o);}),M("ngModelChange",function(){f(e);let o=T();return E(o.updatePolicies());}),i()();}if(_&2){let e=t.$implicit,n=t.$index,o=T();a(),c("inputName","tag-"+n),le("ngModel",e.review),c("labelText",o.getLabelText(e));}}var Xe=class Xe{constructor(t,e,n){this.authService=t;this.autoTagsService=e;this.notifier=n;s(this,"tags",[]);}ngOnInit(){this.loadAvailableTags();}getLabelText(t){return t.name==="external-link"?"\u5305\u542B\u5916\u90E8\u9023\u7D50":"\u5305\u542B\u300C"+t.name+"\u300D\u76E3\u8996\u6587\u5B57\u6E05\u55AE\u4E2D\u7684\u4EFB\u4F55\u55AE\u5B57";}updatePolicies(){let t=this.authService.getUser().account.name;this.autoTagsService.updateCommentPolicies({accountName:t,review:this.tags.filter(e=>e.review).map(e=>e.name)}).subscribe({next:()=>{this.notifier.success("\u7559\u8A00\u653F\u7B56\u5DF2\u66F4\u65B0");},error:e=>this.notifier.error(e.message)});}loadAvailableTags(){let t=this.authService.getUser().account.name;ve([this.autoTagsService.listAvailable({accountName:t}),this.autoTagsService.getCommentPolicies({accountName:t})]).subscribe(([e,n])=>{this.tags=e.available.map(o=>({name:o.name,type:o.type,review:n.review.includes(o.name)}));});}};s(Xe,"\u0275fac",function(e){return new(e||Xe)(m(F),m(Ft),m($));}),s(Xe,"\u0275cmp",A({type:Xe,selectors:[["ng-component"]],standalone:!0,features:[S],decls:8,vars:0,consts:()=>{let t;t="\u60A8\u7684\u81EA\u52D5\u6A19\u7C64\u653F\u7B56";let e;return e="\u81EA\u52D5\u5C01\u9396\u7559\u8A00\uFF1A",[t,e,["iconName","no","aria-hidden","true"],[1,"d-block","mb-3"],[1,"form-group","ms-3"],[3,"ngModelChange","inputName","ngModel","labelText"]];},template:function(e,n){e&1&&(r(0,"h1"),d(1,"my-global-icon",2),O(2),l(3,0),N(),i(),r(4,"strong",3),l(5,1),i(),En(6,$o,2,3,"div",4,fn)),e&2&&(a(6),Pn(n.tags));},dependencies:[w,X,G,pe,Le],encapsulation:2}));var xt=Xe;function xo(_,t){if(_&1){let e=h();r(0,"div",13)(1,"div",14)(2,"my-advanced-input-filter",15),M("search",function(o){f(e);let C=T();return E(C.onSearch(o));}),i()()();}}function Go(_,t){if(_&1&&(r(0,"tr")(1,"th",16),l(2,1),i(),r(3,"th",17),l(4,2),i(),r(5,"th",18),z(6,3),d(7,"p-sortIcon",19),B(),i()()),_&2){let e=T();a(5),c("ngbTooltip",e.sortTooltip);}}function Xo(_,t){if(_&1){let e=h();r(0,"tr")(1,"td",20)(2,"button",21),M("click",function(){let o=f(e).$implicit,C=T();return E(C.unblockAccount(o));}),l(3,4),i()(),r(4,"td")(5,"a",22)(6,"div",23),d(7,"my-actor-avatar",24),r(8,"div"),I(9),r(10,"span",25),I(11),i()()()()(),r(12,"td"),I(13),q(14,"date"),i()();}if(_&2){let e=t.$implicit;a(5),c("href",e.blockedAccount.url,ye),a(2),c("actor",e.blockedAccount),a(2),K(" ",e.blockedAccount.displayName," "),a(2),Y(e.blockedAccount.nameWithHost),a(2),Y(Te(14,5,e.createdAt,"short"));}}function ko(_,t){_&1&&(O(0),l(1,5),N());}function Do(_,t){_&1&&(O(0),l(1,6),N());}function zo(_,t){if(_&1&&(r(0,"tr")(1,"td",26)(2,"div",27),p(3,ko,2,0,"ng-container",28)(4,Do,2,0,"ng-container",28),i()()()),_&2){let e=T();a(3),c("ngIf",e.search),a(),c("ngIf",!e.search);}}var Pe=class Pe extends mo{constructor(){super(...arguments);s(this,"mode",0);}getIdentifier(){return"MyAccountBlocklistComponent";}};s(Pe,"\u0275fac",(()=>{let e;return function(o){return(e||(e=pt(Pe)))(o||Pe);};})()),s(Pe,"\u0275cmp",A({type:Pe,selectors:[["my-account-blocklist"]],standalone:!0,features:[H,S],decls:9,vars:11,consts:()=>{let e;e="\u5DF2\u975C\u97F3\u7684\u5E33\u865F";let n;n="\u52D5\u4F5C";let o;o="\u5E33\u865F";let C;C="\u975C\u97F3\u65BC "+"\uFFFD#7\uFFFD"+""+"\uFFFD/#7\uFFFD"+"";let u;u="\u5728\u65B0\u5206\u9801\u4E2D\u958B\u555F\u5E33\u865F";let g;g="\u89E3\u9664\u975C\u97F3";let P;P="\u6C92\u6709\u5E33\u865F\u7B26\u5408\u76EE\u524D\u7684\u904E\u6FFE\u5668\u3002";let k;return k="\u627E\u4E0D\u5230\u5E33\u865F\u3002",[e,n,o,C,g,P,k,["iconName","user-x","aria-hidden","true"],[3,"onLazyLoad","value","lazy","paginator","totalRecords","rows","rowsPerPageOptions","first","sortField","sortOrder","showCurrentPageReport","currentPageReportTemplate"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"caption"],[1,"ms-auto"],[3,"search"],["scope","col",2,"width","150px"],["scope","col"],["scope","col","container","body","pSortableColumn","createdAt",2,"width","150px",3,"ngbTooltip"],["field","createdAt"],[1,"action-cell"],[1,"peertube-button","grey-button",3,"click"],["title",u,"target","_blank","rel","noopener noreferrer",3,"href"],[1,"chip","two-lines"],["actorType","account","size","32",3,"actor"],[1,"muted"],["myAutoColspan",""],[1,"no-results"],[4,"ngIf"]];},template:function(n,o){n&1&&(r(0,"h1"),d(1,"my-global-icon",7),O(2),l(3,0),N(),i(),r(4,"p-table",8),M("onLazyLoad",function(u){return o.loadLazy(u);}),p(5,xo,3,0,"ng-template",9)(6,Go,8,1,"ng-template",10)(7,Xo,15,8,"ng-template",11)(8,zo,5,2,"ng-template",12),i()),n&2&&(a(4),c("value",o.blockedAccounts)("lazy",!0)("paginator",o.totalRecords>0)("totalRecords",o.totalRecords)("rows",o.rowsPerPage)("rowsPerPageOptions",o.rowsPerPageOptions)("first",o.pagination.start)("sortField",o.sort.field)("sortOrder",o.sort.order)("showCurrentPageReport",!0)("currentPageReportTemplate",o.getPaginationTemplate()));},dependencies:[w,$t,Ut,St,bt,Yt,ft,ht,$e,Kn,yt,b,ue],encapsulation:2}));var Gt=Pe;function Bo(_,t){if(_&1){let e=h();r(0,"div",16)(1,"div",17)(2,"button",18),M("click",function(){f(e);let o=T();return E(o.addServersToBlock());})("key.enter",function(){f(e);let o=T();return E(o.addServersToBlock());}),d(3,"my-global-icon",19),O(4),l(5,2),N(),i()(),r(6,"div",20)(7,"my-advanced-input-filter",21),M("search",function(o){f(e);let C=T();return E(C.onSearch(o));}),i()()();}}function Vo(_,t){if(_&1&&(r(0,"tr")(1,"th",22),l(2,3),i(),r(3,"th",23),l(4,4),i(),r(5,"th",24),z(6,5),d(7,"p-sortIcon",25),B(),i()()),_&2){let e=T();a(5),c("ngbTooltip",e.sortTooltip);}}function Wo(_,t){if(_&1){let e=h();r(0,"tr")(1,"td",26)(2,"button",27),M("click",function(){let o=f(e).$implicit,C=T();return E(C.unblockServer(o));}),l(3,6),i()(),r(4,"td")(5,"a",28),I(6),d(7,"my-global-icon",29),i()(),r(8,"td"),I(9),q(10,"date"),i()();}if(_&2){let e=t.$implicit;a(5),c("href","https://"+e.blockedServer.host,ye),a(),K(" ",e.blockedServer.host," "),a(3),Y(Te(10,3,e.createdAt,"short"));}}function Ho(_,t){_&1&&(O(0),l(1,7),N());}function Ko(_,t){_&1&&(O(0),l(1,8),N());}function jo(_,t){if(_&1&&(r(0,"tr")(1,"td",30)(2,"div",31),p(3,Ho,2,0,"ng-container",32)(4,Ko,2,0,"ng-container",32),i()()()),_&2){let e=T();a(3),c("ngIf",e.search),a(),c("ngIf",!e.search);}}var Ie=class Ie extends po{constructor(){super(...arguments);s(this,"mode",0);}getIdentifier(){return"MyAccountServerBlocklistComponent";}};s(Ie,"\u0275fac",(()=>{let e;return function(o){return(e||(e=pt(Ie)))(o||Ie);};})()),s(Ie,"\u0275cmp",A({type:Ie,selectors:[["my-account-server-blocklist"]],standalone:!0,features:[H,S],decls:11,vars:12,consts:()=>{let e;e="\u975C\u97F3\u7DB2\u57DF";let n;n="\u5DF2\u975C\u97F3\u4F3A\u670D\u5668";let o;o="\u975C\u97F3\u7DB2\u57DF";let C;C="\u52D5\u4F5C";let u;u="\u7AD9\u81FA";let g;g="\u975C\u97F3\u65BC "+"\uFFFD#7\uFFFD"+""+"\uFFFD/#7\uFFFD"+"";let P;P="\u5728\u65B0\u5206\u9801\u4E2D\u958B\u555F\u7AD9\u81FA";let k;k="\u89E3\u9664\u975C\u97F3";let v;v="\u627E\u4E0D\u5230\u7B26\u5408\u76EE\u524D\u904E\u6FFE\u5668\u7684\u4F3A\u670D\u5668\u3002";let j;return j="\u627E\u4E0D\u5230\u4F3A\u670D\u5668\u3002",[["batchDomainsModal",""],n,o,C,u,g,k,v,j,["iconName","peertube-x","aria-hidden","true"],[3,"onLazyLoad","value","paginator","totalRecords","rows","rowsPerPageOptions","first","sortField","sortOrder","lazy","lazyLoadOnInit","showCurrentPageReport","currentPageReportTemplate"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["action",e,3,"domains"],[1,"caption"],[1,"left-buttons"],[1,"peertube-create-button",3,"click","key.enter"],["iconName","add","aria-hidden","true"],[1,"ms-auto"],[3,"search"],["scope","col",2,"width","150px"],["scope","col"],["scope","col","container","body","pSortableColumn","createdAt",2,"width","150px",3,"ngbTooltip"],["field","createdAt"],[1,"action-cell"],[1,"peertube-button","grey-button",3,"click"],["title",P,"target","_blank","rel","noopener noreferrer",3,"href"],["iconName","external-link"],["myAutoColspan",""],[1,"no-results"],[4,"ngIf"]];},template:function(n,o){if(n&1){let C=h();r(0,"h1"),d(1,"my-global-icon",9),O(2),l(3,1),N(),i(),r(4,"p-table",10),M("onLazyLoad",function(g){return f(C),E(o.loadLazy(g));}),p(5,Bo,8,0,"ng-template",11)(6,Vo,8,1,"ng-template",12)(7,Wo,11,6,"ng-template",13)(8,jo,5,2,"ng-template",14),i(),r(9,"my-batch-domains-modal",15,0),M("domains",function(g){return f(C),E(o.onDomainsToBlock(g));}),i();}n&2&&(a(4),c("value",o.blockedServers)("paginator",o.totalRecords>0)("totalRecords",o.totalRecords)("rows",o.rowsPerPage)("rowsPerPageOptions",o.rowsPerPageOptions)("first",o.pagination.start)("sortField",o.sort.field)("sortOrder",o.sort.order)("lazy",!0)("lazyLoadOnInit",!1)("showCurrentPageReport",!0)("currentPageReportTemplate",o.getPaginationTemplate()));},dependencies:[w,$t,Ut,St,bt,Yt,ft,ht,$e,yt,b,uo,ue],styles:[".moderation-expanded[_ngcontent-%COMP%]{font-size:90%;display:flex;flex-wrap:wrap;justify-content:space-between}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-label[_ngcontent-%COMP%]{font-weight:600;display:inline-block;vertical-align:top;text-align:end;min-width:100px;margin-inline-end:.3125rem}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]{display:inline-flex;word-wrap:break-word}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]     p:last-child{margin-bottom:0!important}.moderation-expanded[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:50%;max-width:500px}@media screen and (max-width: 960px){.moderation-expanded[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:100%}}my-action-dropdown.show[_ngcontent-%COMP%]     .dropdown-root{display:block!important}.table-comment-link[_ngcontent-%COMP%], .table-account-link[_ngcontent-%COMP%]{color:var(--mainForegroundColor)}.table-comment-link[_ngcontent-%COMP%]:focus:not(:focus-visible), .table-account-link[_ngcontent-%COMP%]:focus:not(:focus-visible){outline:none!important}.table-comment-link[_ngcontent-%COMP%]     p:last-child, .table-account-link[_ngcontent-%COMP%]     p:last-child{margin:0}.table-account-link[_ngcontent-%COMP%]{display:flex;flex-direction:column}my-abuse-details[_ngcontent-%COMP%]{width:100%}@media screen and (max-width: 960px){.abuse-messages[_ngcontent-%COMP%]{justify-content:flex-start!important}}","a[_ngcontent-%COMP%]{display:inline-block}a[_ngcontent-%COMP%]:hover, a[_ngcontent-%COMP%]:focus, a[_ngcontent-%COMP%]:active{text-decoration:none!important}a[_ngcontent-%COMP%]:focus:not(:focus-visible){outline:none!important}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover{color:var(--mainForegroundColor)}a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:80%;color:var(--inputPlaceholderColor)}"]}));var Xt=Ie;var ke=class ke{};s(ke,"\u0275fac",function(e){return new(e||ke)();}),s(ke,"\u0275cmp",A({type:ke,selectors:[["ng-component"]],standalone:!0,features:[S],decls:5,vars:0,consts:()=>{let t;return t="\u5C0D\u60A8\u5F71\u7247\u7684\u7559\u8A00",[t,["iconName","message-circle","aria-hidden","true"],["mode","user"]];},template:function(e,n){e&1&&(r(0,"h1"),d(1,"my-global-icon",1),O(2),l(3,0),N(),i(),d(4,"my-video-comment-list-admin-owner",2));},dependencies:[w,Ao],encapsulation:2}));var kt=ke;var W=class W{constructor(t,e,n){this.authHttp=t;this.restExtractor=e;this.server=n;}listUserExports(t){let{userId:e}=t,n=W.BASE_USER_EXPORTS_URL+e+"/exports";return this.authHttp.get(n).pipe(_e(o=>this.restExtractor.handleError(o)));}requestNewUserExport(t){let{userId:e,withVideoFiles:n}=t,o=W.BASE_USER_EXPORTS_URL+e+"/exports/request";return this.authHttp.post(o,{withVideoFiles:n}).pipe(_e(C=>this.restExtractor.handleError(C)));}deleteUserExport(t){let{userId:e,userExportId:n}=t,o=W.BASE_USER_EXPORTS_URL+e+"/exports/"+n;return this.authHttp.delete(o).pipe(_e(C=>this.restExtractor.handleError(C)));}getLatestImport(t){let{userId:e}=t,n=W.BASE_USER_IMPORTS_URL+e+"/imports/latest";return ve([this.authHttp.get(n),this.server.getServerLocale()]).pipe(Mn(([o,C])=>(o.state.label=Fn(o.state.label,C),o)),_e(o=>o.status===de.NOT_FOUND_404?mt(void 0):this.restExtractor.handleError(o)));}};s(W,"BASE_USER_EXPORTS_URL",Ee.apiUrl+"/api/v1/users/"),s(W,"BASE_USER_IMPORTS_URL",Ee.apiUrl+"/api/v1/users/"),s(W,"\u0275fac",function(e){return new(e||W)(Ae(Ot),Ae(Pt),Ae(ie));}),s(W,"\u0275prov",ut({token:W,factory:W.Éµfac}));var re=W;function qo(_,t){_&1&&(r(0,"p"),l(1,16),i());}function Qo(_,t){if(_&1&&(r(0,"div",27)(1,"div")(2,"strong"),I(3,"Latest import on:"),i(),I(4),q(5,"date"),i(),r(6,"div")(7,"strong"),I(8,"Latest import state:"),i(),I(9),i()()),_&2){let e=T(2);a(4),K(" ",Te(5,2,e.latestImport.createdAt,"medium")," "),a(5),K(" ",e.latestImport.state.label," ");}}function Zo(_,t){_&1&&(r(0,"div",26),l(1,17),i());}function Jo(_,t){_&1&&(r(0,"div",26),l(1,19),i());}function ei(_,t){if(_&1){let e=h();r(0,"my-upload-progress",28),M("cancel",function(){f(e);let o=T(2);return E(o.cancelUpload());})("retry",function(){f(e);let o=T(2);return E(o.retryUpload());}),i(),p(1,Jo,2,0,"div",29),r(2,"div",30)(3,"span"),l(4,18),i(),r(5,"input",31),M("change",function(o){f(e);let C=T(2);return E(C.onFileChange(o));}),i()();}if(_&2){let e=T(2);c("isUploading",e.uploadingArchive)("uploadPercents",e.uploadPercents)("error",e.error)("uploaded",e.archiveUploadFinished)("enableRetryAfterError",e.enableRetryAfterError),a(),c("ngIf",e.archiveUploadFinished&&!e.error),a(),c("hidden",e.uploadingArchive||e.archiveUploadFinished);}}function ti(_,t){if(_&1&&(r(0,"p"),l(1,1),i(),r(2,"p"),z(3,2),d(4,"strong"),B(),i(),r(5,"p"),l(6,3),i(),r(7,"ul")(8,"li"),l(9,4),i(),r(10,"li"),l(11,5),i(),r(12,"li"),l(13,6),i(),r(14,"li"),l(15,7),i(),r(16,"li"),l(17,8),i(),r(18,"li"),l(19,9),i(),r(20,"li"),l(21,10),i(),r(22,"li"),l(23,11),i(),r(24,"li"),z(25,12),d(26,"strong"),B(),i()(),r(27,"p"),l(28,13),i(),r(29,"ul")(30,"li"),l(31,14),i(),r(32,"li"),l(33,15),i()(),p(34,qo,2,0,"p",24)(35,Qo,10,5,"div",25)(36,Zo,2,0,"div",26)(37,ei,6,7)),_&2){let e=T();a(34),c("ngIf",e.isEmailEnabled()),a(),c("ngIf",e.latestImport),a(),me(e.hasPendingImport()?36:37);}}function ni(_,t){_&1&&(r(0,"p"),l(1,20),i());}var De=class De{constructor(t,e,n,o,C){this.authService=t;this.server=e;this.userImportExportService=n;this.resumableUploadService=o;this.notifier=C;s(this,"videoQuotaUsed");s(this,"uploadingArchive",!1);s(this,"archiveUploadFinished",!1);s(this,"error");s(this,"enableRetryAfterError");s(this,"uploadPercents",0);s(this,"latestImport");s(this,"fileToUpload");s(this,"uploadServiceSubscription");s(this,"alreadyRefreshedToken",!1);}ngOnInit(){this.userImportExportService.getLatestImport({userId:this.authService.getUser().id}).subscribe(t=>this.latestImport=t),this.uploadServiceSubscription=this.resumableUploadService.events.subscribe(t=>this.onUploadOngoing(t));}ngOnDestroy(){this.resumableUploadService.disconnect(),this.uploadServiceSubscription&&this.uploadServiceSubscription.unsubscribe();}canDeactivate(){return{canDeactivate:!this.uploadingArchive,text:"\u60A8\u7684\u5C01\u5B58\u6A94\u5C1A\u672A\u4E0A\u50B3\uFF0C\u60A8\u78BA\u5B9A\u60A8\u60F3\u8981\u96E2\u958B\u6B64\u9801\u9762\u55CE\uFF1F"};}isImportEnabled(){return this.server.getHTMLConfig().import.users.enabled;}isEmailEnabled(){return this.server.getHTMLConfig().email.enabled;}onUploadOngoing(t){switch(t.status){case"error":{if(!this.alreadyRefreshedToken&&t.responseStatus===de.UNAUTHORIZED_401)return this.alreadyRefreshedToken=!0,this.refreshTokenAndRetryUpload();this.handleUploadError(kn(t));break;}case"cancelled":this.uploadingArchive=!1,this.uploadPercents=0,this.enableRetryAfterError=!1,this.error="";break;case"uploading":this.uploadPercents=t.progress;break;case"complete":this.archiveUploadFinished=!0,this.uploadPercents=100,this.uploadingArchive=!1;break;}}onFileChange(t){let e=t.target,n=e.files[0];if(!n)return;let o=this.authService.getUser();if(o.videoQuota!==-1&&this.videoQuotaUsed+n.size>o.videoQuota){let C=new vt(),u=C.transform(n.size,0),g=C.transform(this.videoQuotaUsed,0),P=C.transform(o.videoQuota,0);this.notifier.error("\u7121\u6CD5\u532F\u5165\u6B64\u6A94\u6848\uFF0C\u56E0\u70BA\u5C07\u6703\u8D85\u904E\u60A8\u7684\u5F71\u7247\u914D\u984D\uFF08\u532F\u5165\u5927\u5C0F\uFF1A"+u+"\uFF0C\u5DF2\u4F7F\u7528\uFF1A"+g+"\uFF0C\u914D\u984D\uFF1A"+P+"\uFF09"),e.value="";return;}this.fileToUpload=n,this.uploadFile(n);}cancelUpload(){this.resumableUploadService.control({action:"cancel"});}retryUpload(){this.enableRetryAfterError=!1,this.error="",this.uploadFile(this.fileToUpload);}hasPendingImport(){if(!this.latestImport)return!1;let t=this.latestImport.state.id;return t===_n.PENDING||t===_n.PROCESSING;}uploadFile(t){this.resumableUploadService.handleFiles(t,{endpoint:`${re.BASE_USER_IMPORTS_URL}${this.authService.getUser().id}/imports/import-resumable`,multiple:!1,maxChunkSize:this.server.getHTMLConfig().client.videos.resumableUpload.maxChunkSize,token:this.authService.getAccessToken(),uploaderClass:fo,retryConfig:Xn(),metadata:{filename:t.name}}),this.uploadingArchive=!0;}handleUploadError(t){this.uploadPercents=0,this.enableRetryAfterError=!0,this.error=Et({err:t,name:"\u5C01\u5B58\u6A94",notifier:this.notifier,sticky:!1}),t.status===de.UNSUPPORTED_MEDIA_TYPE_415&&this.cancelUpload();}refreshTokenAndRetryUpload(){this.authService.refreshAccessToken().subscribe(()=>this.retryUpload());}};s(De,"\u0275fac",function(e){return new(e||De)(m(F),m(ie),m(re),m(Eo),m($));}),s(De,"\u0275cmp",A({type:De,selectors:[["my-account-import"]],inputs:{videoQuotaUsed:"videoQuotaUsed"},standalone:!0,features:[S],decls:7,vars:1,consts:()=>{let t;t="\u532F\u5165";let e;e="\u60A8\u53EF\u4EE5\u532F\u5165\u5176\u4ED6 PeerTube \u7DB2\u7AD9\u5EFA\u7ACB\u7684\u5C01\u5B58\u6A94\u3002";let n;n="\u9019\u662F"+"\uFFFD#4\uFFFD"+"\u532F\u5165"+"\uFFFD/#4\uFFFD"+"\u5DE5\u5177\u800C\u975E\u9077\u79FB\u5DE5\u5177\u3002\u9019\u5C31\u662F\u70BA\u4EC0\u9EBC\u8CC7\u6599\uFF08\u4F8B\u5982\u983B\u9053\u6216\u5F71\u7247\uFF09\u6703\u91CD\u8907\u4E26\u4E14\u4E0D\u6703\u5F9E\u60A8\u4E4B\u524D\u7684 PeerTube \u7DB2\u7AD9\u4E2D\u79FB\u51FA\u7684\u539F\u56E0\u3002 ";let o;o="\u532F\u5165\u6D41\u7A0B\u5C07\u81EA\u52D5\uFF1A";let C;C="\u66F4\u65B0\u60A8\u7684\u5E33\u865F\u8A6E\u91CB\u8CC7\u6599\uFF08\u986F\u793A\u540D\u7A31\u3001\u63CF\u8FF0\u3001\u5927\u982D\u7167\u2026\u2026\uFF09";let u;u="\u66F4\u65B0\u60A8\u7684\u4F7F\u7528\u8005\u8A2D\u5B9A\uFF08\u81EA\u52D5\u64AD\u653E\u6216 P2P \u653F\u7B56\u3001\u901A\u77E5\u8A2D\u5B9A\u2026\u2026\uFF09\u3002\u5176\u4E0D\u6703\u66F4\u65B0\u60A8\u7684\u4F7F\u7528\u8005\u96FB\u5B50\u90F5\u4EF6\u3001\u4F7F\u7528\u8005\u540D\u7A31\u6216\u5BC6\u78BC\u3002";let g;g="\u5728\u60A8\u7684\u975C\u97F3\u6E05\u55AE\u4E2D\u65B0\u589E\u5E33\u865F/\u4F3A\u670D\u5668";let P;P="\u65B0\u589E\u559C\u6B61/\u4E0D\u559C\u6B61";let k;k="\u5411\u60A8\u7684\u8A02\u95B1\u50B3\u9001\u8FFD\u8E64\u8ACB\u6C42";let v;v="\u82E5\u983B\u9053\u5C1A\u4E0D\u5B58\u5728\uFF0C\u5247\u5EFA\u7ACB\u983B\u9053";let j;j="\u82E5\u64AD\u653E\u6E05\u55AE\u5C1A\u4E0D\u5B58\u5728\uFF0C\u5247\u5EFA\u7ACB\u64AD\u653E\u6E05\u55AE";let y;y="\u5728\u60A8\u7684\u5F71\u7247\u6B77\u53F2\u7D00\u9304\u4E2D\u65B0\u589E\u89C0\u770B\u904E\u7684\u5F71\u7247";let ot;ot=""+"\uFFFD#26\uFFFD"+"\u82E5\u5C01\u5B58\u6A94\u5305\u542B\u5F71\u7247\u6A94"+"\uFFFD/#26\uFFFD"+"\uFF0C\u5247\u6703\u5728\u5F71\u7247\u4E0D\u5B58\u5728\u6642\u5EFA\u7ACB\u5F71\u7247";let it;it="\u4E0D\u6703\u532F\u5165\u4EE5\u4E0B\u8CC7\u6599\u7269\u4EF6\uFF1A";let rt;rt="\u7559\u8A00";let _t;_t="\u8FFD\u8E64\u8005\uFF08\u5E33\u865F\u5C07\u5FC5\u9808\u91CD\u65B0\u8FFD\u8E64\u60A8\u7684\u983B\u9053\uFF09";let at;at="\u532F\u5165\u6D41\u7A0B\u5B8C\u6210\u5F8C\uFF0C\u5C07\u6703\u5BC4\u9001\u4E00\u5C01\u96FB\u5B50\u90F5\u4EF6\u3002";let st;st="\u60A8\u7121\u6CD5\u91CD\u65B0\u532F\u5165\u5C01\u5B58\u6A94\uFF0C\u56E0\u70BA\u60A8\u5DF2\u6709\u4E00\u500B\u76EE\u524D\u6B63\u5728\u7531 PeerTube \u8655\u7406\u7684\u532F\u5165\u3002";let lt;lt="\uFF08\u526F\u6A94\u540D\uFF1A.zip\uFF09";let ct;ct="\u9078\u53D6\u8981\u532F\u5165\u7684\u6A94\u6848";let Ct;Ct="\u9078\u53D6\u8981\u532F\u5165\u7684\u5C01\u5B58\u6A94";let Tt;Tt="\u4E0A\u50B3\u5B8C\u6210\u3002\u60A8\u7684\u5C01\u5B58\u6A94\u532F\u5165\u5C07\u6703\u76E1\u5FEB\u8655\u7406\u3002";let dt;return dt="\u60A8\u7684\u7BA1\u7406\u54E1\u4E26\u672A\u555F\u7528\u4F7F\u7528\u8005\u532F\u5165\u3002",[t,e,n,o,C,u,g,P,k,v,j,y,ot,it,rt,_t,at,st,Ct,Tt,dt,[1,"pt-two-cols"],[1,"title-col"],[1,"content-col"],[4,"ngIf"],["class","mb-3",4,"ngIf"],[1,"alert","pt-alert-primary"],[1,"mb-3"],[3,"cancel","retry","isUploading","uploadPercents","error","uploaded","enableRetryAfterError"],["class","alert pt-alert-primary",4,"ngIf"],["ngbTooltip",lt,1,"button-file","form-control",3,"hidden"],["aria-label",ct,"accept",".zip","id","importfile","type","file",3,"change"]];},template:function(e,n){e&1&&(r(0,"div",21)(1,"div",22)(2,"h2"),l(3,0),i()(),r(4,"div",23),p(5,ti,38,3)(6,ni,2,0,"p"),i()()),e&2&&(a(5),me(n.isImportEnabled()?5:6));},dependencies:[b,Po,$e,ue],styles:[".button-file[_ngcontent-%COMP%]{width:max-content;position:relative;overflow:hidden;display:inline-block;padding:4px 13px;border:0;font-weight:600;border-radius:3px!important;text-align:center;cursor:pointer;font-size:15px;line-height:23px}.button-file[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:100%;height:100%;font-size:100px;text-align:end;filter:alpha(opacity=0);opacity:0;outline:none;background:var(--mainBackgroundColor);cursor:inherit;display:block}.button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-inline-end:.25rem;margin-inline-start:.25rem}.button-file[_ngcontent-%COMP%]:focus, .button-file[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--mainColorLightest)}.button-file[_ngcontent-%COMP%], .button-file[_ngcontent-%COMP%]:active, .button-file[_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}.button-file[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}.button-file[disabled][_ngcontent-%COMP%], .button-file.disabled[_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:var(--inputBorderColor)}.button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:#fff}.pt-alert-primary[_ngcontent-%COMP%]{width:fit-content}"]}));var Dt=De;var oi=["exportModal"];function ii(_,t){_&1&&(r(0,"p"),l(1,17),i());}function ri(_,t){if(_&1&&(O(0),I(1),q(2,"bytes"),N()),_&2){let e=T().$implicit;a(),Y(rn(2,1,e.size));}}function _i(_,t){if(_&1&&(O(0),I(1),q(2,"date"),N()),_&2){let e=T().$implicit;a(),Y(Te(2,1,e.expiresOn,"medium"));}}function ai(_,t){if(_&1&&(r(0,"a",37),l(1,22),i()),_&2){let e=T().$implicit;c("href",e.privateDownloadUrl,ye);}}function si(_,t){if(_&1&&(r(0,"tr")(1,"td"),I(2),q(3,"date"),i(),r(4,"td"),I(5),i(),r(6,"td"),p(7,ri,3,3,"ng-container",31),i(),r(8,"td"),p(9,_i,3,4,"ng-container",31),i(),r(10,"td"),p(11,ai,2,1,"a",36),i()()),_&2){let e=t.$implicit;a(2),Y(Te(3,5,e.createdAt,"medium")),a(3),Y(e.state.label),a(2),c("ngIf",e.size),a(2),c("ngIf",e.expiresOn),a(2),c("ngIf",e.privateDownloadUrl);}}function li(_,t){if(_&1&&(r(0,"table")(1,"tr")(2,"th",34),l(3,18),i(),r(4,"th",34),l(5,19),i(),r(6,"th",34),l(7,20),i(),r(8,"th",34),l(9,21),i(),d(10,"th"),i(),p(11,si,12,8,"tr",35),i()),_&2){let e=T(2);a(11),c("ngForOf",e.userExports);}}function ci(_,t){if(_&1){let e=h();r(0,"p"),l(1,2),i(),r(2,"ul")(3,"li"),l(4,3),i(),r(5,"li"),l(6,4),i(),r(7,"li"),l(8,5),i(),r(9,"li"),l(10,6),i(),r(11,"li"),l(12,7),i(),r(13,"li"),l(14,8),i(),r(15,"li"),l(16,9),i(),r(17,"li"),l(18,10),i(),r(19,"li"),l(20,11),i()(),r(21,"p"),l(22,12),i(),r(23,"ul")(24,"li"),l(25,13),i(),r(26,"li"),l(27,14),i(),r(28,"li"),l(29,15),i()(),r(30,"p"),l(31,16),i(),p(32,ii,2,0,"p")(33,li,12,1,"table",31),r(34,"div",32)(35,"input",33),M("click",function(){f(e);let o=T();return E(o.openNewArchiveModal());}),i()();}if(_&2){let e=T();a(32),me(e.isEmailEnabled()?32:-1),a(),c("ngIf",e.userExports&&e.userExports.length!==0),a(2),c("disabled",e.isRequestArchiveDisabled());}}function Ci(_,t){_&1&&(r(0,"p"),l(1,23),i());}function Ti(_,t){_&1&&(r(0,"div",50),l(1,26),i());}function di(_,t){if(_&1&&(r(0,"div",51),I(1),i()),_&2){let e=T(2);a(),Y(e.errorInModal);}}function mi(_,t){if(_&1&&(r(0,"div"),z(1,27),d(2,"strong"),q(3,"bytes"),B(),i()),_&2){let e=T(2);a(3),ae(rn(3,1,e.archiveWeightEstimation)),se(1);}}function ui(_,t){if(_&1){let e=h();r(0,"div",38)(1,"h4",39),l(2,24),i(),r(3,"button",40),M("click",function(){let o=f(e).close;return E(o());}),d(4,"my-global-icon",41),i()(),r(5,"div",42),p(6,Ti,2,0,"div",43)(7,di,2,1,"div",44),r(8,"my-peertube-checkbox",45),Ce("ngModelChange",function(o){f(e);let C=T();return ce(C.exportWithVideosFiles,o)||(C.exportWithVideosFiles=o),E(o);}),O(9,46),r(10,"div"),l(11,25),i(),p(12,mi,4,3,"div",31),N(),i()(),r(13,"div",47)(14,"input",48),M("click",function(){let o=f(e).close;return E(o());})("key.enter",function(){let o=f(e).close;return E(o());}),i(),r(15,"input",49),M("click",function(){f(e);let o=T();return E(o.requestNewArchive());}),i()();}if(_&2){let e=T();a(6),c("ngIf",e.hasAlreadyACompletedArchive()),a(),c("ngIf",e.errorInModal),a(),le("ngModel",e.exportWithVideosFiles),a(4),c("ngIf",e.archiveWeightEstimation);}}var ze=class ze{constructor(t,e,n,o){this.authService=t;this.server=e;this.userImportExportService=n;this.modalService=o;s(this,"exportModal");s(this,"videoQuotaUsed");s(this,"userExports",[]);s(this,"exportWithVideosFiles");s(this,"errorInModal");s(this,"archiveWeightEstimation");s(this,"exportModalOpened");s(this,"requestingArchive",!1);}ngOnInit(){this.archiveWeightEstimation=this.videoQuotaUsed,this.reloadUserExports();}isExportEnabled(){return this.server.getHTMLConfig().export.users.enabled;}isEmailEnabled(){return this.server.getHTMLConfig().email.enabled;}isRequestArchiveDisabled(){return this.userExports.some(t=>{let e=t.state.id;return e===At.PENDING||e===At.PROCESSING;});}hasAlreadyACompletedArchive(){return this.userExports.some(t=>t.state.id===At.COMPLETED);}openNewArchiveModal(){this.exportWithVideosFiles=!1,this.errorInModal=void 0,this.exportModalOpened=this.modalService.open(this.exportModal,{centered:!0});}requestNewArchive(){if(this.requestingArchive)return;this.requestingArchive=!0;let t=mt(!0);this.userExports.length!==0&&(t=pn(this.userExports.map(e=>e.id)).pipe(gn(e=>this.userImportExportService.deleteUserExport({userId:this.getUserId(),userExportId:e})),Nn())),t.pipe(An(()=>this.userImportExportService.requestNewUserExport({withVideoFiles:this.exportWithVideosFiles,userId:this.getUserId()}))).subscribe({next:()=>{this.reloadUserExports(),this.exportModalOpened.close(),this.requestingArchive=!1;},error:e=>{if(this.requestingArchive=!1,e.body.code===wn.MAX_USER_VIDEO_QUOTA_EXCEEDED_FOR_USER_EXPORT){this.errorInModal="\u5F71\u7247\u6A94\u6848\u7121\u6CD5\u5305\u542B\u5728\u532F\u51FA\u4E2D\uFF0C\u56E0\u70BA\u60A8\u5DF2\u8D85\u51FA\u7BA1\u7406\u54E1\u5141\u8A31\u532F\u51FA\u6B64\u6A94\u6848\u7684\u6700\u5927\u5F71\u7247\u914D\u984D\u3002";return;}this.errorInModal=e.message;}});}reloadUserExports(){this.isExportEnabled()&&this.userImportExportService.listUserExports({userId:this.authService.getUser().id}).subscribe(({data:t})=>this.userExports=t);}getUserId(){return this.authService.getUser().id;}};s(ze,"\u0275fac",function(e){return new(e||ze)(m(F),m(ie),m(re),m(xn));}),s(ze,"\u0275cmp",A({type:ze,selectors:[["my-account-export"]],viewQuery:function(e,n){if(e&1&&he(oi,7),e&2){let o;Ue(o=be())&&(n.exportModal=o.first);}},inputs:{videoQuotaUsed:"videoQuotaUsed"},standalone:!0,features:[S],decls:9,vars:1,consts:()=>{let t;t="\u532F\u51FA";let e;e="\u8ACB\u6C42\u65B0\u7684\u5C01\u5B58\u6A94";let n;n="\u60A8\u53EF\u4EE5\u8ACB\u6C42\u60A8\u5E33\u865F\u7684\u5C01\u5B58\u6A94\uFF0C\u5176\u4E2D\u5305\u542B\u4E86\uFF1A";let o;o="\u60A8\u7684\u5E33\u865F\u8A2D\u5B9A\u8207\u5927\u982D\u7167\u6A94\u6848";let C;C="\u60A8\u7684\u983B\u9053\uFF0C\u5305\u542B\u6A6B\u5E45\u8207\u5927\u982D\u7167\u6A94\u6848";let u;u="\u60A8\u7684\u975C\u97F3\u5E33\u865F\u8207\u4F3A\u670D\u5668";let g;g="\u60A8\u7684\u7559\u8A00";let P;P="\u60A8\u7684\u559C\u6B61\u8207\u4E0D\u559C\u6B61";let k;k="\u60A8\u7684\u8A02\u95B1\u8207\u8FFD\u8E64\u8005";let v;v="\u5305\u542B\u7E2E\u5716\u6A94\u6848\u7684\u5F71\u7247\u64AD\u653E\u6E05\u55AE";let j;j="\u5305\u542B\u7E2E\u5716\u3001\u5B57\u5E55\u6A94\u6848\u7684\u5F71\u7247\u3002\u5F71\u7247\u6A94\u6848\u4E5F\u53EF\u4EE5\u5305\u542B\u5728\u5C01\u5B58\u6A94\u4E2D";let y;y="\u60A8\u7684\u5F71\u7247\u6B77\u53F2\u7D00\u9304";let ot;ot="\u532F\u51FA\u7684\u8CC7\u6599\u5C07\u6703\u5305\u542B\u591A\u500B\u76EE\u9304\uFF1A";let it;it="\u5305\u542B ActivityPub \u683C\u5F0F\u532F\u51FA\u7684\u76EE\u9304\uFF0C\u53EF\u7531\u4EFB\u4F55\u76F8\u5BB9\u8EDF\u9AD4\u8B80\u53D6";let rt;rt="\u5305\u542B\u81EA\u8A02 PeerTube JSON \u683C\u5F0F\u7684\u532F\u51FA\u7684\u76EE\u9304\uFF0C\u53EF\u7528\u65BC\u5728\u53E6\u4E00\u500B PeerTube \u7AD9\u53F0\u4E0A\u91CD\u65B0\u532F\u5165\u60A8\u7684\u5E33\u865F";let _t;_t="\u5305\u542B\u975C\u614B\u6A94\u6848\uFF08\u7E2E\u5716\u3001\u5927\u982D\u7167\u3001\u5F71\u7247\u6A94\u6848\u7B49\uFF09\u7684\u76EE\u9304";let at;at="\u60A8\u4E00\u6B21\u53EA\u80FD\u8ACB\u6C42\u4E00\u500B\u5C01\u5B58\u6A94\u3002";let st;st="\u7576\u532F\u51FA\u7684\u5C01\u5B58\u6A94\u53EF\u4F9B\u4F7F\u7528\u6642\uFF0C\u5C07\u6703\u50B3\u9001\u96FB\u5B50\u90F5\u4EF6\u7D66\u60A8\u3002";let lt;lt="\u65E5\u671F";let ct;ct="\u72C0\u614B";let Ct;Ct="\u5927\u5C0F";let Tt;Tt="\u5230\u671F\u65BC";let dt;dt="\u4E0B\u8F09\u60A8\u7684\u5C01\u5B58\u6A94";let U;U="\u60A8\u7684\u7BA1\u7406\u54E1\u4E26\u672A\u555F\u7528\u4F7F\u7528\u8005\u532F\u51FA\u3002";let sn;sn="\u95DC\u9589\u6B64\u6A21\u5F0F";let ln;ln="\u5C07\u5F71\u7247\u6A94\u5305\u542B\u5728\u5C01\u5B58\u6A94\u4E2D";let cn;cn="\u53D6\u6D88";let Cn;Cn="\u8ACB\u6C42\u5C01\u5B58\u6A94";let Tn;Tn="\u5C01\u5B58\u6A94\u8A2D\u5B9A";let dn;dn="\u82E5\u60A8\u60F3\u5728\u53E6\u4E00\u500B PeerTube \u7DB2\u7AD9\u4E0A\u91CD\u65B0\u532F\u5165\u5F71\u7247\uFF0C\u5247\u5FC5\u9808\u5305\u542B\u5F71\u7247\u6A94";let mn;mn="\u60A8\u5DF2\u6709\u4F5C\u7528\u4E2D\u7684\u5C01\u5B58\u6A94\u3002\u8ACB\u6C42\u65B0\u7684\u532F\u51FA\u5C01\u5B58\u6A94\u5C07\u6703\u79FB\u9664\u76EE\u524D\u7684\u3002";let un;return un="\u82E5\u60A8\u5305\u542B\u5F71\u7247\u6A94\uFF0C\u5247\u5C01\u5B58\u6A94\u7684\u5927\u5C0F\u5C07\u7D04\u70BA "+"\uFFFD#2\uFFFD"+"approximately "+"\uFFFD0\uFFFD"+""+"\uFFFD/#2\uFFFD"+"",[["exportModal",""],t,n,o,C,u,g,P,k,v,j,y,ot,it,rt,_t,at,st,lt,ct,Ct,Tt,dt,U,Tn,dn,mn,un,[1,"pt-two-cols"],[1,"title-col"],[1,"content-col"],[4,"ngIf"],[1,"mt-3"],["type","submit","value",e,1,"peertube-button","orange-button",3,"click","disabled"],["scope","column"],[4,"ngFor","ngForOf"],["class","peertube-button-link grey-button",3,"href",4,"ngIf"],[1,"peertube-button-link","grey-button",3,"href"],[1,"modal-header"],[1,"modal-title"],["title",sn,1,"border-0","p-0",3,"click"],["iconName","cross"],[1,"modal-body"],["class","alert alert-warning",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["inputName","exportWithVideos","labelText",ln,3,"ngModelChange","ngModel"],["ngProjectAs","description",5,["description"]],[1,"modal-footer","inputs"],["type","button","role","button","value",cn,1,"peertube-button","grey-button",3,"click","key.enter"],["type","submit","value",Cn,1,"peertube-button","orange-button",3,"click"],[1,"alert","alert-warning"],[1,"alert","alert-danger"]];},template:function(e,n){e&1&&(r(0,"div",28)(1,"div",29)(2,"h2"),l(3,1),i()(),r(4,"div",30),p(5,ci,36,3)(6,Ci,2,0,"p"),i()(),p(7,ui,16,4,"ng-template",null,0,Rn)),e&2&&(a(5),me(n.isExportEnabled()?5:6));},dependencies:[b,Mt,w,Le,X,G,pe,ue,vt],styles:["table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-inline-end:1rem}"]}));var zt=ze;var pi=["accountImport"],Be=class Be{constructor(t){this.userService=t;s(this,"accountImport");s(this,"videoQuotaUsed");}ngOnInit(){this.userService.getMyVideoQuotaUsed().subscribe(t=>this.videoQuotaUsed=t.videoQuotaUsed);}canDeactivate(){var t;return((t=this.accountImport)==null?void 0:t.canDeactivate())||{canDeactivate:!0};}};s(Be,"\u0275fac",function(e){return new(e||Be)(m(V));}),s(Be,"\u0275cmp",A({type:Be,selectors:[["my-account-import-export"]],viewQuery:function(e,n){if(e&1&&he(pi,5),e&2){let o;Ue(o=be())&&(n.accountImport=o.first);}},standalone:!0,features:[S],decls:7,vars:2,consts:()=>{let t;return t="\u532F\u5165/\u532F\u51FA",[["accountImport",""],t,["iconName","cloud-download","aria-hidden","true"],[1,"d-block","mb-5",3,"videoQuotaUsed"],[3,"videoQuotaUsed"]];},template:function(e,n){e&1&&(r(0,"h1"),d(1,"my-global-icon",2),O(2),l(3,1),N(),i(),d(4,"my-account-import",3,0)(6,"my-account-export",4)),e&2&&(a(4),c("videoQuotaUsed",n.videoQuotaUsed),a(2),c("videoQuotaUsed",n.videoQuotaUsed));},dependencies:[w,Dt,zt],encapsulation:2}));var Bt=Be;var Mi=["userNotification"];function Oi(_,t){_&1&&(O(0),d(1,"my-global-icon",19),r(2,"span"),l(3,6),i(),N());}function Ni(_,t){_&1&&(O(0),d(1,"my-global-icon",20),r(2,"span"),l(3,7),i(),N());}var Ve=class Ve{constructor(){s(this,"userNotification");s(this,"_notificationSortType","createdAt");}get notificationSortType(){return this.hasUnreadNotifications()?this._notificationSortType:"createdAt";}set notificationSortType(t){this._notificationSortType=t;}markAllAsRead(){this.userNotification.markAllAsRead();}hasUnreadNotifications(){return this.userNotification.notifications.filter(t=>t.read===!1).length!==0;}onChangeSortColumn(){this.userNotification.changeSortColumn(this.notificationSortType);}};s(Ve,"\u0275fac",function(e){return new(e||Ve)();}),s(Ve,"\u0275cmp",A({type:Ve,selectors:[["ng-component"]],viewQuery:function(e,n){if(e&1&&he(Mi,7),e&2){let o;Ue(o=be())&&(n.userNotification=o.first);}},standalone:!0,features:[S],decls:20,vars:5,consts:()=>{let t;t="\u901A\u77E5";let e;e="\u901A\u77E5\u504F\u597D\u8A2D\u5B9A";let n;n="\u6392\u5E8F\u7531";let o;o="\u6700\u65B0\u7684\u512A\u5148";let C;C="\u672A\u8B80\u512A\u5148";let u;u="\u6A19\u8A18\u70BA\u5DF2\u8B80";let g;return g="\u5168\u90E8\u5DF2\u8B80",[["userNotification",""],t,e,n,o,C,u,g,[1,"visually-hidden"],[1,"header"],["routerLink","/my-account/settings","fragment","notifications",1,"peertube-button-link","grey-button"],["iconName","cog","aria-hidden","true"],[1,"peertube-select-container","peertube-select-button","ms-2","me-2"],[1,"form-control",3,"ngModelChange","ngModel"],["value","undefined","disabled",""],["value","createdAt"],["value","read",3,"disabled"],[1,"ms-auto","peertube-button","grey-button",3,"click","disabled"],[4,"ngIf"],["iconName","tick","aria-hidden","true"],["iconName","circle-tick","aria-hidden","true"]];},template:function(e,n){if(e&1){let o=h();r(0,"h1",8),l(1,1),i(),r(2,"div",9)(3,"a",10),d(4,"my-global-icon",11),r(5,"span"),l(6,2),i()(),r(7,"div",12)(8,"select",13),Ce("ngModelChange",function(u){return f(o),ce(n.notificationSortType,u)||(n.notificationSortType=u),E(u);}),M("ngModelChange",function(){return f(o),E(n.onChangeSortColumn());}),r(9,"option",14),l(10,3),i(),r(11,"option",15),l(12,4),i(),r(13,"option",16),l(14,5),i()()(),r(15,"button",17),M("click",function(){return f(o),E(n.markAllAsRead());}),p(16,Oi,4,0,"ng-container",18)(17,Ni,4,0,"ng-container",18),i()(),d(18,"my-user-notifications",null,0);}e&2&&(a(8),le("ngModel",n.notificationSortType),a(5),c("disabled",!n.hasUnreadNotifications()),a(2),c("disabled",!n.hasUnreadNotifications()),a(),c("ngIf",n.hasUnreadNotifications()),a(),c("ngIf",!n.hasUnreadNotifications()));},dependencies:[Nt,w,X,bn,Yn,Un,G,pe,b,Jn],styles:['.header[_ngcontent-%COMP%]{display:flex;margin-bottom:1.25rem}.header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{position:relative;display:inline-block;width:18px;top:-1px;margin-inline-end:.1875rem}.header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{position:relative;display:inline-block;width:20px;top:-1px;margin-inline-end:.1875rem}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;width:auto;border-radius:3px;color:var(--inputForegroundColor);background:var(--inputBackgroundColor);position:relative;height:min-content}.header[_ngcontent-%COMP%]   .peertube-select-container.disabled[_ngcontent-%COMP%]{background-color:#e5e5e5}.header[_ngcontent-%COMP%]   .peertube-select-container.disabled[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:default}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{background-color:#f9f9f9}@media screen and (max-width: auto){.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]{width:100%}}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:calc(0% + 15px);content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid rgba(0,0,0,0);border-top-color:var(--mainForegroundColor);margin-top:-2px;z-index:100}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:15px;padding:3px 35px 3px 12px;position:relative;border:1px solid var(--inputBorderColor);background:transparent none;-webkit-appearance:none;appearance:none;text-overflow:ellipsis;color:var(--mainForegroundColor);line-height:23px}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:-moz-focusring{color:transparent;text-shadow:0 0 0 #000}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[value=undefined][_ngcontent-%COMP%]{font-weight:600}.header[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]{background-color:var(--greyBackgroundColor);color:var(--greyForegroundColor)}.header[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus, .header[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem #5858580d}.header[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:hover, .header[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:active, .header[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus, .header[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[disabled][_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button.disabled[_ngcontent-%COMP%]{color:var(--greyForegroundColor);background-color:var(--greySecondaryBackgroundColor)}.header[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[disabled][_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button.disabled[_ngcontent-%COMP%]{cursor:default}.header[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .header[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .header[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:var(--greyForegroundColor)}.header[_ngcontent-%COMP%]   .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-weight:600;color:var(--greyForegroundColor);border:0;padding:4px 35px 4px 12px}@media screen and (max-width: 500px){.header[_ngcontent-%COMP%]{flex-direction:column}.header[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child, .header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]{margin-bottom:15px}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]{margin-inline-start:0!important}}@media screen and (min-width: 500px) and (max-width: 800px){.header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:0;padding:0 13px}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]{width:auto!important}}@media screen and (min-width: 500px) and (max-width: 1040px){.main-col:not(.expanded)[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:0;padding:0 13px}.main-col:not(.expanded)[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]{width:auto!important}}']}));var Vt=Ve;var We=class We{constructor(t,e,n,o,C){this.authService=t;this.notifier=e;this.userService=n;this.confirmService=o;this.redirectService=C;s(this,"user");}deleteMe(){return Re(this,null,function*(){(yield this.confirmService.confirmWithExpectedInput("\u60A8\u78BA\u5B9A\u60A8\u60F3\u8981\u522A\u9664\u60A8\u7684\u5E33\u865F\u55CE\uFF1F"+"<br /><br />"+("\u9019\u5C07\u6703\u522A\u9664\u60A8\u6240\u6709\u7684\u8CC7\u6599\uFF0C\u5305\u542B\u983B\u9053\u3001\u5F71\u7247\u8207\u7559\u8A00\uFF0C\u4E14\u60A8\u7121\u6CD5\u5728\u6B64\u7AD9\u53F0\u4E0A\u4F7F\u7528\u300C"+this.user.username+"\u300D\u4F7F\u7528\u8005\u540D\u7A31\u5EFA\u7ACB\u5176\u4ED6\u4F7F\u7528\u8005\u3002")+"<br /><br />"+"\u5176\u4ED6\u4F3A\u670D\u5668\u8207\u5176\u4ED6\u7B2C\u4E09\u65B9\u6240\u5FEB\u53D6\u7684\u5167\u5BB9\u53EF\u80FD\u6703\u5EF6\u9577\u522A\u9664\u6642\u9593\u3002","\u8F38\u5165\u60A8\u7684\u4F7F\u7528\u8005\u540D\u7A31\u4EE5\u78BA\u8A8D",this.user.username,"\u522A\u9664\u60A8\u7684\u5E33\u865F","\u522A\u9664\u6211\u7684\u5E33\u865F"))!==!1&&this.userService.deleteMe().subscribe({next:()=>{this.notifier.success("\u60A8\u7684\u5E33\u865F\u5DF2\u522A\u9664\u3002"),this.authService.logout(),this.redirectService.redirectToHomepage();},error:e=>this.notifier.error(e.message)});});}};s(We,"\u0275fac",function(e){return new(e||We)(m(F),m($),m(V),m(we),m(zn));}),s(We,"\u0275cmp",A({type:We,selectors:[["my-account-danger-zone"]],inputs:{user:"user"},standalone:!0,features:[S],decls:5,vars:0,consts:()=>{let t;t="\u4E00\u65E6\u60A8\u522A\u9664\u4E86\u60A8\u7684\u5E33\u865F\uFF0C\u5C31\u7121\u6CD5\u633D\u56DE\u4E86\u3002\u7CFB\u7D71\u5C07\u6703\u8981\u6C42\u60A8\u78BA\u8A8D\u6B64\u52D5\u4F5C\u3002";let e;return e="\u522A\u9664\u60A8\u7684\u5E33\u865F",[t,e,[1,"delete-me"],[3,"click"]];},template:function(e,n){e&1&&(r(0,"div",2)(1,"p"),l(2,0),i(),r(3,"button",3),M("click",function(){return n.deleteMe();}),l(4,1),i()());},styles:[".delete-me[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:4px 13px;border:0;font-weight:600;border-radius:3px!important;text-align:center;cursor:pointer;font-size:15px;line-height:23px;background-color:#d56253;color:#fff6f5}.delete-me[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-inline-end:.25rem;margin-inline-start:.25rem}.delete-me[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, .delete-me[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem #d562530d}.delete-me[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .delete-me[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .delete-me[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, .delete-me[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%], .delete-me[_ngcontent-%COMP%]   button.disabled[_ngcontent-%COMP%]{background-color:#df877c}.delete-me[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%], .delete-me[_ngcontent-%COMP%]   button.disabled[_ngcontent-%COMP%]{cursor:default}.delete-me[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .delete-me[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .delete-me[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:#fff6f5}.delete-me[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus:not(:focus-visible){outline:none!important}"]}));var Wt=We;var gi=_=>({"input-error":_});function Ai(_,t){if(_&1&&(r(0,"div",14),I(1),i()),_&2){let e=T();a(),Y(e.error);}}function Si(_,t){if(_&1&&(r(0,"div",15),I(1),i()),_&2){let e=T();a(),Y(e.success);}}function fi(_,t){if(_&1&&(r(0,"div",16),z(1,2),d(2,"strong"),B(),i()),_&2){let e=T();a(2),ae(e.user.pendingEmail),se(1);}}function Ei(_,t){if(_&1&&(r(0,"div",17),I(1),i()),_&2){let e=T();a(),K(" ",e.formErrors["new-email"]," ");}}var He=class He extends Ne{constructor(e,n,o,C){super();this.formReactiveService=e;this.authService=n;this.userService=o;this.serverService=C;s(this,"error");s(this,"success");s(this,"user");}ngOnInit(){this.buildForm({"new-email":eo,password:Rt}),this.user=this.authService.getUser();}changeEmail(){this.error=null,this.success=null;let e=this.form.value.password,n=this.form.value["new-email"];ve([this.serverService.getConfig(),this.userService.changeEmail(e,n)]).pipe(Sn(()=>this.authService.refreshUserInformation())).subscribe({next:([o])=>{this.form.reset(),o.signup.requiresEmailVerification?this.success="\u8ACB\u6AA2\u67E5\u60A8\u7684\u96FB\u5B50\u90F5\u4EF6\u4EE5\u9A57\u8B49\u60A8\u65B0\u7684\u96FB\u5B50\u90F5\u4EF6\u3002":this.success="\u96FB\u5B50\u90F5\u4EF6\u5DF2\u66F4\u65B0\u3002";},error:o=>{if(o.status===de.UNAUTHORIZED_401){this.error="\u60A8\u76EE\u524D\u5BC6\u78BC\u7121\u6548\u3002";return;}this.error=o.message;}});}};s(He,"\u0275fac",function(n){return new(n||He)(m(oe),m(F),m(V),m(ie));}),s(He,"\u0275cmp",A({type:He,selectors:[["my-account-change-email"]],standalone:!0,features:[H,S],decls:15,vars:11,consts:()=>{let e;e="\u65B0\u96FB\u5B50\u90F5\u4EF6";let n;n="\u76EE\u524D\u7684\u5BC6\u78BC";let o;o="\u8B8A\u66F4\u96FB\u5B50\u90F5\u4EF6";let C;C="\u8B8A\u66F4\u60A8\u7684\u96FB\u5B50\u90F5\u4EF6";let u;u="\u60A8\u76EE\u524D\u7684\u96FB\u5B50\u90F5\u4EF6\u70BA "+"\uFFFD#9\uFFFD"+""+"\uFFFD0\uFFFD"+""+"\uFFFD/#9\uFFFD"+"\u3002\u9019\u6C38\u9060\u4E0D\u6703\u516C\u958B\u986F\u793A\u3002 ";let g;return g=""+"\uFFFD#2\uFFFD"+""+"\uFFFD0\uFFFD"+""+"\uFFFD/#2\uFFFD"+" \u6B63\u5728\u7B49\u5F85\u96FB\u5B50\u90F5\u4EF6\u9A57\u8B49 ",[C,u,g,["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["class","pending-email",4,"ngIf"],["role","form",1,"change-email",3,"ngSubmit","formGroup"],[1,"form-group"],["for","new-email"],[1,"form-group-description"],["type","email","id","new-email","placeholder",e,"formControlName","new-email",1,"form-control",3,"ngClass"],["class","form-error","role","alert",4,"ngIf"],["formControlName","password","id","password","placeholder",n,"autocomplete","current-password",3,"formError"],["type","submit","value",o,3,"disabled"],[1,"alert","alert-danger"],[1,"alert","alert-success"],[1,"pending-email"],["role","alert",1,"form-error"]];},template:function(n,o){n&1&&(p(0,Ai,2,1,"div",3)(1,Si,2,1,"div",4)(2,fi,3,1,"div",5),r(3,"form",6),M("ngSubmit",function(){return o.changeEmail();}),r(4,"div",7)(5,"label",8),l(6,0),i(),r(7,"div",9),z(8,1),d(9,"strong"),B(),i(),d(10,"input",10),p(11,Ei,2,1,"div",11),i(),r(12,"div",7),d(13,"my-input-text",12),i(),d(14,"input",13),i()),n&2&&(c("ngIf",o.error),a(),c("ngIf",o.success),a(),c("ngIf",o.user.pendingEmail),a(),c("formGroup",o.form),a(6),ae(o.user.email),se(8),a(),c("ngClass",Se(9,gi,o.formErrors["new-email"])),a(),c("ngIf",o.formErrors["new-email"]),a(2),c("formError",o.formErrors.password),a(),c("disabled",!o.form.valid));},dependencies:[b,X,J,gt,G,Z,ne,ee,te,Ye,Oe],styles:["form[_ngcontent-%COMP%]{max-width:340px}my-input-text[_ngcontent-%COMP%]{display:block;width:100%}input[type=email][_ngcontent-%COMP%]{font-size:15px;padding:3px 15px;width:100%;max-width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid var(--inputBorderColor);border-radius:3px;line-height:23px}input[type=email][_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}input[type=email][readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width: calc(100% + 40px)){input[type=email][_ngcontent-%COMP%]{width:100%}}input[type=submit][_ngcontent-%COMP%]{padding:4px 13px;border:0;font-weight:600;border-radius:3px!important;text-align:center;cursor:pointer;font-size:15px;line-height:23px}input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-inline-end:.25rem;margin-inline-start:.25rem}input[type=submit][_ngcontent-%COMP%]:focus, input[type=submit][_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--mainColorLightest)}input[type=submit][_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]:active, input[type=submit][_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}input[type=submit][_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}input[type=submit][disabled][_ngcontent-%COMP%], input[type=submit].disabled[_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:var(--inputBorderColor)}input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:#fff}.pending-email[_ngcontent-%COMP%]{margin-bottom:15px}"]}));var Ht=He;function Pi(_,t){_&1&&(O(0),l(1,0),N());}function Ii(_,t){_&1&&(O(0),l(1,1),N());}var Ke=class Ke extends Ne{constructor(e,n,o){super();this.formReactiveService=e;this.userService=n;this.notifier=o;s(this,"user");}ngOnInit(){this.buildForm({"email-public":null}),this.form.patchValue({"email-public":this.user.emailPublic});}updateEmailPublic(){let e={emailPublic:this.form.value["email-public"]};this.userService.updateMyProfile(e).subscribe({next:()=>{e.emailPublic?this.notifier.success("\u96FB\u5B50\u90F5\u4EF6\u73FE\u5DF2\u516C\u958B"):this.notifier.success("\u96FB\u5B50\u90F5\u4EF6\u73FE\u70BA\u79C1\u5BC6"),this.user.emailPublic=e.emailPublic;},error:n=>this.notifier.error(n.message)});}};s(Ke,"\u0275fac",function(n){return new(n||Ke)(m(oe),m(V),m($));}),s(Ke,"\u0275cmp",A({type:Ke,selectors:[["my-account-email-preferences"]],inputs:{user:"user"},standalone:!0,features:[H,S],decls:8,vars:3,consts:()=>{let e;e="\u5141\u8A31\u96FB\u5B50\u90F5\u4EF6\u516C\u958B\u986F\u793A";let n;n="\u5132\u5B58\u96FB\u5B50\u90F5\u4EF6\u8A2D\u5B9A";let o;o="\u5FC5\u9808\u7533\u8ACB podcast RSS feed\u3002";let C;return C="\u26A0\uFE0F \u60A8\u7684\u96FB\u5B50\u90F5\u4EF6\u7121\u6CD5\u5728 podcast RSS \u4F86\u6E90\u4E2D\u4F7F\u7528\uFF0C\u56E0\u70BA\u5176\u5C1A\u672A\u7D93\u904E\u9A57\u8B49\u3002",[o,C,["role","form",3,"ngSubmit","formGroup"],[1,"form-group"],["inputName","email-public","formControlName","email-public","labelText",e],["ngProjectAs","description",5,["description"]],[1,"mb-0"],["type","submit","value",n,1,"peertube-button","orange-button",3,"disabled"]];},template:function(n,o){n&1&&(r(0,"form",2),M("ngSubmit",function(){return o.updateEmailPublic();}),r(1,"div",3)(2,"my-peertube-checkbox",4),O(3,5),r(4,"p",6),p(5,Pi,2,0,"ng-container")(6,Ii,2,0,"ng-container"),i(),N(),i()(),d(7,"input",7),i()),n&2&&(c("formGroup",o.form),a(5),me(o.user.emailVerified?5:6),a(2),c("disabled",!o.form.valid));},dependencies:[X,J,G,Z,ne,ee,te,Le]}));var jt=Ke;var vi=()=>["/my-account/two-factor-auth"];function yi(_,t){_&1&&(O(0),r(1,"p"),l(2,0),i(),r(3,"my-button",5),l(4,1),i(),N()),_&2&&(a(3),c("ptRouterLink",In(1,vi)));}function hi(_,t){if(_&1){let e=h();O(0),r(1,"my-button",6),M("click",function(){f(e);let o=T();return E(o.disableTwoFactor());}),l(2,2),i(),N();}}var je=class je{constructor(t,e,n,o){this.notifier=t;this.twoFactorService=e;this.confirmService=n;this.auth=o;s(this,"user");s(this,"twoFactorEnabled",!1);}ngOnInit(){this.twoFactorEnabled=this.user.twoFactorEnabled;}disableTwoFactor(){return Re(this,null,function*(){let t="\u60A8\u78BA\u5B9A\u60A8\u60F3\u8981\u505C\u7528\u60A8\u5E33\u865F\u7684\u5169\u6B65\u9A5F\u9A57\u8B49\u55CE\uFF1F",{confirmed:e,password:n}=yield this.confirmService.confirmWithPassword({message:t,title:"\u505C\u7528\u5169\u6B65\u9A5F"});e!==!1&&this.twoFactorService.disableTwoFactor({userId:this.user.id,currentPassword:n}).subscribe({next:()=>{this.twoFactorEnabled=!1,this.auth.refreshUserInformation(),this.notifier.success("\u5DF2\u505C\u7528\u5169\u6B65\u9A5F\u9A57\u8B49");},error:o=>this.notifier.error(o.message)});});}};s(je,"\u0275fac",function(e){return new(e||je)(m($),m(Fe),m(we),m(F));}),s(je,"\u0275cmp",A({type:je,selectors:[["my-account-two-factor-button"]],inputs:{user:"user"},standalone:!0,features:[S],decls:3,vars:2,consts:()=>{let t;t="\u5169\u6B65\u9A5F\u9A57\u8B49\u900F\u904E\u5728\u60A8\u767B\u5165\u6642\u8981\u6C42\u4F86\u81EA\u53E6\u4E00\u53F0\u88DD\u7F6E\uFF08\u6700\u5E38\u898B\u7684\u662F\u624B\u6A5F\uFF09\u7684\u6578\u5B57\u9A57\u8B49\u78BC\u70BA\u60A8\u7684\u5E33\u865F\u52A0\u4E0A\u4E86\u4E00\u5C64\u984D\u5916\u7684\u5B89\u5168\u6027\u3002";let e;e="\u555F\u7528\u5169\u6B65\u9A5F\u9A57\u8B49";let n;return n="\u505C\u7528\u5169\u6B65\u9A5F\u9A57\u8B49",[t,e,n,[1,"two-factor"],[4,"ngIf"],["theme","orange",3,"ptRouterLink"],["theme","orange",3,"click"]];},template:function(e,n){e&1&&(r(0,"div",3),p(1,yi,5,2,"ng-container",4)(2,hi,3,0,"ng-container",4),i()),e&2&&(a(),c("ngIf",!n.twoFactorEnabled),a(),c("ngIf",n.twoFactorEnabled));},dependencies:[b,so],encapsulation:2}));var qt=je;function Ui(_,t){if(_&1&&(r(0,"div",8),I(1),i()),_&2){let e=T();a(),Y(e.error);}}var qe=class qe extends Ne{constructor(e,n,o,C){super();this.formReactiveService=e;this.notifier=n;this.authService=o;this.userService=C;s(this,"error");s(this,"user");}ngOnInit(){this.buildForm({"current-password":It,"new-password":Rt,"new-confirmed-password":no}),this.user=this.authService.getUser();let e=this.form.get("new-confirmed-password");e.valueChanges.pipe(On(n=>n!==this.form.value["new-password"])).subscribe(()=>e.setErrors({matchPassword:!0}));}changePassword(){let e=this.form.value["current-password"],n=this.form.value["new-password"];this.userService.changePassword(e,n).subscribe({next:()=>{this.notifier.success("\u5BC6\u78BC\u5DF2\u66F4\u65B0\u3002"),this.form.reset(),this.error=null;},error:o=>{if(o.status===de.UNAUTHORIZED_401){this.error="\u60A8\u76EE\u524D\u5BC6\u78BC\u7121\u6548\u3002";return;}this.error=o.message;}});}};s(qe,"\u0275fac",function(n){return new(n||qe)(m(oe),m($),m(F),m(V));}),s(qe,"\u0275cmp",A({type:qe,selectors:[["my-account-change-password"]],standalone:!0,features:[H,S],decls:8,vars:6,consts:()=>{let e;e="\u76EE\u524D\u7684\u5BC6\u78BC";let n;n="\u65B0\u5BC6\u78BC";let o;o="\u78BA\u8A8D\u65B0\u5BC6\u78BC";let C;C="\u8B8A\u66F4\u5BC6\u78BC";let u;return u="\u8B8A\u66F4\u5BC6\u78BC",[u,["class","alert alert-danger",4,"ngIf"],["role","form",3,"ngSubmit","formGroup"],["for","current-password"],["formControlName","current-password","inputId","current-password","placeholder",e,"autocomplete","current-password",3,"formError"],["formControlName","new-password","inputId","new-password","placeholder",n,"autocomplete","new-password",3,"formError"],["formControlName","new-confirmed-password","inputId","new-confirmed-password","placeholder",o,"autocomplete","new-password",3,"formError"],["type","submit","value",C,3,"disabled"],[1,"alert","alert-danger"]];},template:function(n,o){n&1&&(p(0,Ui,2,1,"div",1),r(1,"form",2),M("ngSubmit",function(){return o.changePassword();}),r(2,"label",3),l(3,0),i(),d(4,"my-input-text",4)(5,"my-input-text",5)(6,"my-input-text",6)(7,"input",7),i()),n&2&&(c("ngIf",o.error),a(),c("formGroup",o.form),a(3),c("formError",o.formErrors["current-password"]),a(),c("formError",o.formErrors["new-password"]),a(),c("formError",o.formErrors["new-confirmed-password"]),a(),c("disabled",!o.form.valid));},dependencies:[b,X,J,G,Z,ne,ee,te,Oe],styles:["form[_ngcontent-%COMP%]{max-width:340px}my-input-text[_ngcontent-%COMP%]{display:block;width:100%}my-input-text[_ngcontent-%COMP%] + my-input-text[_ngcontent-%COMP%]{margin-top:15px}input[type=submit][_ngcontent-%COMP%]{margin-top:15px;padding:4px 13px;border:0;font-weight:600;border-radius:3px!important;text-align:center;cursor:pointer;font-size:15px;line-height:23px}input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-inline-end:.25rem;margin-inline-start:.25rem}input[type=submit][_ngcontent-%COMP%]:focus, input[type=submit][_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--mainColorLightest)}input[type=submit][_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]:active, input[type=submit][_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}input[type=submit][_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}input[type=submit][disabled][_ngcontent-%COMP%], input[type=submit].disabled[_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:var(--inputBorderColor)}input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:#fff}"]}));var Qt=qe;function bi(_,t){_&1&&(r(0,"div"),l(1,2),i());}function Yi(_,t){if(_&1){let e=h();r(0,"div")(1,"my-input-switch",8),Ce("ngModelChange",function(o){f(e);let C=T(2).$implicit,u=T(4);return ce(u.emailNotifications[C],o)||(u.emailNotifications[C]=o),E(o);}),M("ngModelChange",function(){f(e);let o=T(2).$implicit,C=T(4);return E(C.updateEmailSetting(o,C.emailNotifications[o]));}),i()();}if(_&2){let e=T(2).$implicit,n=T(4);a(),c("label",n.getEmailLabel(e))("inputName","email-notification-"+e),le("ngModel",n.emailNotifications[e]);}}function $i(_,t){if(_&1){let e=h();r(0,"div",7)(1,"div"),I(2),i(),r(3,"div")(4,"my-input-switch",8),Ce("ngModelChange",function(o){f(e);let C=T().$implicit,u=T(4);return ce(u.webNotifications[C],o)||(u.webNotifications[C]=o),E(o);}),M("ngModelChange",function(){f(e);let o=T().$implicit,C=T(4);return E(C.updateWebSetting(o,C.webNotifications[o]));}),i()(),p(5,Yi,2,3,"div",3),i();}if(_&2){let e=T().$implicit,n=T(4);a(2),Y(n.labelNotifications[e]),a(2),c("label",n.getWebLabel(e))("inputName","web-notification-"+e),le("ngModel",n.webNotifications[e]),a(),c("ngIf",n.emailEnabled);}}function wi(_,t){if(_&1&&(O(0),p(1,$i,6,5,"div",6),N()),_&2){let e=t.$implicit,n=T(4);a(),c("ngIf",n.hasUserRight(e));}}function Li(_,t){if(_&1&&(O(0),r(1,"div",5)(2,"div"),l(3,0),i(),r(4,"div"),l(5,1),i(),p(6,bi,2,0,"div",3),i(),p(7,wi,2,1,"ng-container",4),N()),_&2){let e=T().$implicit,n=T(2);a(3),ae(e.label),se(3),a(3),c("ngIf",n.emailEnabled),a(),c("ngForOf",e.keys);}}function Fi(_,t){if(_&1&&(O(0),p(1,Li,8,3,"ng-container",3),N()),_&2){let e=t.$implicit,n=T(2);a(),c("ngIf",n.hasNotificationsInGroup(e));}}function xi(_,t){if(_&1&&(r(0,"div"),p(1,Fi,2,1,"ng-container",4),i()),_&2){let e=T();a(),c("ngForOf",e.notificationSettingGroups);}}var Qe=class Qe{constructor(t,e,n){this.userNotificationService=t;this.serverService=e;this.notifier=n;s(this,"user");s(this,"notificationSettingGroups",[]);s(this,"emailNotifications",{});s(this,"webNotifications",{});s(this,"labelNotifications",{});s(this,"rightNotifications",{});s(this,"emailEnabled",!1);s(this,"savePreferences",Gn(this.savePreferencesImpl.bind(this),500));this.labelNotifications={newVideoFromSubscription:"\u4F86\u81EA\u60A8\u8A02\u95B1\u7684\u65B0\u5F71\u7247\u6216\u76F4\u64AD",newCommentOnMyVideo:"\u60A8\u5F71\u7247\u7684\u65B0\u7559\u8A00",abuseAsModerator:"\u65B0\u6FEB\u7528",videoAutoBlacklistAsModerator:"\u81EA\u52D5\u5C01\u9396\u7684\u5F71\u7247\u6B63\u5728\u7B49\u5F85\u5BE9\u95B1",blacklistOnMyVideo:"\u60A8\u7684\u5176\u4E2D\u4E00\u90E8\u5F71\u7247\u5DF2\u88AB\u5C01\u9396\uFF0F\u89E3\u9664\u5C01\u9396",myVideoPublished:"\u5F71\u7247\u5DF2\u767C\u4F48\uFF08\u5728\u8F49\u63DB\u7DE8\u78BC\uFF0F\u6392\u5B9A\u7684\u66F4\u65B0\u5F8C\uFF09",myVideoImportFinished:"\u5F71\u7247\u532F\u5165\u5B8C\u6210",newUserRegistration:"\u60A8\u7684\u7AD9\u81FA\u4E0A\u6709\u65B0\u4F7F\u7528\u8005\u8A3B\u518A",newFollow:"\u60A8\u6216\u60A8\u7684\u5176\u4E2D\u4E00\u500B\u983B\u9053\u6709\u4E86\u65B0\u7684\u8FFD\u8E64\u8005",commentMention:"\u67D0\u4EBA\u5728\u5F71\u7247\u7559\u8A00\u4E2D\u63D0\u53CA\u60A8",newInstanceFollower:"\u60A8\u7684\u7AD9\u81FA\u6709 1 \u500B\u65B0\u7684\u8FFD\u8E64\u8005",autoInstanceFollowing:"\u60A8\u7684\u7AD9\u81FA\u5DF2\u81EA\u52D5\u8FFD\u8E64\u5176\u4ED6\u7AD9\u81FA",abuseNewMessage:"\u6FEB\u7528\u56DE\u5831\u6536\u5230\u65B0\u8A0A\u606F",abuseStateChange:"\u60A8\u7684\u5176\u4E2D\u4E00\u4EFD\u6FEB\u7528\u56DE\u5831\u5DF2\u88AB\u677F\u4E3B\u63A5\u53D7\u6216\u56DE\u7D55",newPeerTubeVersion:"\u65B0\u7248\u7684 PeerTube \u5DF2\u53EF\u4F7F\u7528",newPluginVersion:"\u60A8\u7684\u5176\u4E2D\u4E00\u500B\u5916\u639B\u7A0B\u5F0F\uFF0F\u4F48\u666F\u4E3B\u984C\u5DF2\u6709\u65B0\u7248\u672C\u53EF\u7528",myVideoStudioEditionFinished:"\u5F71\u7247\u5DE5\u4F5C\u5BA4\u7DE8\u8F2F\u5DF2\u7D50\u675F",myVideoTranscriptionGenerated:"\u60A8\u7684\u5F71\u7247\u8F49\u9304\u5DF2\u7522\u751F"},this.notificationSettingGroups=[{label:"\u793E\u4EA4",keys:["newVideoFromSubscription","newFollow","commentMention"]},{label:"\u60A8\u7684\u5F71\u7247",keys:["newCommentOnMyVideo","blacklistOnMyVideo","myVideoPublished","myVideoImportFinished","myVideoStudioEditionFinished","myVideoTranscriptionGenerated"]},{label:"\u7BA1\u7406",keys:["abuseStateChange","abuseNewMessage","abuseAsModerator","videoAutoBlacklistAsModerator","newUserRegistration"]},{label:"\u7BA1\u7406",keys:["newInstanceFollower","autoInstanceFollowing","newPeerTubeVersion","newPluginVersion"]}],this.rightNotifications={abuseAsModerator:Me.MANAGE_ABUSES,videoAutoBlacklistAsModerator:Me.MANAGE_VIDEO_BLACKLIST,newUserRegistration:Me.MANAGE_USERS,newInstanceFollower:Me.MANAGE_SERVER_FOLLOW,autoInstanceFollowing:Me.MANAGE_CONFIGURATION,newPeerTubeVersion:Me.MANAGE_DEBUG,newPluginVersion:Me.MANAGE_DEBUG};}ngOnInit(){let t=this.serverService.getHTMLConfig();this.emailEnabled=t.email.enabled,this.loadNotificationSettings();}hasUserRight(t){let e=this.rightNotifications[t];return e?this.user.hasRight(e):!0;}hasNotificationsInGroup(t){return t.keys.some(e=>this.hasUserRight(e));}getWebLabel(t){return`Toggle web notification for "${this.labelNotifications[t]}"`;}getEmailLabel(t){return`Toggle email notification for "${this.labelNotifications[t]}"`;}updateEmailSetting(t,e){e===!0?this.user.notificationSettings[t]|=fe.EMAIL:this.user.notificationSettings[t]&=~fe.EMAIL,this.savePreferences();}updateWebSetting(t,e){e===!0?this.user.notificationSettings[t]|=fe.WEB:this.user.notificationSettings[t]&=~fe.WEB,this.savePreferences();}savePreferencesImpl(){this.userNotificationService.updateNotificationSettings(this.user.notificationSettings).subscribe({next:()=>{this.notifier.success("\u504F\u597D\u8A2D\u5B9A\u5DF2\u5132\u5B58",void 0,2e3);},error:t=>this.notifier.error(t.message)});}loadNotificationSettings(){for(let t of Ln(this.user.notificationSettings)){let e=this.user.notificationSettings[t];this.emailNotifications[t]=!!(e&fe.EMAIL),this.webNotifications[t]=!!(e&fe.WEB);}}};s(Qe,"\u0275fac",function(e){return new(e||Qe)(m(Zn),m(ie),m($));}),s(Qe,"\u0275cmp",A({type:Qe,selectors:[["my-account-notification-preferences"]],inputs:{user:"user"},standalone:!0,features:[S],decls:1,vars:1,consts:()=>{let t;t=""+"\uFFFD0\uFFFD"+"";let e;e="\u7DB2\u8DEF";let n;return n="\u96FB\u5B50\u90F5\u4EF6",[t,e,n,[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"header","notification-row"],["class","small notification-row",4,"ngIf"],[1,"small","notification-row"],[3,"ngModelChange","label","inputName","ngModel"]];},template:function(e,n){e&1&&p(0,xi,2,1,"div",3),e&2&&c("ngIf",n.webNotifications);},dependencies:[b,Mt,jn,X,G,pe],styles:[".notification-row[_ngcontent-%COMP%]{display:flex;align-items:center;border-bottom:1px solid rgba(0,0,0,.1)}.notification-row.header[_ngcontent-%COMP%]{font-weight:600;margin-top:10px}.notification-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:10px}.notification-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:350px}@media screen and (max-width: breakpoint(sm)){.notification-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:auto;flex-grow:1}}"]}));var Zt=Qe;var Uo=_=>({"input-error":_});function Gi(_,t){if(_&1&&(r(0,"div",16),I(1),i()),_&2){let e=T();a(),Y(e.error);}}function Xi(_,t){if(_&1&&(r(0,"div",17),I(1),i()),_&2){let e=T();a(),K(" ",e.formErrors["display-name"]," ");}}function ki(_,t){if(_&1&&(r(0,"div",17),I(1),i()),_&2){let e=T();a(),K(" ",e.formErrors.description," ");}}var Ze=class Ze extends Ne{constructor(e,n,o){super();this.formReactiveService=e;this.notifier=n;this.userService=o;s(this,"user",null);s(this,"error",null);}ngOnInit(){this.buildForm({username:null,"display-name":oo,description:io}),this.form.controls.username.disable(),this.form.patchValue({username:this.user.username,"display-name":this.user.account.displayName,description:this.user.account.description});}get instanceHost(){return window.location.host;}updateMyProfile(){let e=this.form.value["display-name"],n=this.form.value.description||null;this.error=null,this.userService.updateMyProfile({displayName:e,description:n}).subscribe({next:()=>{this.user.account.displayName=e,this.user.account.description=n,this.notifier.success("\u8A2D\u5B9A\u6A94\u5DF2\u66F4\u65B0\u3002");},error:o=>this.error=o.message});}};s(Ze,"\u0275fac",function(n){return new(n||Ze)(m(oe),m($),m(V));}),s(Ze,"\u0275cmp",A({type:Ze,selectors:[["my-account-profile"]],inputs:{user:"user"},standalone:!0,features:[H,S],decls:19,vars:13,consts:()=>{let e;e="\u5132\u5B58\u500B\u4EBA\u6A94\u6848";let n;n="\u4F7F\u7528\u8005\u540D\u7A31";let o;o="\u4EBA\u5011\u53EF\u4EE5\u4F7F\u7528 @"+"\uFFFD0\uFFFD"+"@"+"\uFFFD1\uFFFD"+" \u627E\u5230\u60A8 ";let C;C="\u986F\u793A\u540D\u7A31";let u;return u="\u63CF\u8FF0",[n,o,C,u,["class","alert alert-danger",4,"ngIf"],["role","form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","username"],["type","text","id","username","formControlName","username","readonly","",1,"form-control"],[1,"form-group-description"],["for","display-name"],["type","text","id","display-name","formControlName","display-name",1,"form-control",3,"ngClass"],["class","form-error","role","alert",4,"ngIf"],["for","description"],["id","description","formControlName","description",1,"form-control",3,"ngClass"],["type","submit","value",e,3,"disabled"],[1,"alert","alert-danger"],["role","alert",1,"form-error"]];},template:function(n,o){n&1&&(p(0,Gi,2,1,"div",4),r(1,"form",5),M("ngSubmit",function(){return o.updateMyProfile();}),r(2,"div",6)(3,"label",7),l(4,0),i(),d(5,"input",8),r(6,"div",9),l(7,1),i()(),r(8,"div",6)(9,"label",10),l(10,2),i(),d(11,"input",11),p(12,Xi,2,1,"div",12),i(),r(13,"div",6)(14,"label",13),l(15,3),i(),d(16,"textarea",14),p(17,ki,2,1,"div",12),i(),d(18,"input",15),i()),n&2&&(c("ngIf",o.error),a(),c("formGroup",o.form),a(6),ae(o.user.username)(o.instanceHost),se(7),a(4),c("ngClass",Se(9,Uo,o.formErrors["display-name"])),a(),c("ngIf",o.formErrors["display-name"]),a(4),c("ngClass",Se(11,Uo,o.formErrors.description)),a(),c("ngIf",o.formErrors.description),a(),c("disabled",!o.form.valid));},dependencies:[b,X,J,gt,G,Z,ne,ee,te,Ye],styles:["input#username[_ngcontent-%COMP%] + .muted[_ngcontent-%COMP%]{margin-top:5px}input[type=text][_ngcontent-%COMP%]{font-size:15px;padding:3px 15px;width:340px;max-width:340px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid var(--inputBorderColor);border-radius:3px;line-height:23px}input[type=text][_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}input[type=text][readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width: 380px){input[type=text][_ngcontent-%COMP%]{width:100%}}input[type=submit][_ngcontent-%COMP%]{margin-top:15px;padding:4px 13px;border:0;font-weight:600;border-radius:3px!important;text-align:center;cursor:pointer;font-size:15px;line-height:23px}input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-inline-end:.25rem;margin-inline-start:.25rem}input[type=submit][_ngcontent-%COMP%]:focus, input[type=submit][_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--mainColorLightest)}input[type=submit][_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]:active, input[type=submit][_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}input[type=submit][_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}input[type=submit][disabled][_ngcontent-%COMP%], input[type=submit].disabled[_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:var(--inputBorderColor)}input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:#fff}textarea[_ngcontent-%COMP%]{display:block;color:var(--textareaForegroundColor)!important;background-color:var(--textareaBackgroundColor)!important;height:150px;font-size:15px;padding:3px 15px;width:100%;max-width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid var(--inputBorderColor);border-radius:3px;line-height:23px}textarea[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}textarea[readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width: calc(100% + 40px)){textarea[_ngcontent-%COMP%]{width:100%}}"]}));var Jt=Ze;function Di(_,t){if(_&1){let e=h();r(0,"my-actor-avatar-edit",21),M("avatarChange",function(o){f(e);let C=T();return E(C.onAvatarChange(o));})("avatarDelete",function(){f(e);let o=T();return E(o.onAvatarDelete());}),i();}if(_&2){let e=T();c("avatars",e.user.account.avatars)("displayName",e.user.account.displayName)("username",e.user.username)("subscribers",e.user.account.followersCount);}}function zi(_,t){_&1&&(r(0,"div",15)(1,"div",11)(2,"h2"),l(3,6),i()(),r(4,"div",12),d(5,"my-account-change-password"),i()());}function Bi(_,t){if(_&1&&(r(0,"div",15)(1,"div",11)(2,"h2"),l(3,7),i()(),r(4,"div",12),d(5,"my-account-two-factor-button",14),i()()),_&2){let e=T();a(5),c("user",e.user);}}function Vi(_,t){if(_&1&&(r(0,"div",15)(1,"div",11)(2,"h2"),l(3,8),i()(),r(4,"div",12),d(5,"my-account-email-preferences",22)(6,"my-account-change-email"),i()()),_&2){let e=T();a(5),c("user",e.user);}}var Je=class Je{constructor(t,e,n,o){this.viewportScroller=t;this.userService=e;this.authService=n;this.notifier=o;s(this,"user");s(this,"lastScrollHash");}get userInformationLoaded(){return this.authService.userInformationLoaded;}ngOnInit(){this.user=this.authService.getUser();}ngAfterViewChecked(){window.location.hash&&window.location.hash!==this.lastScrollHash&&(this.viewportScroller.scrollToAnchor(window.location.hash.replace("#","")),this.lastScrollHash=window.location.hash);}onAvatarChange(t){this.userService.changeAvatar(t).subscribe({next:e=>{this.notifier.success("\u5927\u982D\u8CBC\u5DF2\u8B8A\u66F4\u3002"),this.user.updateAccountAvatar(e.avatars),this.user.account=an(this.user.account);},error:e=>Et({err:e,name:"\u5927\u982D\u7167",notifier:this.notifier})});}onAvatarDelete(){this.userService.deleteAvatar().subscribe({next:()=>{this.notifier.success("\u5DF2\u522A\u9664\u5927\u982D\u7167\u3002"),this.user.updateAccountAvatar(),this.user.account=an(this.user.account);},error:t=>this.notifier.error(t.message)});}};s(Je,"\u0275fac",function(e){return new(e||Je)(m(vn),m(V),m(F),m($));}),s(Je,"\u0275cmp",A({type:Je,selectors:[["my-account-settings"]],standalone:!0,features:[S],decls:39,vars:11,consts:()=>{let t;t="\u8A2D\u5B9A";let e;e="\u500B\u4EBA\u6A94\u6848\u8A2D\u5B9A";let n;n="\u4ECB\u9762";let o;o="\u5F71\u7247\u8A2D\u5B9A";let C;C="\u901A\u77E5";let u;u="\u5371\u96AA\u5340";let g;g="\u5BC6\u78BC";let P;P="\u5169\u6B65\u9A5F\u9A57\u8B49";let k;return k="\u96FB\u5B50\u90F5\u4EF6",[t,e,n,o,C,u,g,P,k,[1,"visually-hidden"],[1,"pt-two-cols","mt-3"],[1,"title-col"],[1,"content-col"],["class","d-block mb-3","actorType","account",3,"avatars","displayName","username","subscribers","avatarChange","avatarDelete",4,"ngIf"],[3,"user"],[1,"pt-two-cols","mt-5"],[3,"user","userInformationLoaded"],["id","video-settings",1,"anchor"],["id","notifications",1,"anchor"],["class","pt-two-cols mt-5",4,"ngIf"],[1,"pt-title-danger"],["actorType","account",1,"d-block","mb-3",3,"avatarChange","avatarDelete","avatars","displayName","username","subscribers"],[1,"d-block","mb-5",3,"user"]];},template:function(e,n){e&1&&(r(0,"h1",9),l(1,0),i(),r(2,"div",10)(3,"div",11)(4,"h2"),l(5,1),i()(),r(6,"div",12),p(7,Di,1,4,"my-actor-avatar-edit",13),d(8,"my-user-quota")(9,"my-account-profile",14),i()(),r(10,"div",15)(11,"div",11)(12,"h2"),l(13,2),i()(),r(14,"div",12),d(15,"my-user-interface-settings",16),i()(),r(16,"div",15)(17,"div",11),d(18,"div",17),r(19,"h2"),l(20,3),i()(),r(21,"div",12),d(22,"my-user-video-settings",16),i()(),r(23,"div",15)(24,"div",11),d(25,"div",18),r(26,"h2"),l(27,4),i()(),r(28,"div",12),d(29,"my-account-notification-preferences",14),i()(),p(30,zi,6,0,"div",19)(31,Bi,6,1,"div",19)(32,Vi,7,1,"div",19),r(33,"div",15)(34,"div",11)(35,"h2",20),l(36,5),i()(),r(37,"div",12),d(38,"my-account-danger-zone",14),i()()),e&2&&(a(7),c("ngIf",n.user==null?null:n.user.account),a(2),c("user",n.user),a(6),c("user",n.user)("userInformationLoaded",n.userInformationLoaded),a(7),c("user",n.user)("userInformationLoaded",n.userInformationLoaded),a(7),c("user",n.user),a(),c("ngIf",n.user.pluginAuth===null),a(),c("ngIf",n.user.pluginAuth===null),a(),c("ngIf",n.user.pluginAuth===null),a(6),c("user",n.user));},dependencies:[co,Io,Jt,qn,Qn,Zt,b,Qt,qt,jt,Ht,Wt],styles:[".content-col[_ngcontent-%COMP%]{max-width:500px}"]}));var en=Je;function Wi(_,t){_&1&&(r(0,"div",11),l(1,1),i());}function Hi(_,t){if(_&1){let e=h();O(0),r(1,"form",14),M("ngSubmit",function(){f(e);let o=T(2);return E(o.requestTwoFactor());}),r(2,"label",15),l(3,2),i(),r(4,"div",16),l(5,3),i(),d(6,"my-input-text",17)(7,"input",18),i(),N();}if(_&2){let e=T(2);a(),c("formGroup",e.formPassword),a(5),c("formError",e.formErrorsPassword["current-password"]),a(),c("disabled",!e.formPassword.valid);}}function Ki(_,t){if(_&1){let e=h();O(0),r(1,"p"),l(2,4),i(),d(3,"qrcode",19),r(4,"div"),l(5,5),i(),r(6,"div",20),I(7),i(),r(8,"form",21),M("ngSubmit",function(){f(e);let o=T(2);return E(o.confirmTwoFactor());}),r(9,"label",22),l(10,6),i(),r(11,"div",16),l(12,7),i(),d(13,"my-input-text",23)(14,"input",24),i(),N();}if(_&2){let e=T(2);a(3),c("qrdata",e.twoFactorURI)("width",256),a(4),Y(e.twoFactorSecret),a(),c("formGroup",e.formOTP),a(5),c("show",!0)("formError",e.formErrorsOTP["otp-token"]),a(),c("disabled",!e.formOTP.valid);}}function ji(_,t){if(_&1&&(r(0,"div",12),p(1,Hi,8,3,"ng-container",13)(2,Ki,15,7,"ng-container",13),i()),_&2){let e=T();a(),c("ngIf",e.step==="request"),a(),c("ngIf",e.step==="confirm");}}var et=class et{constructor(t,e,n,o,C){this.notifier=t;this.twoFactorService=e;this.formReactiveService=n;this.auth=o;this.router=C;s(this,"twoFactorAlreadyEnabled");s(this,"step","request");s(this,"twoFactorSecret");s(this,"twoFactorURI");s(this,"inPasswordStep",!0);s(this,"formPassword");s(this,"formErrorsPassword");s(this,"formOTP");s(this,"formErrorsOTP");s(this,"user");s(this,"requestToken");}ngOnInit(){this.buildPasswordForm(),this.buildOTPForm(),this.user=this.auth.getUser(),this.twoFactorAlreadyEnabled=this.user.twoFactorEnabled;}requestTwoFactor(){this.twoFactorService.requestTwoFactor({userId:this.user.id,currentPassword:this.formPassword.value["current-password"]}).subscribe({next:({otpRequest:t})=>{this.requestToken=t.requestToken,this.twoFactorURI=t.uri,this.twoFactorSecret=t.secret.replace(/(.{4})/g,"$1 ").trim(),this.step="confirm";},error:t=>this.notifier.error(t.message)});}confirmTwoFactor(){this.twoFactorService.confirmTwoFactorRequest({userId:this.user.id,requestToken:this.requestToken,otpToken:this.formOTP.value["otp-token"]}).subscribe({next:()=>{this.notifier.success("\u5169\u6B65\u9A5F\u9A57\u8B49\u5DF2\u555F\u7528\u3002"),this.auth.refreshUserInformation(),this.router.navigateByUrl("/my-account/settings");},error:t=>this.notifier.error(t.message)});}buildPasswordForm(){let{form:t,formErrors:e}=this.formReactiveService.buildForm({"current-password":It});this.formPassword=t,this.formErrorsPassword=e;}buildOTPForm(){let{form:t,formErrors:e}=this.formReactiveService.buildForm({"otp-token":to});this.formOTP=t,this.formErrorsOTP=e;}};s(et,"\u0275fac",function(e){return new(e||et)(m($),m(Fe),m(oe),m(F),m(hn));}),s(et,"\u0275cmp",A({type:et,selectors:[["my-account-two-factor"]],standalone:!0,features:[S],decls:6,vars:2,consts:()=>{let t;t="\u5169\u6B65\u9A5F\u9A57\u8B49";let e;e="\u5169\u6B65\u9A5F\u9A57\u8B49\u5DF2\u555F\u7528\u3002";let n;n="\u76EE\u524D\u7684\u5BC6\u78BC";let o;o="\u78BA\u8A8D";let C;C="\u60A8\u7684\u5BC6\u78BC";let u;u="\u78BA\u8A8D\u60A8\u7684\u5BC6\u78BC\u4EE5\u555F\u7528\u5169\u6B65\u9A5F\u9A57\u8B49";let g;g="\u78BA\u8A8D";let P;P="\u5728\u60A8\u624B\u6A5F\u4E0A\u7684 TOTP \u61C9\u7528\u7A0B\u5F0F\u6383\u63CF\u6B64 QR code\u3002\u6B64\u61C9\u7528\u7A0B\u5F0F\u5C07\u6703\u7522\u751F\u60A8\u5728\u767B\u5165\u6642\u5FC5\u9808\u8F38\u5165\u7684\u6B0A\u6756\u3002";let k;k="\u82E5\u7121\u6CD5\u6383\u63CF QR code \u800C\u9700\u8981\u624B\u52D5\u8F38\u5165\uFF0C\u9019\u88E1\u662F\u7D14\u6587\u5B57\u5BC6\u78BC\uFF1A";let v;v="\u5169\u6B65\u9A5F\u4EE3\u78BC";let j;return j="\u8F38\u5165\u60A8\u7684\u9A57\u8B49\u7A0B\u5F0F\u7522\u751F\u7684\u4EE3\u78BC\u4EE5\u78BA\u8A8D",[t,e,C,u,P,k,v,j,["iconName","cog","aria-hidden","true"],["class","root already-enabled",4,"ngIf"],["class","root",4,"ngIf"],[1,"root","already-enabled"],[1,"root"],[4,"ngIf"],["role","form",3,"ngSubmit","formGroup"],["for","current-password"],[1,"form-group-description"],["formControlName","current-password","inputId","current-password","placeholder",n,"autocomplete","current-password",3,"formError"],["type","submit","value",o,1,"peertube-button","orange-button","mt-3",3,"disabled"],["level","Q",3,"qrdata","width"],[1,"secret-plain-text"],["role","form",1,"mt-3",3,"ngSubmit","formGroup"],["for","otp-token"],["formControlName","otp-token","inputId","otp-token","autocomplete","otp-token",3,"show","formError"],["type","submit","value",g,1,"peertube-button","orange-button","mt-3",3,"disabled"]];},template:function(e,n){e&1&&(r(0,"h1"),d(1,"my-global-icon",8),O(2),l(3,0),N(),i(),p(4,Wi,2,0,"div",9)(5,ji,3,2,"div",10)),e&2&&(a(4),c("ngIf",n.twoFactorAlreadyEnabled===!0),a(),c("ngIf",n.twoFactorAlreadyEnabled===!1));},dependencies:[w,b,X,J,G,Z,ne,ee,te,Oe,vo,Ro],styles:[".root[_ngcontent-%COMP%]{max-width:600px}.secret-plain-text[_ngcontent-%COMP%]{font-family:monospace;font-size:.9rem}qrcode[_ngcontent-%COMP%]{display:inline-block;margin:auto}"]}));var tn=et;var tt=class tt{};s(tt,"\u0275fac",function(e){return new(e||tt)();}),s(tt,"\u0275cmp",A({type:tt,selectors:[["ng-component"]],standalone:!0,features:[S],decls:10,vars:0,consts:()=>{let t;t="\u60A8\u7684\u76E3\u8996\u6587\u5B57\u6E05\u55AE";let e;e="\u5305\u542B\u4EFB\u4F55\u76E3\u8996\u6587\u5B57\u7684\u7559\u8A00\u90FD\u6703\u81EA\u52D5\u4EE5\u6E05\u55AE\u540D\u7A31\u6A19\u8A18\u3002";let n;return n="\u9019\u4E9B\u81EA\u52D5\u6A19\u7C64\u53EF\u7528\u65BC\u904E\u6FFE\u7559\u8A00\u6216"+"\uFFFD#8\uFFFD"+"\u81EA\u52D5\u5C01\u9396"+"\uFFFD/#8\uFFFD"+"\u5B83\u5011\u3002",[t,e,n,["iconName","no","aria-hidden","true"],[1,"d-block"],[1,"d-block","mb-3"],["routerLink","/my-account/auto-tag-policies"],["mode","user"]];},template:function(e,n){e&1&&(r(0,"h1"),d(1,"my-global-icon",3),O(2),l(3,0),N(),i(),r(4,"em",4),l(5,1),i(),r(6,"em",5),z(7,2),d(8,"a",6),B(),i(),d(9,"my-watched-words-list-admin-owner",7));},dependencies:[w,Oo,Nt],encapsulation:2}));var nn=tt;var qi=_=>({"sub-menu-offset-content":_}),nt=class nt{constructor(t,e){this.pluginService=t;this.screenService=e;s(this,"menuEntries",[]);s(this,"user");}get isBroadcastMessageDisplayed(){return this.screenService.isBroadcastMessageDisplayed;}ngOnInit(){this.pluginService.ensurePluginsAreLoaded("my-account").then(()=>this.buildMenu());}buildMenu(){let t=this.pluginService.getAllRegisteredClientRoutesForParent("/my-account")||{};this.menuEntries=[{label:"\u8A2D\u5B9A",routerLink:"/my-account/settings"},{label:"\u901A\u77E5",routerLink:"/my-account/notifications"},{label:"\u532F\u5165/\u532F\u51FA",routerLink:"/my-account/import-export"},{label:"\u61C9\u7528\u7A0B\u5F0F",routerLink:"/my-account/applications"},{label:"\u7BA1\u7406",children:[{label:"\u5DF2\u975C\u97F3\u7684\u5E33\u865F",routerLink:"/my-account/blocklist/accounts",iconName:"user-x"},{label:"\u5DF2\u975C\u97F3\u4F3A\u670D\u5668",routerLink:"/my-account/blocklist/servers",iconName:"peertube-x"},{label:"\u6FEB\u7528\u56DE\u5831",routerLink:"/my-account/abuses",iconName:"flag"},{label:"\u5C0D\u60A8\u5F71\u7247\u7684\u7559\u8A00",routerLink:"/my-account/videos/comments",iconName:"message-circle"},{label:"\u5DF2\u89C0\u770B\u7684\u5F71\u7247",routerLink:"/my-account/watched-words/list",iconName:"eye-open"},{label:"\u81EA\u52D5\u6A19\u7C64\u653F\u7B56",routerLink:"/my-account/auto-tag-policies",iconName:"no"}]},...Object.values(t).map(e=>{var n;return{label:(n=e.menuItem)==null?void 0:n.label,routerLink:"/my-account/p/"+e.route};})];}};s(nt,"\u0275fac",function(e){return new(e||nt)(m(Hn),m(Vn));}),s(nt,"\u0275cmp",A({type:nt,selectors:[["ng-component"]],standalone:!0,features:[S],decls:4,vars:4,consts:[[1,"root"],[3,"menuEntries"],[1,"margin-content","pb-5",3,"ngClass"]],template:function(e,n){e&1&&(r(0,"div",0),d(1,"my-top-menu-dropdown",1),r(2,"div",2),d(3,"router-outlet"),i()()),e&2&&(a(),c("menuEntries",n.menuEntries),a(),c("ngClass",Se(2,qi,!n.isBroadcastMessageDisplayed)));},dependencies:[No,Ye,yn],styles:[".root[_ngcontent-%COMP%]{flex-direction:column;width:100%}.root[_ngcontent-%COMP%]     h1{font-size:1.3rem;border-bottom:2px solid #E5E5E5;padding-bottom:15px;margin-bottom:30px}.root[_ngcontent-%COMP%]     h1>span>my-global-icon, .root[_ngcontent-%COMP%]     h1>my-global-icon{width:24px;height:24px;position:relative;top:-2px;margin-inline-end:.625rem}.root[_ngcontent-%COMP%]     h1 .pt-badge{vertical-align:top;margin-inline-start:.4375rem}.root[_ngcontent-%COMP%] > my-top-menu-dropdown[_ngcontent-%COMP%]:nth-child(1){flex-grow:1}"]}));var on=nt;var Hs=[{path:"",component:on,providers:[re,Fe,lo,ro,Co,_o,go,Mo],resolve:{user:yo},canActivateChild:[Bn],children:[{path:"",redirectTo:"settings",pathMatch:"full"},{path:"settings",component:en,data:{meta:{title:"\u5E33\u865F\u8A2D\u5B9A"}}},{path:"two-factor-auth",component:tn,data:{meta:{title:"\u5169\u6B65\u9A5F\u9A57\u8B49"}}},{path:"video-channels",redirectTo:"/my-library/video-channels",pathMatch:"full"},{path:"video-playlists",redirectTo:"/my-library/video-playlists",pathMatch:"full"},{path:"video-playlists/create",redirectTo:"/my-library/video-playlists/create",pathMatch:"full"},{path:"video-playlists/:videoPlaylistId",redirectTo:"/my-library/video-playlists/:videoPlaylistId",pathMatch:"full"},{path:"video-playlists/update/:videoPlaylistId",redirectTo:"/my-library/video-playlists/update/:videoPlaylistId",pathMatch:"full"},{path:"videos",redirectTo:"/my-library/videos",pathMatch:"full"},{path:"video-imports",redirectTo:"/my-library/video-imports",pathMatch:"full"},{path:"subscriptions",redirectTo:"/my-library/subscriptions",pathMatch:"full"},{path:"ownership",redirectTo:"/my-library/ownership",pathMatch:"full"},{path:"blocklist/accounts",component:Gt,data:{meta:{title:"\u5DF2\u975C\u97F3\u7684\u5E33\u865F"}}},{path:"blocklist/servers",component:Xt,data:{meta:{title:"\u5DF2\u975C\u97F3\u4F3A\u670D\u5668"}}},{path:"history/videos",redirectTo:"/my-library/history/videos",pathMatch:"full"},{path:"notifications",component:Vt,data:{meta:{title:"\u901A\u77E5"}}},{path:"abuses",component:wt,data:{meta:{title:"\u6211\u7684\u6FEB\u7528\u56DE\u5831"}}},{path:"applications",component:Lt,data:{meta:{title:"\u61C9\u7528\u7A0B\u5F0F"}}},{path:"videos/comments",component:kt,data:{meta:{title:"\u5C0D\u60A8\u5F71\u7247\u7684\u7559\u8A00"}}},{path:"import-export",component:Bt,canDeactivate:[Dn],data:{meta:{title:"\u532F\u5165/\u532F\u51FA"}}},{path:"watched-words/list",component:nn,data:{meta:{title:"\u60A8\u7684\u76E3\u8996\u6587\u5B57"}}},{path:"auto-tag-policies",component:xt,data:{meta:{title:"\u60A8\u7684\u81EA\u52D5\u6A19\u7C64\u653F\u7B56"}}},{path:"p",children:[{path:"**",component:So,data:{parentRoute:"/my-account",pluginScope:"my-account"}}]}]}];export{Hs as default};/**i18n:2f710d33ac9c4f1483429afcadbb48fcf333aac524700807e70179670fe63b48*/