import{$ as w,B as i,C as p,D as h,Gc as u,Kc as F,Pd as f,Ue as v,Y as m,gg as P,i as n,kg as E}from"./chunk-4A7FW7VV.js";import{j as A}from"./chunk-K6ICEIKK.js";var l=class l{constructor(r,o,t){this.authHttp=r;this.restService=o;this.restExtractor=t;}getFollowing(r){let{pagination:o,sort:t,search:a,state:s,actorType:c}=r,e=new u();return e=this.restService.addRestGetParams(e,o,t),a&&(e=this.restService.addObjectParams(e,this.parseFollowsListFilters(a))),s&&(e=e.append("state",s)),c&&(e=e.append("actorType",c)),this.authHttp.get(l.BASE_APPLICATION_URL+"/following",{params:e}).pipe(i(d=>this.restExtractor.handleError(d)));}getFollowers(r){let{pagination:o,sort:t,search:a,state:s,actorType:c}=r,e=new u();return e=this.restService.addRestGetParams(e,o,t),a&&(e=this.restService.addObjectParams(e,this.parseFollowsListFilters(a))),s&&(e=e.append("state",s)),c&&(e=e.append("actorType",c)),this.authHttp.get(l.BASE_APPLICATION_URL+"/followers",{params:e}).pipe(i(d=>this.restExtractor.handleError(d)));}follow(r){let o={handles:r.filter(t=>t.includes("@")),hosts:r.filter(t=>!t.includes("@"))};return this.authHttp.post(l.BASE_APPLICATION_URL+"/following",o).pipe(i(t=>this.restExtractor.handleError(t)));}unfollow(r){let o=f(r);return n(o).pipe(h(t=>{let a=t.following.name+"@"+t.following.host;return this.authHttp.delete(l.BASE_APPLICATION_URL+"/following/"+a);}),p(),i(t=>this.restExtractor.handleError(t)));}acceptFollower(r){let o=f(r);return n(o).pipe(h(t=>{let a=t.follower.name+"@"+t.follower.host;return this.authHttp.post(`${l.BASE_APPLICATION_URL}/followers/${a}/accept`,{});}),p(),i(t=>this.restExtractor.handleError(t)));}rejectFollower(r){let o=f(r);return n(o).pipe(h(t=>{let a=t.follower.name+"@"+t.follower.host;return this.authHttp.post(`${l.BASE_APPLICATION_URL}/followers/${a}/reject`,{});}),p(),i(t=>this.restExtractor.handleError(t)));}removeFollower(r){let o=f(r);return n(o).pipe(h(t=>{let a=t.follower.name+"@"+t.follower.host;return this.authHttp.delete(`${l.BASE_APPLICATION_URL}/followers/${a}`);}),p(),i(t=>this.restExtractor.handleError(t)));}buildFollowsListFilters(){return[{title:"Advanced filters",children:[{value:"state:accepted",label:"Accepted follows"},{value:"state:rejected",label:"Rejected follows"},{value:"state:pending",label:"Pending follows"}]}];}parseFollowsListFilters(r){return this.restService.parseQueryStringFilter(r,{state:{prefix:"state:"}});}};A(l,"BASE_APPLICATION_URL",v.apiUrl+"/api/v1/server"),A(l,"\u0275fac",function(o){return new(o||l)(w(F),w(E),w(P));}),A(l,"\u0275prov",m({token:l,factory:l.Éµfac}));var L=l;export{L as a};/**i18n:2f710d33ac9c4f1483429afcadbb48fcf333aac524700807e70179670fe63b48*/