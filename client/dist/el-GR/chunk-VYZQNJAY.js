import{b as T}from"./chunk-F4NNW7U6.js";import{c as D}from"./chunk-GP5LX4CA.js";import{b as A}from"./chunk-RBCGTDIC.js";import{$ as o,B as O,Gc as y,Kc as V,R as p,Ue as P,Y as v,gg as S,j as g,kg as b,m,mf as u}from"./chunk-4A7FW7VV.js";import{j as i}from"./chunk-K6ICEIKK.js";var d=class d{constructor(e,r,s,l,n){this.authHttp=e;this.restExtractor=r;this.restService=s;this.videoService=l;this.playlistService=n}searchVideos(e){let{search:r,uuids:s,componentPagination:l,advancedSearch:n,skipCount:c}=e;if((n==null?void 0:n.resultType)!==void 0&&n.resultType!=="videos")return g({total:0,data:[]});let h=d.BASE_SEARCH_URL+"videos",a;l&&(a=this.restService.componentToRestPagination(l));let t=new y;if(t=this.restService.addRestGetParams(t,a),r&&(t=t.append("search",r)),c===!0&&(t=t.append("skipCount",!0)),s&&(t=this.restService.addArrayParams(t,"uuids",s)),n){let f=n.toVideosAPIObject();t=this.restService.addObjectParams(t,f)}return this.authHttp.get(h,{params:t}).pipe(p(f=>this.videoService.extractVideos(f)),O(f=>this.restExtractor.handleError(f)))}searchVideoChannels(e){let{search:r,advancedSearch:s,componentPagination:l,handles:n}=e;if((s==null?void 0:s.resultType)!==void 0&&s.resultType!=="channels")return g({total:0,data:[]});let c=d.BASE_SEARCH_URL+"video-channels",h;l&&(h=this.restService.componentToRestPagination(l));let a=new y;if(a=this.restService.addRestGetParams(a,h),r&&(a=a.append("search",r)),n&&(a=this.restService.addArrayParams(a,"handles",n)),s){let t=s.toChannelAPIObject();a=this.restService.addObjectParams(a,t)}return this.authHttp.get(c,{params:a}).pipe(m(t=>A.extractVideoChannels(t)),O(t=>this.restExtractor.handleError(t)))}searchVideoPlaylists(e){let{search:r,advancedSearch:s,componentPagination:l,uuids:n}=e;if((s==null?void 0:s.resultType)!==void 0&&s.resultType!=="playlists")return g({total:0,data:[]});let c=d.BASE_SEARCH_URL+"video-playlists",h;l&&(h=this.restService.componentToRestPagination(l));let a=new y;if(a=this.restService.addRestGetParams(a,h),r&&(a=a.append("search",r)),n&&(a=this.restService.addArrayParams(a,"uuids",n)),s){let t=s.toPlaylistAPIObject();a=this.restService.addObjectParams(a,t)}return this.authHttp.get(c,{params:a}).pipe(p(t=>this.playlistService.extractPlaylists(t)),O(t=>this.restExtractor.handleError(t)))}};i(d,"BASE_SEARCH_URL",P.apiUrl+"/api/v1/search/"),i(d,"\u0275fac",function(r){return new(r||d)(o(V),o(S),o(b),o(D),o(T))}),i(d,"\u0275prov",v({token:d,factory:d.\u0275fac}));var x=d;var M=class{constructor(e){i(this,"startDate");i(this,"endDate");i(this,"originallyPublishedStartDate");i(this,"originallyPublishedEndDate");i(this,"nsfw");i(this,"categoryOneOf");i(this,"licenceOneOf");i(this,"languageOneOf");i(this,"tagsOneOf");i(this,"tagsAllOf");i(this,"durationMin");i(this,"durationMax");i(this,"isLive");i(this,"host");i(this,"sort");i(this,"searchTarget");i(this,"resultType");i(this,"excludeAlreadyWatched");e&&(this.startDate=e.startDate||void 0,this.endDate=e.endDate||void 0,this.originallyPublishedStartDate=e.originallyPublishedStartDate||void 0,this.originallyPublishedEndDate=e.originallyPublishedEndDate||void 0,this.nsfw=e.nsfw||void 0,this.isLive=e.isLive||void 0,this.categoryOneOf=e.categoryOneOf||void 0,this.licenceOneOf=e.licenceOneOf||void 0,this.languageOneOf=e.languageOneOf||void 0,this.tagsOneOf=u(e.tagsOneOf),this.tagsAllOf=u(e.tagsAllOf),this.durationMin=e.durationMin?parseInt(e.durationMin,10):void 0,this.durationMax=e.durationMax?parseInt(e.durationMax,10):void 0,this.host=e.host||void 0,this.searchTarget=e.searchTarget||void 0,this.resultType=e.resultType||void 0,this.excludeAlreadyWatched=e.excludeAlreadyWatched||void 0,!this.resultType&&this.hasVideoFilter()&&(this.resultType="videos"),isNaN(this.durationMin)&&(this.durationMin=void 0),isNaN(this.durationMax)&&(this.durationMax=void 0),this.sort=e.sort||"-match")}containsValues(){return this.size()!==0}reset(){this.startDate=void 0,this.endDate=void 0,this.originallyPublishedStartDate=void 0,this.originallyPublishedEndDate=void 0,this.nsfw=void 0,this.categoryOneOf=void 0,this.licenceOneOf=void 0,this.languageOneOf=void 0,this.tagsOneOf=void 0,this.tagsAllOf=void 0,this.durationMin=void 0,this.durationMax=void 0,this.isLive=void 0,this.host=void 0,this.sort="-match"}toUrlObject(){return{startDate:this.startDate,endDate:this.endDate,originallyPublishedStartDate:this.originallyPublishedStartDate,originallyPublishedEndDate:this.originallyPublishedEndDate,nsfw:this.nsfw,categoryOneOf:this.categoryOneOf,licenceOneOf:this.licenceOneOf,languageOneOf:this.languageOneOf,tagsOneOf:this.tagsOneOf,tagsAllOf:this.tagsAllOf,durationMin:this.durationMin,durationMax:this.durationMax,isLive:this.isLive,host:this.host,sort:this.sort,searchTarget:this.searchTarget,resultType:this.resultType,excludeAlreadyWatched:this.excludeAlreadyWatched}}toVideosAPIObject(){let e;return this.isLive&&(e=this.isLive==="true"),{startDate:this.startDate,endDate:this.endDate,originallyPublishedStartDate:this.originallyPublishedStartDate,originallyPublishedEndDate:this.originallyPublishedEndDate,nsfw:this.nsfw,categoryOneOf:u(this.categoryOneOf),licenceOneOf:u(this.licenceOneOf),languageOneOf:u(this.languageOneOf),tagsOneOf:this.tagsOneOf,tagsAllOf:this.tagsAllOf,durationMin:this.durationMin,durationMax:this.durationMax,host:this.host,isLive:e,sort:this.sort,searchTarget:this.searchTarget,excludeAlreadyWatched:this.excludeAlreadyWatched}}toPlaylistAPIObject(){return{host:this.host,searchTarget:this.searchTarget}}toChannelAPIObject(){return{host:this.host,searchTarget:this.searchTarget}}size(){let e=0;return(this.isValidValue(this.startDate)||this.isValidValue(this.endDate))&&e++,(this.isValidValue(this.originallyPublishedStartDate)||this.isValidValue(this.originallyPublishedEndDate))&&e++,this.isValidValue(this.nsfw)&&e++,this.isValidValue(this.categoryOneOf)&&e++,this.isValidValue(this.licenceOneOf)&&e++,this.isValidValue(this.languageOneOf)&&e++,this.isValidValue(this.tagsOneOf)&&e++,this.isValidValue(this.tagsAllOf)&&e++,(this.isValidValue(this.durationMin)||this.isValidValue(this.durationMax))&&e++,this.isValidValue(this.isLive)&&e++,this.isValidValue(this.host)&&e++,this.isValidValue(this.resultType)&&e++,e}isValidValue(e){return!(e===void 0||e===""||Array.isArray(e)&&e.length===0)}hasVideoFilter(){return this.startDate!==void 0||this.endDate!==void 0||this.originallyPublishedStartDate!==void 0||this.originallyPublishedEndDate!==void 0||this.nsfw!==void 0||this.categoryOneOf!==void 0||this.licenceOneOf!==void 0||this.languageOneOf!==void 0||this.tagsOneOf!==void 0||this.tagsAllOf!==void 0||this.durationMin!==void 0||this.durationMax!==void 0||this.isLive!==void 0}};export{M as a,x as b};
/**i18n:2f710d33ac9c4f1483429afcadbb48fcf333aac524700807e70179670fe63b48*/
