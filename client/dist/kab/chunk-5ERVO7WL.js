import{g as Oe,h as Pe}from"./chunk-AJL6C324.js";import{a as Ne}from"./chunk-T4ZRIFMF.js";import{a as fe}from"./chunk-3NN6IC32.js";import{a as ue}from"./chunk-UOVZQ5E7.js";import{a as Me}from"./chunk-NAT3JZF7.js";import{a as ve}from"./chunk-LQ3CTFST.js";import{a as Ce}from"./chunk-SPKU4WOP.js";import"./chunk-JPIRBOZL.js";import"./chunk-EBTUWTIZ.js";import{a as he}from"./chunk-GOWSOB6U.js";import{b as ge}from"./chunk-RBCGTDIC.js";import"./chunk-DPQ4XGHN.js";import"./chunk-XEFO2OX5.js";import{a as pe}from"./chunk-WRZZAQTV.js";import"./chunk-AHXSH3AS.js";import{Ab as L,Ca as r,Da as _,Ea as X,Gf as ye,Ia as j,Ib as J,Jb as K,K as Y,Kb as f,Oa as g,Of as ce,R as $,Rd as ae,Sa as c,Sb as Z,Sd as re,Tb as ee,Xf as se,Ye as le,ab as o,ac as ne,ba as F,bb as l,bd as oe,c as V,cb as p,da as k,db as E,eb as S,fg as _e,gb as U,hg as de,ig as me,kb as h,la as H,lb as b,m as D,ma as B,mb as y,nb as I,ob as A,pb as C,qc as te,rc as ie,sa as z,ua as G,ub as W,wb as Q,xb as q,zb as v}from"./chunk-4A7FW7VV.js";import"./chunk-BERSDMCF.js";import"./chunk-ONF7AOBQ.js";import{g as be,j as a,k as T}from"./chunk-K6ICEIKK.js";var Ee=be(ye());var Ae=(0,Ee.default)("peertube:main:DeferLoadingDirective"),u=class u{constructor(t,e,n){this.el=t;this.viewContainer=e;this.cd=n;a(this,"template");a(this,"loaded",new z());a(this,"view");a(this,"observer");}ngAfterViewInit(){if(this.hasIncompatibleBrowser())return this.load();this.observer=new IntersectionObserver(t=>{let e=t[0];!e.isIntersecting||e.target!==this.el.nativeElement||(this.observer.unobserve(this.el.nativeElement),this.load());},{threshold:.1}),this.observer.observe(this.el.nativeElement);}load(){this.isLoaded()||(Ae("Loading component"),this.viewContainer.clear(),this.view=this.viewContainer.createEmbeddedView(this.template,{},0),this.loaded.emit(),this.cd.detectChanges());}isLoaded(){return this.view!=null;}ngOnDestroy(){this.view=null,this.observer&&this.observer.disconnect();}hasIncompatibleBrowser(){return!("IntersectionObserver"in window);}};a(u,"\u0275fac",function(e){return new(e||u)(_(G),_(j),_(ne));}),a(u,"\u0275dir",k({type:u,selectors:[["","myDeferLoading",""]],contentQueries:function(e,n,d){if(e&1&&W(d,X,5),e&2){let s;Q(s=q())&&(n.template=s.first);}},outputs:{loaded:"loaded"},standalone:!0}));var R=u;var Se=i=>["/c",i],Le=()=>["/my-library","followers"],Re=i=>({search:i}),xe=i=>["/manage/update",i];function we(i,t){if(i&1&&(o(0,"span",20),v(1),l()),i&2){let e=C();r(),L(e.pagination.totalItems);}}function Te(i,t){i&1&&(o(0,"div",21),h(1,3),l());}function Ve(i,t){if(i&1&&p(0,"p-chart",38),i&2){let e=C(3).index,n=C();c("data",n.videoChannelsChartData[e])("options",n.chartOptions);}}function De(i,t){if(i&1&&g(0,Ve,1,2,"p-chart",37),i&2){let e=C(2).index,n=C();c("ngIf",n.chartOptions&&n.videoChannelsChartData&&n.videoChannelsChartData[e]);}}function Ye(i,t){i&1&&(o(0,"div",35)(1,"div",36),g(2,De,1,1,"ng-template"),l()());}function $e(i,t){if(i&1){let e=U();o(0,"div",22),p(1,"my-actor-avatar",23),o(2,"div",24)(3,"a",25)(4,"div",26),v(5),l(),o(6,"div",27),v(7),l()(),o(8,"a",28),h(9,4),l(),o(10,"div",29)(11,"span"),h(12,5),l(),o(13,"span",30),v(14,"\xB7"),l(),o(15,"span"),h(16,6),Z(17,"myNumberFormatter"),l()(),o(18,"div",31),p(19,"my-edit-button",32),o(20,"my-delete-button",33),A("click",function(){let d=H(e).$implicit,s=C();return B(s.deleteVideoChannel(d));}),l()(),g(21,Ye,3,0,"div",34),l()();}if(i&2){let e=t.$implicit,n=C();r(),c("actor",e)("internalHref",f(17,Se,e.nameWithHost)),r(2),c("routerLink",f(19,Se,e.nameWithHost)),r(2),L(e.displayName),r(2),L(e.nameWithHost),r(),c("routerLink",K(21,Le))("queryParams",f(22,Re,"channel:"+e.name)),r(),b(e.followersCount)(e.followersCount),y(9),r(3),b(e.videosCount)(e.videosCount),y(12),r(5),b(e.totalViews)(ee(17,15,e.totalViews)),y(16),r(2),c("ptRouterLink",f(24,xe,e.nameWithHost)),r(2),c("ngIf",!n.isInSmallView);}}var M=class M{constructor(t,e,n,d,s){this.authService=t;this.notifier=e;this.confirmService=n;this.videoChannelService=d;this.screenService=s;a(this,"videoChannels",[]);a(this,"videoChannelsChartData");a(this,"chartOptions");a(this,"search");a(this,"onChannelDataSubject",new V());a(this,"pagination",{currentPage:1,itemsPerPage:10,totalItems:null});a(this,"pagesDone",new Set());}get isInSmallView(){return this.screenService.isInSmallView();}onSearch(t){this.search=t,this.pagination.currentPage=1,this.videoChannels=[],this.loadMoreVideoChannels();}deleteVideoChannel(t){return T(this,null,function*(){(yield this.confirmService.confirmWithExpectedInput("Teb\u0263i\u1E0D s tidet ad t-tekkse\u1E0D "+t.displayName+"? "+"<br />"+le("It will delete {count, plural, =1 {1 video} other {{count} videos}} uploaded in this channel, and you will not be able to create another channel or account with the same name ("+t.name+")!",{count:t.videosCount}),"Please type the name of the video channel ("+t.name+") to confirm",t.name,"Kkes"))!==!1&&this.videoChannelService.removeVideoChannel(t).subscribe({next:()=>{this.videoChannels=this.videoChannels.filter(n=>n.id!==t.id),this.notifier.success("Abadu n tvidyut "+t.displayName+" yettwakkes.");},error:n=>this.notifier.error(n.message)});});}onNearOfBottom(){me(this.pagination)&&(this.pagination.currentPage+=1,this.loadMoreVideoChannels());}loadMoreVideoChannels(){if(!this.pagesDone.has(this.pagination.currentPage))return this.pagesDone.add(this.pagination.currentPage),this.authService.userInformationLoaded.pipe(Y(),D(()=>({account:this.authService.getUser().account,withStats:!0,search:this.search,componentPagination:this.pagination,sort:"-updatedAt"})),$(t=>this.videoChannelService.listAccountVideoChannels(t))).subscribe(t=>{this.videoChannels=this.videoChannels.concat(t.data),this.pagination.totalItems=t.total,this.videoChannelsChartData=this.videoChannels.map(e=>({labels:e.viewsPerDay.map(n=>n.date.toLocaleDateString()),datasets:[{label:"Time\u1E93riyin deg ass",data:e.viewsPerDay.map(n=>n.views),fill:!1,borderColor:"#c6c6c6"}]})),this.buildChartOptions(),this.onChannelDataSubject.next(t.data);});}buildChartOptions(){let t=Math.min(...this.videoChannels.map(n=>re(n.viewsPerDay,"views").views)),e=Math.max(...this.videoChannels.map(n=>ae(n.viewsPerDay,"views").views));this.chartOptions={plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1,external:function({tooltip:n}){n&&(n.options.displayColors=!1);},callbacks:{label:n=>`${n.formattedValue} views`}}},scales:{x:{display:!1},y:{display:!1,min:Math.max(0,t-3*e/100),max:Math.max(1,e)}},layout:{padding:{left:15,right:15,top:10,bottom:0}},elements:{point:{radius:0}},hover:{mode:"index",intersect:!1}};}};a(M,"\u0275fac",function(e){return new(e||M)(_(de),_(_e),_(ce),_(ge),_(se));}),a(M,"\u0275cmp",F({type:M,selectors:[["ng-component"]],standalone:!0,features:[J],decls:21,vars:5,consts:()=>{let t;t="Ibuda-inu";let e;e="My synchronizations";let n;n="Rnu abadu n tvidyut";let d;d="No channel found.";let s;s="Asebter n ubadu";let O;O="{VAR_PLURAL, plural, =0 {No subscribers} =1 {1 subscriber} other {{INTERPOLATION} subscribers}}",O=I(O,{INTERPOLATION:"\uFFFD1\uFFFD",VAR_PLURAL:"\uFFFD0\uFFFD"});let w;w=""+O+" ";let P;P="{VAR_PLURAL, plural, =0 {Ulac tavidyut} =1 {1 n tvidyut} other {{INTERPOLATION} tividyutin}}",P=I(P,{INTERPOLATION:"\uFFFD1\uFFFD",VAR_PLURAL:"\uFFFD0\uFFFD"});let N;return N="{VAR_PLURAL, plural, =0 {No views} =1 {1 view} other {{INTERPOLATION} views}}",N=I(N,{INTERPOLATION:"\uFFFD1\uFFFD",VAR_PLURAL:"\uFFFD0\uFFFD"}),[t,e,n,d,w,P,N,[1,"text-nowrap","me-2"],["iconName","channel","aria-hidden","true"],["class","pt-badge badge-secondary",4,"ngIf"],["routerLink","/my-library/video-channel-syncs",1,"button-link"],["iconName","repeat","aria-hidden","true"],[3,"hideLink"],[1,"video-channels-header","d-flex","justify-content-between","gap-2"],[3,"search"],["routerLink","/manage/create",1,"peertube-create-button"],["iconName","add","aria-hidden","true"],["class","no-results",4,"ngIf"],["myInfiniteScroller","",1,"video-channels",3,"nearOfBottom","dataObservable"],["class","video-channel",4,"ngFor","ngForOf"],[1,"pt-badge","badge-secondary"],[1,"no-results"],[1,"video-channel"],["actorType","channel","size","80",3,"actor","internalHref"],[1,"video-channel-info"],["title",s,1,"video-channel-names",3,"routerLink"],[1,"video-channel-display-name"],[1,"video-channel-name"],[1,"video-channel-followers",3,"routerLink","queryParams"],[1,"d-flex"],[1,"mx-1"],[1,"video-channel-buttons"],["label","",3,"ptRouterLink"],["label","",3,"click"],["class","w-100 d-flex justify-content-end chart-container",4,"ngIf"],[1,"w-100","d-flex","justify-content-end","chart-container"],["myDeferLoading",""],["width","40vw","height","100px","type","line",3,"data","options",4,"ngIf"],["width","40vw","height","100px","type","line",3,"data","options"]];},template:function(e,n){e&1&&(o(0,"h1")(1,"span",7),p(2,"my-global-icon",8),E(3),h(4,0),S(),g(5,we,2,1,"span",9),l(),o(6,"div")(7,"a",10),p(8,"my-global-icon",11),E(9),h(10,1),S(),l()()(),p(11,"my-channels-setup-message",12),o(12,"div",13)(13,"my-advanced-input-filter",14),A("search",function(s){return n.onSearch(s);}),l(),o(14,"a",15),p(15,"my-global-icon",16),E(16),h(17,2),S(),l()(),g(18,Te,2,0,"div",17),o(19,"div",18),A("nearOfBottom",function(){return n.onNearOfBottom();}),g(20,$e,22,26,"div",19),l()),e&2&&(r(5),c("ngIf",n.pagination.totalItems),r(6),c("hideLink",!0),r(7),c("ngIf",n.pagination.totalItems===0),r(),c("dataObservable",n.onChannelDataSubject.asObservable()),r(),c("ngForOf",n.videoChannels));},dependencies:[pe,ie,oe,Ne,ve,Ce,te,he,ue,fe,R,Pe,Oe,Me],styles:["h1[_ngcontent-%COMP%]{display:flex;justify-content:space-between}h1[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{top:-4px}h1[_ngcontent-%COMP%]   .button-link[_ngcontent-%COMP%]{display:inline-block;padding:4px 13px;border:0;font-weight:600;border-radius:3px!important;text-align:center;cursor:pointer;font-size:15px;line-height:23px;background-color:var(--greyBackgroundColor);color:var(--greyForegroundColor)}h1[_ngcontent-%COMP%]   .button-link[_ngcontent-%COMP%]:hover, h1[_ngcontent-%COMP%]   .button-link[_ngcontent-%COMP%]:focus, h1[_ngcontent-%COMP%]   .button-link[_ngcontent-%COMP%]:active{text-decoration:none!important}h1[_ngcontent-%COMP%]   .button-link[_ngcontent-%COMP%]:focus:not(:focus-visible){outline:none!important}h1[_ngcontent-%COMP%]   .button-link[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-inline-end:.25rem;margin-inline-start:.25rem}h1[_ngcontent-%COMP%]   .button-link[_ngcontent-%COMP%]:focus, h1[_ngcontent-%COMP%]   .button-link[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem #5858580d}h1[_ngcontent-%COMP%]   .button-link[_ngcontent-%COMP%]:hover, h1[_ngcontent-%COMP%]   .button-link[_ngcontent-%COMP%]:active, h1[_ngcontent-%COMP%]   .button-link[_ngcontent-%COMP%]:focus, h1[_ngcontent-%COMP%]   .button-link[disabled][_ngcontent-%COMP%], h1[_ngcontent-%COMP%]   .button-link.disabled[_ngcontent-%COMP%]{color:var(--greyForegroundColor);background-color:var(--greySecondaryBackgroundColor)}h1[_ngcontent-%COMP%]   .button-link[disabled][_ngcontent-%COMP%], h1[_ngcontent-%COMP%]   .button-link.disabled[_ngcontent-%COMP%]{cursor:default}h1[_ngcontent-%COMP%]   .button-link[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, h1[_ngcontent-%COMP%]   .button-link[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, h1[_ngcontent-%COMP%]   .button-link[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:var(--greyForegroundColor)}h1[_ngcontent-%COMP%]   .button-link[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{position:relative;display:inline-block;width:18px;top:-1px;margin-inline-end:.1875rem}input[type=text][_ngcontent-%COMP%]{font-size:15px;padding:3px 15px;width:300px;max-width:300px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid var(--inputBorderColor);border-radius:3px;line-height:23px}input[type=text][_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}input[type=text][readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width: 340px){input[type=text][_ngcontent-%COMP%]{width:100%}}my-edit-button[_ngcontent-%COMP%]{margin-inline-end:.625rem}.video-channel[_ngcontent-%COMP%]{display:flex;min-height:130px;padding-bottom:20px;margin-bottom:20px;border-bottom:1px solid var(--inputBorderColor)}@media screen and (max-width: 800px){.video-channel[_ngcontent-%COMP%]{flex-direction:column;height:auto;align-items:center}}.video-channel[_ngcontent-%COMP%]   my-actor-avatar[_ngcontent-%COMP%]{margin-inline-end:.625rem}.video-channel-info[_ngcontent-%COMP%]{flex-grow:1}.video-channel-names[_ngcontent-%COMP%]{width:fit-content;display:flex;align-items:baseline;color:var(--mainForegroundColor)}.video-channel-names[_ngcontent-%COMP%]:hover, .video-channel-names[_ngcontent-%COMP%]:focus, .video-channel-names[_ngcontent-%COMP%]:active{text-decoration:none!important}.video-channel-names[_ngcontent-%COMP%]:focus:not(:focus-visible){outline:none!important}.video-channel-display-name[_ngcontent-%COMP%]{font-weight:600;font-size:18px}.video-channel-name[_ngcontent-%COMP%]{font-size:14px;color:#777272;margin-inline-start:.3125rem}.video-channel-followers[_ngcontent-%COMP%]{color:var(--mainForegroundColor)}.video-channel-buttons[_ngcontent-%COMP%]{margin-top:10px;min-width:190px}.chart-container[_ngcontent-%COMP%]{width:40vw;height:100px}.video-channels-header[_ngcontent-%COMP%]{margin-bottom:30px}@media screen and (max-width: 800px){.video-channels-header[_ngcontent-%COMP%]{text-align:center}.video-channel[_ngcontent-%COMP%]{padding-bottom:10px}.video-channel[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-inline-end:0}.video-channel[_ngcontent-%COMP%]   .video-channel-buttons[_ngcontent-%COMP%]{align-self:center}.video-channel-info[_ngcontent-%COMP%]{padding-bottom:10px;text-align:center}.video-channel-names[_ngcontent-%COMP%]{flex-direction:column;align-items:center!important;margin:auto}.video-channel-name[_ngcontent-%COMP%]{margin-inline-start:0!important}}@media screen and (max-width: 500px){.video-channels-header[_ngcontent-%COMP%]{flex-direction:column}.video-channels-header[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%!important;margin-bottom:12px}}@media screen and (min-width: breakpoint(lg)){.main-col:not(.expanded)[_nghost-%COMP%]   .video-channel-buttons[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .video-channel-buttons[_ngcontent-%COMP%]{float:right}}@media screen and (min-width: 800px){.expanded[_nghost-%COMP%]   .video-channel-buttons[_ngcontent-%COMP%], .expanded   [_nghost-%COMP%]   .video-channel-buttons[_ngcontent-%COMP%]{float:right}}"]}));var x=M;var bn=[{path:"",component:x,data:{meta:{title:"Ibuda-inu n tvidyut"}}},{path:"create",redirectTo:"/manage/create"},{path:"update/:videoChannelName",redirectTo:"/manage/update/:videoChannelName"}];export{bn as default};/**i18n:2f710d33ac9c4f1483429afcadbb48fcf333aac524700807e70179670fe63b48*/