import{a as Te,b as Fe,c as ke,d as Ae,e as Ne,f as R}from"./chunk-4TM5NREB.js";import"./chunk-VTUTDAHH.js";import"./chunk-LOVXD4GQ.js";import{c as xe,d as we}from"./chunk-WLZVZYNX.js";import"./chunk-GPZBMIXX.js";import{a as Re}from"./chunk-ENSRLQ2F.js";import"./chunk-D3FHDE3Z.js";import"./chunk-JKIUJPUH.js";import"./chunk-PZG7XDNU.js";import{a as b}from"./chunk-CF2PRKCK.js";import"./chunk-AJTAIDL7.js";import"./chunk-XIGDB2RN.js";import"./chunk-24QQSIIJ.js";import"./chunk-FCT3LKDI.js";import"./chunk-K67EGD4G.js";import"./chunk-3NN6IC32.js";import{a as Ie}from"./chunk-JPIRBOZL.js";import"./chunk-EBTUWTIZ.js";import{a as w}from"./chunk-R5XTUDD2.js";import"./chunk-KOE64Z5J.js";import{a as x}from"./chunk-CVTLOUPO.js";import"./chunk-LUFSC2DY.js";import"./chunk-CNM6TRJ3.js";import"./chunk-X6JWC5WV.js";import{b as De,c as I}from"./chunk-GP5LX4CA.js";import"./chunk-4V7EB4W6.js";import"./chunk-KG4UYECH.js";import"./chunk-NO6VG5DO.js";import{a as he}from"./chunk-7HXKHM3O.js";import{a as N}from"./chunk-4XL6BJ7M.js";import"./chunk-RBCGTDIC.js";import"./chunk-DPQ4XGHN.js";import"./chunk-XEFO2OX5.js";import"./chunk-WRZZAQTV.js";import{b as _e,c as Ue}from"./chunk-RZGVOE4L.js";import{A as me,f as ce,g as le,l as se,o as pe,r as ue,z as ve}from"./chunk-AHXSH3AS.js";import{$ as g,Aa as H,Ab as ie,B as z,Ca as s,Da as a,Gf as je,Ib as oe,Kd as M,La as X,Md as A,Oa as W,Of as Oe,Pf as ye,Qf as Me,R as m,Sa as v,Wf as Se,Y as Q,Zc as re,ab as p,ad as ae,ba as G,bb as u,bd as de,be as fe,c as k,cb as q,fg as Ve,gb as Y,hg as D,if as Ce,j as l,kb as U,la as h,m as _,ma as C,nd as ge,ob as y,pb as J,r as j,rc as ne,tf as be,ug as Ee,vb as Z,vf as Pe,wb as K,xb as ee,zb as te}from"./chunk-4A7FW7VV.js";import"./chunk-BERSDMCF.js";import"./chunk-ONF7AOBQ.js";import{a as B,b as $,g as $e,j as o,k as F}from"./chunk-K6ICEIKK.js";var Be=$e(je());var qe=["videoEdit"];function Ye(L,d){if(L&1&&(p(0,"div",14)(1,"label",15),U(2,2),u(),p(3,"div",16),U(4,3),u(),p(5,"div"),q(6,"my-reactive-file",17),u()()),L&2){let e=J();s(6),v("extensions",e.getVideoExtensions())("displayFilename",!0)("displayReset",!0)("buttonTooltip","(extensions: "+e.getVideoExtensions()+")");}}var Le=(0,Be.default)("peertube:video-update"),P=class P extends Ue{constructor(e,i,t,n,r,c,V,E,O,Je,Ze,Ke,et,tt,it){super();this.formReactiveService=e;this.route=i;this.router=t;this.notifier=n;this.videoService=r;this.loadingBar=c;this.videoCaptionService=V;this.videoChapterService=E;this.server=O;this.liveVideoService=Je;this.videoUploadService=Ze;this.confirmService=Ke;this.auth=et;this.userService=tt;this.resumableUploadService=it;o(this,"videoEditComponent");o(this,"videoEdit");o(this,"videoDetails");o(this,"videoSource");o(this,"userVideoChannels",[]);o(this,"videoCaptions",[]);o(this,"liveVideo");o(this,"userVideoQuotaUsed",0);o(this,"userVideoQuotaUsedDaily",0);o(this,"isUpdatingVideo",!1);o(this,"forbidScheduledPublication",!1);o(this,"isReplacingVideoFile",!1);o(this,"videoUploadPercents");o(this,"uploadError");o(this,"updateDone",!1);o(this,"videoReplacementUploadedSubject",new k());o(this,"alreadyRefreshedToken",!1);o(this,"uploadServiceSubscription");o(this,"updateSubcription");o(this,"chaptersEdit",new Te());}ngOnInit(){this.buildForm({replaceFile:null}),this.userService.getMyVideoQuotaUsed().subscribe(O=>{this.userVideoQuotaUsed=O.videoQuotaUsed,this.userVideoQuotaUsedDaily=O.videoQuotaUsedDaily;}),this.uploadServiceSubscription=this.resumableUploadService.events.subscribe(O=>this.onUploadVideoOngoing(O));let{videoData:e}=this.route.snapshot.data,{video:i,videoChannels:t,videoCaptions:n,videoChapters:r,videoSource:c,liveVideo:V,videoPassword:E}=e;this.videoDetails=i,this.videoEdit=new Fe(this.videoDetails,E),this.chaptersEdit.loadFromAPI(r),this.userVideoChannels=t,this.videoCaptions=n,this.videoSource=c,this.liveVideo=V,this.forbidScheduledPublication=this.videoEdit.privacy!==M.PRIVATE;}ngOnDestroy(){this.resumableUploadService.disconnect(),this.uploadServiceSubscription&&this.uploadServiceSubscription.unsubscribe();}onFormBuilt(){Ne(this.form,this.videoEdit,!0),setTimeout(()=>this.videoEditComponent.patchChapters(this.chaptersEdit)),this.liveVideo&&this.form.patchValue({saveReplay:this.liveVideo.saveReplay,replayPrivacy:this.liveVideo.replaySettings?this.liveVideo.replaySettings.privacy:M.PRIVATE,latencyMode:this.liveVideo.latencyMode,permanentLive:this.liveVideo.permanentLive});}onUnload(e){let{text:i,canDeactivate:t}=this.canDeactivate();if(!t)return e.returnValue=i,i;}canDeactivate(){if(this.updateDone===!0)return{canDeactivate:!0};if(this.isUpdatingVideo)return{canDeactivate:!1,text:"Je video wordt momenteel bijgewerkt. Als je weggaat, gaan je wijzigingen verloren."};let e="Je hebt niet-opgeslagen wijzigingen! Als je vertrekt, gaan je wijzigingen verloren.";for(let i of this.videoCaptions)if(i.action)return{canDeactivate:!1,text:e};return{canDeactivate:this.formChanged===!1,text:e};}getVideoExtensions(){return this.videoUploadService.getVideoExtensions();}isWaitTranscodingHidden(){return this.videoDetails.state.id!==A.TO_TRANSCODE;}isUpdateVideoFileEnabled(){return!(!this.server.getHTMLConfig().videoFile.update.enabled||this.videoDetails.isLive||this.videoDetails.state.id!==A.PUBLISHED);}update(){return F(this,null,function*(){yield this.waitPendingCheck(),this.forceCheck(),!(!this.form.valid||this.isUpdatingVideo===!0)&&(yield this.checkAndConfirmVideoFileReplacement())&&(this.videoEdit.patch(this.form.value),this.chaptersEdit.patch(this.form.value),this.abortUpdateIfNeeded(),this.loadingBar.useRef().start(),this.isUpdatingVideo=!0,this.updateSubcription=this.videoReplacementUploadedSubject.pipe(m(()=>this.videoService.updateVideo(this.videoEdit)),m(()=>this.videoCaptionService.updateCaptions(this.videoEdit.uuid,this.videoCaptions)),m(()=>this.liveVideo?l(!0):this.videoChapterService.updateChapters(this.videoEdit.uuid,this.chaptersEdit)),m(()=>{if(!this.liveVideo)return l(void 0);let e=!!this.form.value.saveReplay,i=e?{privacy:this.form.value.replayPrivacy}:void 0,t={saveReplay:e,replaySettings:i,permanentLive:!!this.form.value.permanentLive,latencyMode:this.form.value.latencyMode},n={saveReplay:this.liveVideo.saveReplay,replaySettings:this.liveVideo.replaySettings,permanentLive:this.liveVideo.permanentLive,latencyMode:this.liveVideo.latencyMode};return fe(n,t)?l(void 0):this.liveVideoService.updateLive(this.videoEdit.id,t);}),_(()=>!0),z(e=>(this.notifier.error(e.message),l(!1)))).subscribe({next:e=>{this.isUpdatingVideo=!1,this.loadingBar.useRef().complete(),e&&(this.updateDone=!0,this.notifier.success("Video geupdate."),this.router.navigateByUrl(N.buildWatchUrl(this.videoEdit)));}}),this.replaceFileIfNeeded());});}hydratePluginFieldsFromVideo(){this.videoEdit.pluginData&&this.form.patchValue({pluginData:this.videoEdit.pluginData});}getVideoUrl(){return N.buildWatchUrl(this.videoDetails);}checkAndConfirmVideoFileReplacement(){return F(this,null,function*(){let e=this.form.value.replaceFile;if(!e)return!0;let i=this.auth.getUser();if(!this.videoUploadService.checkQuotaAndNotify(e,i.videoQuota,this.userVideoQuotaUsed)||!this.videoUploadService.checkQuotaAndNotify(e,i.videoQuotaDaily,this.userVideoQuotaUsedDaily))return;let t=this.server.getHTMLConfig().autoBlacklist.videos.ofUsers.enabled===!0&&!this.videoDetails.blacklisted,n="";t&&(n=" "+"Uw video zal ook automatisch worden geblokkeerd omdat videopublicatie handmatig moet worden gevalideerd door een moderator.");let r="Als u een nieuwe versie van uw video uploadt, wordt de huidige versie volledig gewist."+n+" "+"<br /><br />Wilt u nog steeds uw videobestand vervangen?";return(yield this.confirmService.confirm(r,"Bestandsvervanging waarschuwing"))!==!1;});}replaceFileIfNeeded(){if(!this.form.value.replaceFile){this.videoReplacementUploadedSubject.next();return;}this.uploadFileReplacement(this.form.value.replaceFile);}uploadFileReplacement(e){let i={filename:e.name};this.resumableUploadService.handleFiles(e,$(B({},this.videoUploadService.getReplaceUploadxOptions(this.videoDetails.uuid)),{metadata:i})),this.isReplacingVideoFile=!0;}onUploadVideoOngoing(e){switch(Le("Upload state update",e),e.status){case"error":{if(!this.alreadyRefreshedToken&&e.responseStatus===ge.UNAUTHORIZED_401)return this.alreadyRefreshedToken=!0,this.refreshTokenAndRetryUpload();this.handleUploadError(Pe(e));break;}case"cancelled":this.isReplacingVideoFile=!1,this.videoUploadPercents=0,this.uploadError="";break;case"uploading":this.videoUploadPercents=e.progress||0;break;case"complete":this.isReplacingVideoFile=!1,this.videoReplacementUploadedSubject.next(),this.videoUploadPercents=100;break;}}cancelUpload(){Le("Cancelling upload"),this.resumableUploadService.control({action:"cancel"}),this.abortUpdateIfNeeded();}handleUploadError(e){this.videoUploadPercents=0,this.isReplacingVideoFile=!1,this.uploadError=be({err:e,name:"video"}),this.videoReplacementUploadedSubject.error(e);}refreshTokenAndRetryUpload(){this.auth.refreshAccessToken().subscribe(()=>this.uploadFileReplacement(this.form.value.replaceFile));}abortUpdateIfNeeded(){this.updateSubcription&&(this.updateSubcription.unsubscribe(),this.updateSubcription=void 0),this.videoReplacementUploadedSubject=new k(),this.loadingBar.useRef().complete();}};o(P,"\u0275fac",function(i){return new(i||P)(a(_e),a(re),a(ae),a(Ve),a(I),a(he),a(x),a(w),a(Me),a(b),a(R),a(Oe),a(D),a(Ee),a(xe));}),o(P,"\u0275cmp",G({type:P,selectors:[["my-videos-update"]],viewQuery:function(i,t){if(i&1&&Z(qe,5),i&2){let n;K(n=ee())&&(t.videoEditComponent=n.first);}},hostBindings:function(i,t){i&1&&y("beforeunload",function(r){return t.onUnload(r);},!1,H);},standalone:!0,features:[X,oe],decls:13,vars:21,consts:()=>{let e;e="Bijwerken";let i;i="Bijwerken";let t;t="Selecteer het bestand om te uploaden";let n;n="Vervang videobestand";let r;return r="\u26A0\uFE0F Als je een nieuwe versie van je video uploadt, wordt de huidige versie volledig gewist",[["videoEdit",""],i,n,r,[1,"margin-content"],[1,"title-page"],[1,"me-1"],[3,"routerLink"],[3,"cancel","isUploading","uploadPercents","error","uploaded","enableRetryAfterError"],["novalidate","",3,"formGroup"],["type","update","displayTranscriptionInfo","false",3,"pluginFieldsAdded","formBuilt","form","formErrors","forbidScheduledPublication","validationMessages","userVideoChannels","videoCaptions","hideWaitTranscoding","liveVideo","publishedVideo","videoSource","updateVideoFileEnabled"],["class","form-group",4,"ngIf"],[1,"submit-container"],["theme","orange","label",e,"icon","circle-tick",3,"click","keydown.enter","disabled"],[1,"form-group"],["for","videofile",1,"mb-0"],[1,"form-group-description"],["formControlName","replaceFile","inputLabel",t,"inputName","videofile","theme","primary",3,"extensions","displayFilename","displayReset","buttonTooltip"]];},template:function(i,t){if(i&1){let n=Y();p(0,"div",4)(1,"div",5)(2,"span",6),U(3,1),u(),p(4,"a",7),te(5),u()(),p(6,"my-upload-progress",8),y("cancel",function(){return h(n),C(t.cancelUpload());}),u(),p(7,"form",9)(8,"my-video-edit",10,0),y("pluginFieldsAdded",function(){return h(n),C(t.hydratePluginFieldsFromVideo());})("formBuilt",function(){return h(n),C(t.onFormBuilt());}),W(10,Ye,7,4,"div",11),u(),p(11,"div",12)(12,"my-button",13),y("click",function(){return h(n),C(t.update());})("keydown.enter",function(){return h(n),C(t.update());}),u()()()();}i&2&&(s(4),v("routerLink",t.getVideoUrl()),s(),ie(t.videoDetails==null?null:t.videoDetails.name),s(),v("isUploading",t.isReplacingVideoFile)("uploadPercents",t.videoUploadPercents)("error",t.uploadError)("uploaded",t.updateDone)("enableRetryAfterError",!1),s(),v("formGroup",t.form),s(),v("form",t.form)("formErrors",t.formErrors)("forbidScheduledPublication",t.forbidScheduledPublication)("validationMessages",t.validationMessages)("userVideoChannels",t.userVideoChannels)("videoCaptions",t.videoCaptions)("hideWaitTranscoding",t.isWaitTranscodingHidden())("liveVideo",t.liveVideo)("publishedVideo",t.videoDetails)("videoSource",t.videoSource)("updateVideoFileEnabled",t.isUpdateVideoFileEnabled()),s(2),v("ngIf",t.isUpdateVideoFileEnabled()),s(2),v("disabled",!t.form.valid||t.isUpdatingVideo===!0));},dependencies:[de,we,ve,se,ce,le,me,pe,ue,Ae,ne,Re,Ie],styles:['.peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;width:auto;border-radius:3px;color:var(--inputForegroundColor);background:var(--inputBackgroundColor);position:relative;height:min-content}.peertube-select-container.disabled[_ngcontent-%COMP%]{background-color:#e5e5e5}.peertube-select-container.disabled[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:default}.peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{background-color:#f9f9f9}@media screen and (max-width: auto){.peertube-select-container[_ngcontent-%COMP%]{width:100%}}.peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:calc(0% + 15px);content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid rgba(0,0,0,0);border-top-color:var(--mainForegroundColor);margin-top:-2px;z-index:100}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:15px;padding:3px 35px 3px 12px;position:relative;border:1px solid var(--inputBorderColor);background:transparent none;-webkit-appearance:none;appearance:none;text-overflow:ellipsis;color:var(--mainForegroundColor);line-height:23px}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:-moz-focusring{color:transparent;text-shadow:0 0 0 #000}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[value=undefined][_ngcontent-%COMP%]{font-weight:600}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]{background-color:var(--greyBackgroundColor);color:var(--greyForegroundColor)}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus, .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem #5858580d}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:hover, .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:active, .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus, .peertube-select-container.peertube-select-button[disabled][_ngcontent-%COMP%], .peertube-select-container.peertube-select-button.disabled[_ngcontent-%COMP%]{color:var(--greyForegroundColor);background-color:var(--greySecondaryBackgroundColor)}.peertube-select-container.peertube-select-button[disabled][_ngcontent-%COMP%], .peertube-select-container.peertube-select-button.disabled[_ngcontent-%COMP%]{cursor:default}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:var(--greyForegroundColor)}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-weight:600;color:var(--greyForegroundColor);border:0;padding:4px 35px 4px 12px}my-peertube-checkbox[_ngcontent-%COMP%]{display:block;margin-bottom:1rem}.nav-tabs[_ngcontent-%COMP%]{margin-bottom:15px}.video-edit[_ngcontent-%COMP%]{height:100%;min-height:300px}.video-edit[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;font-size:15px;padding:3px 15px;width:100%;max-width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid var(--inputBorderColor);border-radius:3px;line-height:23px}.video-edit[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}.video-edit[_ngcontent-%COMP%]   input[readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width: calc(100% + 40px)){.video-edit[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}.caption-entry[_ngcontent-%COMP%]{display:flex;height:40px;align-items:center}.caption-entry[_ngcontent-%COMP%]   a.caption-entry-label[_ngcontent-%COMP%]{color:var(--mainForegroundColor)}.caption-entry[_ngcontent-%COMP%]   a.caption-entry-label[_ngcontent-%COMP%]:hover, .caption-entry[_ngcontent-%COMP%]   a.caption-entry-label[_ngcontent-%COMP%]:focus, .caption-entry[_ngcontent-%COMP%]   a.caption-entry-label[_ngcontent-%COMP%]:active{text-decoration:none!important}.caption-entry[_ngcontent-%COMP%]   a.caption-entry-label[_ngcontent-%COMP%]:focus:not(:focus-visible){outline:none!important}.caption-entry[_ngcontent-%COMP%]   a.caption-entry-label[_ngcontent-%COMP%]:hover{opacity:.8}.caption-entry[_ngcontent-%COMP%]   .caption-entry-label[_ngcontent-%COMP%]{font-weight:700;min-width:100px;margin-inline-end:1.25rem}.caption-entry[_ngcontent-%COMP%]   .caption-entry-state[_ngcontent-%COMP%]{min-width:250px;margin-inline-end:.9375rem}.caption-entry[_ngcontent-%COMP%]   .caption-entry-state.caption-entry-state-create[_ngcontent-%COMP%]{color:#38ab0b}.caption-entry[_ngcontent-%COMP%]   .caption-entry-state.caption-entry-state-delete[_ngcontent-%COMP%]{color:red}.caption-entry[_ngcontent-%COMP%]   .caption-entry-edit[_ngcontent-%COMP%]{padding:4px 13px;border:0;font-weight:600;border-radius:3px!important;text-align:center;cursor:pointer;font-size:15px;line-height:23px}.caption-entry[_ngcontent-%COMP%]   .caption-entry-edit[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-inline-end:.25rem;margin-inline-start:.25rem}.caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]{padding:4px 13px;border:0;font-weight:600;border-radius:3px!important;text-align:center;cursor:pointer;font-size:15px;line-height:23px;background-color:var(--greyBackgroundColor);color:var(--greyForegroundColor)}.caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-inline-end:.25rem;margin-inline-start:.25rem}.caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]:focus, .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem #5858580d}.caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]:hover, .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]:active, .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]:focus, .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[disabled][_ngcontent-%COMP%], .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete.disabled[_ngcontent-%COMP%]{color:var(--greyForegroundColor);background-color:var(--greySecondaryBackgroundColor)}.caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[disabled][_ngcontent-%COMP%], .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete.disabled[_ngcontent-%COMP%]{cursor:default}.caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .caption-entry[_ngcontent-%COMP%]   .caption-entry-delete[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:var(--greyForegroundColor)}.no-caption[_ngcontent-%COMP%]{text-align:center}.submit-container[_ngcontent-%COMP%]{text-align:end}.submit-container[_ngcontent-%COMP%]   .message-submit[_ngcontent-%COMP%]{display:inline-block;color:var(--greyForegroundColor);margin-inline-end:calc(1.28125rem + .375vw)}@media (min-width: 1200px){.submit-container[_ngcontent-%COMP%]   .message-submit[_ngcontent-%COMP%]{margin-inline-end:1.5625rem}}p-calendar[_ngcontent-%COMP%]{display:block}p-calendar[_ngcontent-%COMP%]     .p-calendar{width:100%}p-calendar[_ngcontent-%COMP%]     .p-inputtext{color:#000;font-size:15px;padding:3px 15px;width:100%;max-width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid var(--inputBorderColor);border-radius:3px;line-height:23px}p-calendar[_ngcontent-%COMP%]     .p-inputtext::placeholder{color:var(--inputPlaceholderColor)}p-calendar[_ngcontent-%COMP%]     .p-inputtext[readonly]{opacity:.7}@media screen and (max-width: calc(100% + 40px)){p-calendar[_ngcontent-%COMP%]     .p-inputtext{width:100%}}.form-columns[_ngcontent-%COMP%]{display:grid;grid-template-columns:66% 1fr;grid-gap:30px}.button-file[_ngcontent-%COMP%]{width:max-content;position:relative;overflow:hidden;display:inline-block;padding:4px 13px;border:0;font-weight:600;border-radius:3px!important;text-align:center;cursor:pointer;font-size:15px;line-height:23px}.button-file[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:100%;height:100%;font-size:100px;text-align:end;filter:alpha(opacity=0);opacity:0;outline:none;background:var(--mainBackgroundColor);cursor:inherit;display:block}.button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-inline-end:.25rem;margin-inline-start:.25rem}.button-file[_ngcontent-%COMP%]:focus, .button-file[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--mainColorLightest)}.button-file[_ngcontent-%COMP%], .button-file[_ngcontent-%COMP%]:active, .button-file[_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}.button-file[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}.button-file[disabled][_ngcontent-%COMP%], .button-file.disabled[_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:var(--inputBorderColor)}.button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .button-file[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:#fff}.hide-chapter-label[_ngcontent-%COMP%]{height:0;opacity:0}.chapter[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto minmax(150px,350px) 1fr;grid-template-rows:auto auto;column-gap:1rem}.chapter[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]{height:31px;min-width:16px;display:flex;align-items:center}.chapter[_ngcontent-%COMP%]   my-delete-button[_ngcontent-%COMP%]{width:fit-content}.chapter[_ngcontent-%COMP%]   .form-error[_ngcontent-%COMP%]{margin-top:0}@media screen and (max-width: 1040px){.main-col:not(.expanded)[_nghost-%COMP%]   .form-columns[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .form-columns[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media screen and (max-width: 800px){.main-col.expanded[_nghost-%COMP%]   .form-columns[_ngcontent-%COMP%], .main-col.expanded   [_nghost-%COMP%]   .form-columns[_ngcontent-%COMP%]{grid-template-columns:1fr}}']}));var T=P;var f=class f{constructor(d,e,i,t,n,r){this.videoService=d;this.liveVideoService=e;this.authService=i;this.videoCaptionService=t;this.videoChapterService=n;this.videoPasswordService=r;}resolve(d){let e=d.params.uuid;return this.videoService.getVideo({videoId:e}).pipe(m(i=>j(this.buildVideoObservables(i))),_(([i,t,n,r,c,V,E])=>({video:i,videoChannels:n,videoCaptions:r,videoChapters:c,videoSource:t,liveVideo:V,videoPassword:E})));}buildVideoObservables(d){return[l(d),this.videoService.getSource(d.id),Ce(this.authService),this.videoCaptionService.listCaptions(d.uuid).pipe(_(e=>e.data)),this.videoChapterService.getChapters({videoId:d.uuid}).pipe(_(({chapters:e})=>e)),d.isLive?this.liveVideoService.getVideoLive(d.id):l(void 0),d.privacy.id===M.PASSWORD_PROTECTED?this.videoPasswordService.getVideoPasswords({videoUUID:d.uuid}):l(void 0)];}};o(f,"\u0275fac",function(e){return new(e||f)(g(I),g(b),g(D),g(x),g(w),g(De));}),o(f,"\u0275prov",Q({token:f,factory:f.ɵfac}));var S=f;var Wt=[{path:"",component:T,canActivate:[Se],canDeactivate:[ye],providers:[S,b,ke,R],resolve:{videoData:S}}];export{Wt as default};/**i18n:2f710d33ac9c4f1483429afcadbb48fcf333aac524700807e70179670fe63b48*/