import{a as Bi}from"./chunk-PZG7XDNU.js";import{a as It}from"./chunk-CF2PRKCK.js";import{b as Nt}from"./chunk-F4NNW7U6.js";import{a as Dt}from"./chunk-AJTAIDL7.js";import{a as Hi,b as Ke,e as qe,f as Pt,g as Wi}from"./chunk-FDM4WNGU.js";import{a as Gi}from"./chunk-FCT3LKDI.js";import{a as Rt}from"./chunk-K67EGD4G.js";import{a as zi}from"./chunk-UOVZQ5E7.js";import{a as bt}from"./chunk-NAT3JZF7.js";import{a as Ui,b as ji}from"./chunk-RVLWM6RI.js";import{a as $i}from"./chunk-73DTZG4O.js";import{a as Xi}from"./chunk-CVTLOUPO.js";import{a as ei,c as fe}from"./chunk-GP5LX4CA.js";import{a as re}from"./chunk-4V7EB4W6.js";import{a as je}from"./chunk-KG4UYECH.js";import{b as Ye}from"./chunk-NO6VG5DO.js";import{a as ki}from"./chunk-UDQ7P63C.js";import{a as Qe}from"./chunk-4XL6BJ7M.js";import{a as Fi}from"./chunk-GOWSOB6U.js";import{B as Be,b as Pi,k as Ii,l as Ni,n as bi,r as oe,t as Ot,u as St,v as ht,w as Tt,x as Vi,y as Mt}from"./chunk-XEFO2OX5.js";import{a as $}from"./chunk-WRZZAQTV.js";import{b as ge,c as ve}from"./chunk-RZGVOE4L.js";import{A as me,c as J,d as le,f as X,g as de,k as Re,l as _e,n as Ct,o as ce,p as Ge,r as pe,s as Si,t as hi,u as Ti,z as j}from"./chunk-AHXSH3AS.js";import{$a as Fe,$b as vt,$d as Ri,$e as Te,Ab as L,Af as Zt,B as _i,Bb as F,Ca as a,Cb as ui,Cd as ue,Da as C,Db as gi,De as Di,E as ci,Eb as Q,Ed as Mi,Fb as K,Gb as q,Gf as nn,Hb as vi,Hd as Et,Ib as D,Id as Ai,Kb as y,Kd as mt,La as se,Md as ne,Na as gt,Nf as We,Oa as p,Od as ze,Of as xi,Qf as yt,R as pi,Ra as xe,Rd as yi,Sa as r,Sb as te,T as mi,Tb as Ie,Te as At,Ub as $e,Wb as z,Xf as Xe,Ya as Ae,Ye as wi,Zd as qt,_a as Le,_d as Jt,ab as d,ac as ft,ba as R,bb as s,bc as Kt,bd as He,c as li,cb as u,cc as fi,cf as Ue,db as O,eb as S,fb as Ee,fg as ae,gb as A,hg as De,ib as Oe,j as Ve,jb as Se,ka as we,kb as g,l as si,la as v,lb as b,ma as f,mb as V,nb as Qt,ob as E,pb as _,pc as U,qb as ye,qc as W,rb as he,rc as P,sa as N,sg as Li,vb as k,vc as Ci,wb as H,wc as ke,x as di,xb as G,ya as Ce,yb as w,yc as Ei,za as Yt,zb as h,zc as Oi}from"./chunk-4A7FW7VV.js";import{g as tn,j as l,k as be}from"./chunk-K6ICEIKK.js";var on=["modal"],an=t=>({"input-error":t});function rn(t,n){if(t&1&&u(0,"div",27),t&2){let e=_(2).$implicit;r("innerHTML",e.help,Ce);}}function ln(t,n){t&1&&p(0,rn,1,1,"ng-template",26);}function sn(t,n){if(t&1&&(O(0,28),u(1,"div",27),S()),t&2){let e=_().$implicit;a(),r("innerHTML",e.description,Ce);}}function dn(t,n){if(t&1&&(d(0,"div",18)(1,"my-peertube-checkbox",24),p(2,ln,1,0,null,17)(3,sn,2,1,"ng-container",25),s()()),t&2){let e=n.$implicit;a(),r("inputName",e.id)("formControlName",e.id)("labelText",e.label),a(),r("ngIf",e.help),a(),r("ngIf",e.description);}}function _n(t,n){if(t&1&&(Oe(0,2,1),Ee(1),Se()),t&2){let e=_(2);a(),b(e.originHost),V(0);}}function cn(t,n){if(t&1&&(d(0,"div",29),h(1),s()),t&2){let e=_(2);a(),F(" ",e.formErrors.reason," ");}}function pn(t,n){if(t&1){let e=A();d(0,"div",3)(1,"h4",4),h(2),s(),d(3,"button",5),E("click",function(){v(e);let o=_();return f(o.hide());}),u(4,"my-global-icon",6),s()(),d(5,"div",7)(6,"form",8),E("ngSubmit",function(){v(e);let o=_();return f(o.report());}),d(7,"div",9)(8,"div",10)(9,"label",11),g(10,1),s(),d(11,"div",12),O(12,13),p(13,dn,4,5,"div",14),S(),s()(),d(14,"div",15)(15,"div",16),Oe(16,2),p(17,_n,2,1,"ng-container",17),Se(),s(),d(18,"div",18),u(19,"textarea",19),p(20,cn,2,1,"div",20),s()()(),d(21,"div",21)(22,"input",22),E("click",function(){v(e);let o=_();return f(o.hide());})("key.enter",function(){v(e);let o=_();return f(o.hide());}),s(),u(23,"input",23),s()()();}if(t&2){let e=_();a(2),L(e.modalTitle),a(4),r("formGroup",e.form),a(7),r("ngForOf",e.predefinedReasons),a(4),r("ngIf",e.isRemote()),b(e.currentHost),V(16),a(2),r("ngClass",y(8,an,e.formErrors.reason)),a(),r("ngIf",e.formErrors.reason),a(3),r("disabled",!e.form.valid);}}var Je=class Je extends ve{constructor(e,i,o,c){super();this.formReactiveService=e;this.modalService=i;this.abuseService=o;this.notifier=c;l(this,"modal");l(this,"error",null);l(this,"predefinedReasons",[]);l(this,"modalTitle");l(this,"account",null);l(this,"openedModal");}get currentHost(){return window.location.host;}get originHost(){return this.isRemote()?this.account.host:"";}ngOnInit(){this.buildForm({reason:Ke,predefinedReasons:Te(ze,e=>null)}),this.predefinedReasons=this.abuseService.getPrefefinedReasons("account");}show(e){this.account=e,this.modalTitle="Informe\n          "+this.account.displayName+"\n        ",this.openedModal=this.modalService.open(this.modal,{centered:!0,keyboard:!1,size:"lg"});}hide(){this.openedModal.close(),this.openedModal=null;}report(){let e=this.form.get("reason").value,i=Object.keys(Ue(this.form.get("predefinedReasons").value));this.abuseService.reportVideo({reason:e,predefinedReasons:i,account:{id:this.account.id}}).subscribe({next:()=>{this.notifier.success("Cuenta informada."),this.hide();},error:o=>this.notifier.error(o.message)});}isRemote(){return!this.account.isLocal;}};l(Je,"\u0275fac",function(i){return new(i||Je)(C(ge),C(oe),C(qe),C(ae));}),l(Je,"\u0275cmp",R({type:Je,selectors:[["my-account-report"]],viewQuery:function(i,o){if(i&1&&k(on,7),i&2){let c;H(c=G())&&(o.modal=c.first);}},standalone:!0,features:[se,D],decls:2,vars:0,consts:()=>{let e;e="Close this modal";let i;i="Describe el problema\u2026";let o;o="Cancelar";let c;c="Enviar";let m;m="\xBFCu\xE1l es el problema?";let M;return M="Tu denuncia se enviar\xE1 a los moderadores de "+"\uFFFD0\uFFFD"+""+"\uFFFD*17:1\uFFFD\uFFFD#1:1\uFFFD"+" y ser\xE1 reenviada tambi\xE9n al origen del comentario ("+"\uFFFD0:1\uFFFD"+")"+"\uFFFD/#1:1\uFFFD\uFFFD/*17:1\uFFFD"+". ",[["modal",""],m,M,[1,"modal-header"],[1,"modal-title"],["title",e,1,"border-0","p-0",3,"click"],["iconName","cross"],[1,"modal-body"],["novalidate","",3,"ngSubmit","formGroup"],[1,"row"],[1,"col-5"],["for","reportPredefinedReasons"],[1,"ms-2","mt-2","d-flex","flex-column"],["formGroupName","predefinedReasons"],["class","form-group",4,"ngFor","ngForOf"],[1,"col-7"],[1,"information"],[4,"ngIf"],[1,"form-group"],["placeholder",i,"formControlName","reason","ngbAutofocus","",1,"form-control",3,"ngClass"],["class","form-error","role","alert",4,"ngIf"],[1,"form-group","inputs"],["type","button","role","button","value",o,1,"peertube-button","grey-button",3,"click","key.enter"],["type","submit","value",c,1,"peertube-button","orange-button",3,"disabled"],[3,"inputName","formControlName","labelText"],["ngProjectAs","description",5,["description"],4,"ngIf"],["ptTemplate","help"],[3,"innerHTML"],["ngProjectAs","description",5,["description"]],["role","alert",1,"form-error"]];},template:function(i,o){i&1&&p(0,pn,24,10,"ng-template",null,0,z);},dependencies:[$,j,_e,J,X,de,me,ce,pe,Ge,W,re,P,je,U],styles:[".information[_ngcontent-%COMP%]{margin-bottom:20px}textarea[_ngcontent-%COMP%]{color:var(--textareaForegroundColor)!important;background-color:var(--textareaBackgroundColor)!important;height:100px;font-size:15px;padding:3px 15px;width:100%;max-width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid var(--inputBorderColor);border-radius:3px;line-height:23px}textarea[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}textarea[readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width: calc(100% + 40px)){textarea[_ngcontent-%COMP%]{width:100%}}.start-at[_ngcontent-%COMP%], .stop-at[_ngcontent-%COMP%]{width:300px;display:flex;align-items:center}.start-at[_ngcontent-%COMP%]   my-timestamp-input[_ngcontent-%COMP%], .stop-at[_ngcontent-%COMP%]   my-timestamp-input[_ngcontent-%COMP%]{margin-inline-start:.625rem}"]}));var Yi=Je;var mn=["modal"],un=t=>({"input-error":t});function gn(t,n){if(t&1&&u(0,"div",27),t&2){let e=_(2).$implicit;r("innerHTML",e.help,Ce);}}function vn(t,n){t&1&&p(0,gn,1,1,"ng-template",26);}function fn(t,n){if(t&1&&(O(0,28),u(1,"div",27),S()),t&2){let e=_().$implicit;a(),r("innerHTML",e.description,Ce);}}function Cn(t,n){if(t&1&&(d(0,"div",18)(1,"my-peertube-checkbox",24),p(2,vn,1,0,null,17)(3,fn,2,1,"ng-container",25),s()()),t&2){let e=n.$implicit;a(),r("inputName",e.id)("formControlName",e.id)("labelText",e.label),a(),r("ngIf",e.help),a(),r("ngIf",e.description);}}function En(t,n){if(t&1&&(Oe(0,2,1),Ee(1),Se()),t&2){let e=_(2);a(),b(e.originHost),V(0);}}function On(t,n){if(t&1&&(d(0,"div",29),h(1),s()),t&2){let e=_(2);a(),F(" ",e.formErrors.reason," ");}}function Sn(t,n){if(t&1){let e=A();d(0,"div",3)(1,"h4",4),h(2),s(),d(3,"button",5),E("click",function(){v(e);let o=_();return f(o.hide());}),u(4,"my-global-icon",6),s()(),d(5,"div",7)(6,"form",8),E("ngSubmit",function(){v(e);let o=_();return f(o.report());}),d(7,"div",9)(8,"div",10)(9,"label",11),g(10,1),s(),d(11,"div",12),O(12,13),p(13,Cn,4,5,"div",14),S(),s()(),d(14,"div",15)(15,"div",16),Oe(16,2),p(17,En,2,1,"ng-container",17),Se(),s(),d(18,"div",18),u(19,"textarea",19),p(20,On,2,1,"div",20),s()()(),d(21,"div",21)(22,"input",22),E("click",function(){v(e);let o=_();return f(o.hide());})("key.enter",function(){v(e);let o=_();return f(o.hide());}),s(),u(23,"input",23),s()()();}if(t&2){let e=_();a(2),L(e.modalTitle),a(4),r("formGroup",e.form),a(7),r("ngForOf",e.predefinedReasons),a(4),r("ngIf",e.isRemote()),b(e.currentHost),V(16),a(2),r("ngClass",y(8,un,e.formErrors.reason)),a(),r("ngIf",e.formErrors.reason),a(3),r("disabled",!e.form.valid);}}var Ze=class Ze extends ve{constructor(e,i,o,c){super();this.formReactiveService=e;this.modalService=i;this.abuseService=o;this.notifier=c;l(this,"comment",null);l(this,"modal");l(this,"modalTitle");l(this,"error",null);l(this,"predefinedReasons",[]);l(this,"openedModal");}get currentHost(){return window.location.host;}get originHost(){return this.isRemote()?this.comment.account.host:"";}ngOnInit(){this.modalTitle="Informar comentario",this.buildForm({reason:Ke,predefinedReasons:Te(ze,e=>null)}),this.predefinedReasons=this.abuseService.getPrefefinedReasons("comment");}show(){this.openedModal=this.modalService.open(this.modal,{centered:!0,keyboard:!1,size:"lg"});}hide(){this.openedModal.close(),this.openedModal=null;}report(){let e=this.form.get("reason").value,i=Object.keys(Ue(this.form.get("predefinedReasons").value));this.abuseService.reportVideo({reason:e,predefinedReasons:i,comment:{id:this.comment.id}}).subscribe({next:()=>{this.notifier.success("Comentario informado."),this.hide();},error:o=>this.notifier.error(o.message)});}isRemote(){return!this.comment.isLocal;}};l(Ze,"\u0275fac",function(i){return new(i||Ze)(C(ge),C(oe),C(qe),C(ae));}),l(Ze,"\u0275cmp",R({type:Ze,selectors:[["my-comment-report"]],viewQuery:function(i,o){if(i&1&&k(mn,7),i&2){let c;H(c=G())&&(o.modal=c.first);}},inputs:{comment:"comment"},standalone:!0,features:[se,D],decls:2,vars:0,consts:()=>{let e;e="Close this modal";let i;i="Describe el problema\u2026";let o;o="Cancelar";let c;c="Enviar";let m;m="\xBFCu\xE1l es el problema?";let M;return M="Tu denuncia se enviar\xE1 a los moderadores de "+"\uFFFD0\uFFFD"+""+"\uFFFD*17:1\uFFFD\uFFFD#1:1\uFFFD"+" y ser\xE1 reenviada tambi\xE9n al origen del comentario ("+"\uFFFD0:1\uFFFD"+")"+"\uFFFD/#1:1\uFFFD\uFFFD/*17:1\uFFFD"+". ",[["modal",""],m,M,[1,"modal-header"],[1,"modal-title"],["title",e,1,"border-0","p-0",3,"click"],["iconName","cross"],[1,"modal-body"],["novalidate","",3,"ngSubmit","formGroup"],[1,"row"],[1,"col-5"],["for","reportPredefinedReasons"],[1,"ms-2","mt-2","d-flex","flex-column"],["formGroupName","predefinedReasons"],["class","form-group",4,"ngFor","ngForOf"],[1,"col-7"],[1,"information"],[4,"ngIf"],[1,"form-group"],["placeholder",i,"formControlName","reason","ngbAutofocus","",1,"form-control",3,"ngClass"],["class","form-error","role","alert",4,"ngIf"],[1,"form-group","inputs"],["type","button","role","button","value",o,1,"peertube-button","grey-button",3,"click","key.enter"],["type","submit","value",c,1,"peertube-button","orange-button",3,"disabled"],[3,"inputName","formControlName","labelText"],["ngProjectAs","description",5,["description"],4,"ngIf"],["ptTemplate","help"],[3,"innerHTML"],["ngProjectAs","description",5,["description"]],["role","alert",1,"form-error"]];},template:function(i,o){i&1&&p(0,Sn,24,10,"ng-template",null,0,z);},dependencies:[$,j,_e,J,X,de,me,ce,pe,Ge,W,re,P,je,U],styles:[".information[_ngcontent-%COMP%]{margin-bottom:20px}textarea[_ngcontent-%COMP%]{color:var(--textareaForegroundColor)!important;background-color:var(--textareaBackgroundColor)!important;height:100px;font-size:15px;padding:3px 15px;width:100%;max-width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid var(--inputBorderColor);border-radius:3px;line-height:23px}textarea[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}textarea[readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width: calc(100% + 40px)){textarea[_ngcontent-%COMP%]{width:100%}}.start-at[_ngcontent-%COMP%], .stop-at[_ngcontent-%COMP%]{width:300px;display:flex;align-items:center}.start-at[_ngcontent-%COMP%]   my-timestamp-input[_ngcontent-%COMP%], .stop-at[_ngcontent-%COMP%]   my-timestamp-input[_ngcontent-%COMP%]{margin-inline-start:.625rem}"]}));var Ki=Ze;var hn=["modal"],Tn=t=>({"input-error":t});function Mn(t,n){if(t&1&&u(0,"div",33),t&2){let e=_(2).$implicit;r("innerHTML",e.help,Ce);}}function An(t,n){t&1&&p(0,Mn,1,1,"ng-template",32);}function yn(t,n){if(t&1&&(O(0,34),u(1,"div",33),S()),t&2){let e=_().$implicit;a(),r("innerHTML",e.description,Ce);}}function Rn(t,n){if(t&1&&(d(0,"div",24)(1,"my-peertube-checkbox",30),p(2,An,1,0,null,23)(3,yn,2,1,"ng-container",31),s()()),t&2){let e=n.$implicit;a(),r("inputName",e.id)("formControlName",e.id)("labelText",e.label),a(),r("ngIf",e.help),a(),r("ngIf",e.description);}}function Dn(t,n){if(t&1&&(d(0,"div",35),u(1,"my-peertube-checkbox",36)(2,"my-timestamp-input",37),s()),t&2){let e=_(2);a(2),r("timestamp",e.timestamp.endAt)("maxTimestamp",e.video.duration);}}function Pn(t,n){if(t&1&&(Oe(0,3,1),Ee(1),Se()),t&2){let e=_(2);a(),b(e.originHost),V(0);}}function In(t,n){if(t&1&&(d(0,"div",38),h(1),s()),t&2){let e=_(2);a(),F(" ",e.formErrors.reason," ");}}function Nn(t,n){if(t&1){let e=A();d(0,"div",4)(1,"h4",5),g(2,1),s(),d(3,"button",6),E("click",function(){v(e);let o=_();return f(o.hide());}),u(4,"my-global-icon",7),s()(),d(5,"div",8)(6,"form",9),E("ngSubmit",function(){v(e);let o=_();return f(o.report());}),d(7,"div",10)(8,"div",11)(9,"label",12),g(10,2),s(),d(11,"div",13),O(12,14),p(13,Rn,4,5,"div",15),S(),s()(),d(14,"div",16),u(15,"my-embed",17),d(16,"div",18),u(17,"my-peertube-checkbox",19)(18,"my-timestamp-input",20),s(),p(19,Dn,3,2,"div",21),d(20,"div",22),Oe(21,3),p(22,Pn,2,1,"ng-container",23),Se(),s(),d(23,"div",24),u(24,"textarea",25),p(25,In,2,1,"div",26),s()()(),d(26,"div",27)(27,"input",28),E("click",function(){v(e);let o=_();return f(o.hide());})("key.enter",function(){v(e);let o=_();return f(o.hide());}),s(),u(28,"input",29),s()()();}if(t&2){let e=_();a(2),b(e.video.name),V(2),a(4),r("formGroup",e.form),a(7),r("ngForOf",e.predefinedReasons),a(2),r("video",e.video),a(3),r("timestamp",e.timestamp.startAt)("maxTimestamp",e.video.duration),a(),r("ngIf",e.timestamp.hasStart),a(3),r("ngIf",e.isRemote()),b(e.currentHost),V(21),a(2),r("ngClass",y(12,Tn,e.formErrors.reason)),a(),r("ngIf",e.formErrors.reason),a(3),r("disabled",!e.form.valid);}}var et=class et extends ve{constructor(e,i,o,c){super();this.formReactiveService=e;this.modalService=i;this.abuseService=o;this.notifier=c;l(this,"video",null);l(this,"modal");l(this,"error",null);l(this,"predefinedReasons",[]);l(this,"openedModal");}get currentHost(){return window.location.host;}get originHost(){return this.isRemote()?this.video.account.host:"";}get timestamp(){return this.form.get("timestamp").value;}ngOnInit(){this.buildForm({reason:Ke,predefinedReasons:Te(ze,e=>null),timestamp:{hasStart:null,startAt:null,hasEnd:null,endAt:null}}),this.predefinedReasons=this.abuseService.getPrefefinedReasons("video");}show(){this.openedModal=this.modalService.open(this.modal,{centered:!0,keyboard:!1,size:"lg"});}hide(){this.openedModal.close(),this.openedModal=null;}report(){let e=this.form.get("reason").value,i=Object.keys(Ue(this.form.get("predefinedReasons").value)),{hasStart:o,startAt:c,hasEnd:m,endAt:M}=this.form.get("timestamp").value;this.abuseService.reportVideo({reason:e,predefinedReasons:i,video:{id:this.video.id,startAt:o&&c?c:void 0,endAt:m&&M?M:void 0}}).subscribe({next:()=>{this.notifier.success("V\xEDdeo reportado."),this.hide();},error:T=>this.notifier.error(T.message)});}isRemote(){return!this.video.isLocal;}};l(et,"\u0275fac",function(i){return new(i||et)(C(ge),C(oe),C(qe),C(ae));}),l(et,"\u0275cmp",R({type:et,selectors:[["my-video-report"]],viewQuery:function(i,o){if(i&1&&k(hn,7),i&2){let c;H(c=G())&&(o.modal=c.first);}},inputs:{video:"video"},standalone:!0,features:[se,D],decls:2,vars:0,consts:()=>{let e;e="Close this modal";let i;i="Empezar en";let o;o="Describe el problema\u2026";let c;c="Cancelar";let m;m="Enviar";let M;M="Denunciar el video \""+"\uFFFD0\uFFFD"+"\"";let T;T="\xBFCu\xE1l es el problema?";let x;x="Su informe se enviar\xE1 a los moderadores de "+"\uFFFD0\uFFFD"+""+"\uFFFD*22:1\uFFFD\uFFFD#1:1\uFFFD"+" y se reenviar\xE1 tambi\xE9n al origen del video ("+"\uFFFD0:1\uFFFD"+")"+"\uFFFD/#1:1\uFFFD\uFFFD/*22:1\uFFFD"+". ";let ie;return ie="Detener en",[["modal",""],M,T,x,[1,"modal-header"],[1,"modal-title"],["title",e,1,"border-0","p-0",3,"click"],["iconName","cross"],[1,"modal-body"],["novalidate","",3,"ngSubmit","formGroup"],[1,"row"],[1,"col-12","col-md-5"],["for","reportPredefinedReasons"],[1,"ms-2","mt-2","d-flex","flex-column"],["formGroupName","predefinedReasons"],["class","form-group",4,"ngFor","ngForOf"],[1,"col-12","col-md-7"],[3,"video"],["formGroupName","timestamp",1,"mb-1","mt-3","start-at"],["formControlName","hasStart","labelText",i],["formControlName","startAt","inputName","startAt",3,"timestamp","maxTimestamp"],["class","mb-3 stop-at","formGroupName","timestamp",4,"ngIf"],[1,"information"],[4,"ngIf"],[1,"form-group"],["placeholder",o,"formControlName","reason","ngbAutofocus","",1,"form-control",3,"ngClass"],["class","form-error","role","alert",4,"ngIf"],[1,"form-group","inputs"],["type","button","role","button","value",c,1,"peertube-button","grey-button",3,"click","key.enter"],["type","submit","value",m,1,"peertube-button","orange-button",3,"disabled"],[3,"inputName","formControlName","labelText"],["ngProjectAs","description",5,["description"],4,"ngIf"],["ptTemplate","help"],[3,"innerHTML"],["ngProjectAs","description",5,["description"]],["formGroupName","timestamp",1,"mb-3","stop-at"],["formControlName","hasEnd","labelText",ie],["formControlName","endAt","inputName","endAt",3,"timestamp","maxTimestamp"],["role","alert",1,"form-error"]];},template:function(i,o){i&1&&p(0,Nn,29,14,"ng-template",null,0,z);},dependencies:[$,j,_e,J,X,de,me,ce,pe,Ge,W,re,P,je,Gi,Dt,U],styles:[".information[_ngcontent-%COMP%]{margin-bottom:20px}textarea[_ngcontent-%COMP%]{color:var(--textareaForegroundColor)!important;background-color:var(--textareaBackgroundColor)!important;height:100px;font-size:15px;padding:3px 15px;width:100%;max-width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid var(--inputBorderColor);border-radius:3px;line-height:23px}textarea[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}textarea[readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width: calc(100% + 40px)){textarea[_ngcontent-%COMP%]{width:100%}}.start-at[_ngcontent-%COMP%], .stop-at[_ngcontent-%COMP%]{width:300px;display:flex;align-items:center}.start-at[_ngcontent-%COMP%]   my-timestamp-input[_ngcontent-%COMP%], .stop-at[_ngcontent-%COMP%]   my-timestamp-input[_ngcontent-%COMP%]{margin-inline-start:.625rem}"]}));var wt=et;var qi={VALIDATORS:[le.required,le.minLength(1),le.maxLength(120)],MESSAGES:{required:"Se requiere un nombre para mostrar.",minlength:"El nombre mostrado tiene que contener por lo menos 1 car\xE1cter.",maxlength:"El nombre a mostrar no puede ocupar m\xE1s de 120 caracteres."}},el={VALIDATORS:[le.required],MESSAGES:{required:"Se requiere privacidad."}},tl={VALIDATORS:[le.minLength(3),le.maxLength(1e3)],MESSAGES:{minlength:"La descripci\xF3n debe ocupar como m\xEDnimo 3 caracteres.",maxlength:"La descripci\xF3n no puede contener m\xE1s de 1.000 caracteres."}},il={VALIDATORS:[],MESSAGES:{required:"El canal es obligatorio cuando la lista de reproducci\xF3n es p\xFAblica."}};function nl(t,n){n.toString()===Et.PUBLIC.toString()?t.setValidators([le.required]):t.setValidators(null),t.markAsDirty(),t.updateValueAndValidity();}var Ji={VALIDATORS:[le.minLength(2),le.maxLength(300)],MESSAGES:{minlength:"El motivo del bloque debe tener al menos 2 caracteres de longitud.",maxlength:"El motivo del bloqueo no puede tener m\xE1s de 300 caracteres."}};var Vn=["modal"],wn=t=>({"input-error":t});function xn(t,n){if(t&1&&(O(0),d(1,"h4",21),g(2,1),s(),S()),t&2){let e=_(2);a(2),b(e.videos.length),V(2);}}function Ln(t,n){if(t&1&&(d(0,"h4",21),g(1,2),s()),t&2){let e=_(3);a(),b(e.getSingleVideo().name),V(1);}}function Fn(t,n){if(t&1&&(d(0,"h4",21),g(1,3),s()),t&2){let e=_(3);a(),b(e.getSingleVideo().name),V(1);}}function $n(t,n){if(t&1&&(O(0),p(1,Ln,2,1,"h4",22)(2,Fn,2,1,"h4",22),S()),t&2){let e=_(2);a(),r("ngIf",!e.getSingleVideo().isLive),a(),r("ngIf",e.getSingleVideo().isLive);}}function kn(t,n){if(t&1&&(d(0,"div",23),h(1),s()),t&2){let e=_(2);a(),F(" ",e.formErrors.reason," ");}}function Hn(t,n){t&1&&(d(0,"span"),g(1,4),s());}function Gn(t,n){t&1&&(d(0,"span"),g(1,5),s());}function zn(t,n){if(t&1&&(d(0,"div",13)(1,"my-peertube-checkbox",24),O(2,25),p(3,Hn,2,0,"span",8)(4,Gn,2,0,"span",8),S(),s()()),t&2){let e=_(2);a(3),r("ngIf",e.isMultiple()),a(),r("ngIf",!e.isMultiple());}}function Bn(t,n){t&1&&(d(0,"strong",26),g(1,6),s());}function Un(t,n){if(t&1){let e=A();d(0,"div",7),p(1,xn,3,1,"ng-container",8)(2,$n,3,2,"ng-container",8),d(3,"button",9),E("click",function(){v(e);let o=_();return f(o.hide());}),u(4,"my-global-icon",10),s()(),d(5,"div",11)(6,"form",12),E("ngSubmit",function(){v(e);let o=_();return f(o.block());}),d(7,"div",13),u(8,"textarea",14),p(9,kn,2,1,"div",15),s(),p(10,zn,5,2,"div",16)(11,Bn,2,0,"strong",17),d(12,"div",18)(13,"input",19),E("click",function(){v(e);let o=_();return f(o.hide());})("key.enter",function(){v(e);let o=_();return f(o.hide());}),s(),u(14,"input",20),s()()();}if(t&2){let e=_();a(),r("ngIf",e.isMultiple()),a(),r("ngIf",!e.isMultiple()),a(4),r("formGroup",e.form),a(2),r("ngClass",y(8,wn,e.formErrors.reason)),a(),r("ngIf",e.formErrors.reason),a(),r("ngIf",e.hasLocal()),a(),r("ngIf",e.hasLive()),a(3),r("disabled",!e.form.valid);}}var tt=class tt extends ve{constructor(e,i,o,c){super();this.formReactiveService=e;this.modalService=i;this.videoBlocklistService=o;this.notifier=c;l(this,"modal");l(this,"videoBlocked",new N());l(this,"videos");l(this,"error",null);l(this,"openedModal");}ngOnInit(){let e={unfederate:"true"};this.buildForm({reason:Ji,unfederate:null},e);}isMultiple(){return this.videos.length>1;}getSingleVideo(){return this.videos[0];}hasLive(){return this.videos.some(e=>e.isLive);}hasLocal(){return this.videos.some(e=>e.isLocal);}show(e){this.videos=e,this.openedModal=this.modalService.open(this.modal,{centered:!0,keyboard:!1});}hide(){this.openedModal.close(),this.openedModal=null;}block(){let e=this.videos.map(i=>({videoId:i.id,reason:this.form.value.reason||void 0,unfederate:i.isLocal?this.form.value.unfederate:void 0}));this.videoBlocklistService.blockVideo(e).subscribe({next:()=>{let i=wi("{count, plural, =1 {Bloqueado {videoName}.} other {Bloqueados {count} videos.}}",{count:this.videos.length,videoName:this.getSingleVideo().name});this.notifier.success(i),this.hide();for(let o of e){let c=this.videos.find(m=>m.id===o.videoId);c.blacklisted=!0,c.blacklistedReason=o.reason;}this.videoBlocked.emit();},error:i=>this.notifier.error(i.message)});}};l(tt,"\u0275fac",function(i){return new(i||tt)(C(ge),C(oe),C(Pt),C(ae));}),l(tt,"\u0275cmp",R({type:tt,selectors:[["my-video-block"]],viewQuery:function(i,o){if(i&1&&k(Vn,7),i&2){let c;H(c=G())&&(o.modal=c.first);}},outputs:{videoBlocked:"videoBlocked"},standalone:!0,features:[se,D],decls:2,vars:0,consts:()=>{let e;e="Close this modal";let i;i="Describe la raz\xF3n\u2026";let o;o="Cancelar";let c;c="Bloquear";let m;m="Bloquear el v\xEDdeo "+"\uFFFD0\uFFFD"+"";let M;M="Bloquear video \xAB"+"\uFFFD0\uFFFD"+"\xBB";let T;T="Bloquear directo \xAB"+"\uFFFD0\uFFFD"+"\xBB";let x;x="No federado";let ie;ie="Esto le pedir\xE1 a las instancias remotas que eliminen los v\xEDdeos locales";let B;B="Esto le pedir\xE1 a las instancias remotas que eliminen este video";let Me;return Me="El bloqueo de un directo terminar\xE1 autom\xE1ticamente la emisi\xF3n en directo.",[["modal",""],m,M,T,ie,B,Me,[1,"modal-header"],[4,"ngIf"],["title",e,1,"border-0","p-0",3,"click"],["iconName","cross"],[1,"modal-body"],["novalidate","",3,"ngSubmit","formGroup"],[1,"form-group"],["placeholder",i,"formControlName","reason",1,"form-control",3,"ngClass"],["class","form-error","role","alert",4,"ngIf"],["class","form-group",4,"ngIf"],["class","live-info",4,"ngIf"],[1,"form-group","inputs"],["type","button","role","button","value",o,1,"peertube-button","grey-button",3,"click","key.enter"],["type","submit","value",c,1,"peertube-button","orange-button",3,"disabled"],[1,"modal-title"],["class","modal-title",4,"ngIf"],["role","alert",1,"form-error"],["inputName","unfederate","formControlName","unfederate","labelText",x],["ngProjectAs","description",5,["description"]],[1,"live-info"]];},template:function(i,o){i&1&&p(0,Un,15,10,"ng-template",null,0,z);},dependencies:[P,$,j,_e,J,X,de,me,ce,pe,U,re],styles:["textarea[_ngcontent-%COMP%]{color:var(--textareaForegroundColor)!important;background-color:var(--textareaBackgroundColor)!important;height:100px;font-size:15px;padding:3px 15px;width:100%;max-width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid var(--inputBorderColor);border-radius:3px;line-height:23px}textarea[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}textarea[readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width: calc(100% + 40px)){textarea[_ngcontent-%COMP%]{width:100%}}.live-info[_ngcontent-%COMP%]{margin:40px 0 20px}"]}));var xt=tt;var Wn=["modal"],Xn=t=>["/videos","update",t];function jn(t,n){t&1&&(d(0,"div",32),g(1,4),s());}function Yn(t,n){t&1&&(d(0,"div",32),g(1,5),s());}function Qn(t,n){if(t&1&&(d(0,"div",27)(1,"label",33),g(2,6),s(),u(3,"my-input-text",34),s()),t&2){let e=_(3);a(3),r("value",e.live.rtmpUrl)("withToggle",!1)("withCopy",!0)("show",!0)("readonly",!0);}}function Kn(t,n){if(t&1&&(d(0,"div",27)(1,"label",35),g(2,7),s(),u(3,"my-input-text",36),s()),t&2){let e=_(3);a(3),r("value",e.live.rtmpsUrl)("withToggle",!1)("withCopy",!0)("show",!0)("readonly",!0);}}function qn(t,n){t&1&&(d(0,"span",45),g(1,10),s());}function Jn(t,n){if(t&1&&(d(0,"span",46),h(1),s()),t&2){let e=_().$implicit,i=_(4);a(),L(i.getErrorLabel(e));}}function Zn(t,n){if(t&1&&(d(0,"span"),g(1,11),te(2,"date"),s()),t&2){let e=_().$implicit;a(2),b($e(2,1,e.endDate,"medium")),V(1);}}function eo(t,n){if(t&1&&(d(0,"a",47),g(1,12),s()),t&2){let e=_().$implicit,i=_(4);r("routerLink",i.getVideoUrl(e.replayVideo));}}function to(t,n){t&1&&(d(0,"span"),g(1,13),s());}function io(t,n){if(t&1&&(d(0,"div",40),p(1,qn,2,0,"span",41)(2,Jn,2,1,"span",42),d(3,"span"),g(4,9),te(5,"date"),s(),p(6,Zn,3,4,"span",43)(7,eo,2,1,"a",44)(8,to,2,0,"span",43),s()),t&2){let e=n.$implicit,i=_(4);a(),r("ngIf",!i.getErrorLabel(e)),a(),r("ngIf",i.getErrorLabel(e)),a(3),b($e(5,6,e.startDate,"medium")),V(4),a(),r("ngIf",e.endDate),a(),r("ngIf",e.replayVideo),a(),r("ngIf",i.isReplayBeingProcessed(e));}}function no(t,n){if(t&1&&(d(0,"div",37)(1,"div",38),g(2,8),s(),p(3,io,9,9,"div",39),s()),t&2){let e=_(3);a(3),r("ngForOf",e.latestLiveSessions);}}function oo(t,n){if(t&1&&(d(0,"div",23)(1,"div"),p(2,jn,2,0,"div",24)(3,Yn,2,0,"div",24),s(),d(4,"div",25),u(5,"my-live-documentation-link"),s(),p(6,Qn,4,5,"div",26)(7,Kn,4,5,"div",26),d(8,"div",27)(9,"label",28),g(10,2),s(),u(11,"my-input-text",29),d(12,"div",30),g(13,3),s()(),p(14,no,4,1,"div",31),s()),t&2){let e=_(2);a(2),r("ngIf",e.live.permanentLive),a(),r("ngIf",e.live.saveReplay),a(3),r("ngIf",e.live.rtmpUrl),a(),r("ngIf",e.live.rtmpsUrl),a(4),r("value",e.live.streamKey)("withCopy",!0)("readonly",!0),a(3),r("ngIf",e.latestLiveSessions.length!==0);}}function ao(t,n){if(t&1){let e=A();d(0,"div",14)(1,"h4",15),g(2,1),s(),d(3,"button",16),E("click",function(){let o=v(e).dismiss;return f(o());}),u(4,"my-global-icon",17),s()(),p(5,oo,15,8,"div",18),d(6,"div",19)(7,"div",20)(8,"input",21),E("click",function(){let o=v(e).dismiss;return f(o());}),s(),d(9,"my-edit-button",22),E("click",function(){let o=v(e).dismiss;return f(o());}),s()()();}if(t&2){let e=_();a(5),r("ngIf",e.live),a(4),r("ptRouterLink",y(2,Xn,e.video.shortUUID));}}var it=class it{constructor(n,e){this.modalService=n;this.liveVideoService=e;l(this,"modal");l(this,"video");l(this,"live");l(this,"latestLiveSessions",[]);}show(n){this.video=n,this.live=void 0,this.loadLiveInfo(n),this.modalService.open(this.modal,{centered:!0});}getVideoUrl(n){return Qe.buildWatchUrl(n);}getErrorLabel(n){return n.error?{[ue.BAD_SOCKET_HEALTH]:"Servidor demasiado lento",[ue.BLACKLISTED]:"Directo vetado",[ue.DURATION_EXCEEDED]:"Se excedi\xF3 la duraci\xF3n m\xE1xima",[ue.FFMPEG_ERROR]:"Error del servidor",[ue.QUOTA_EXCEEDED]:"Cuota excedida",[ue.RUNNER_JOB_CANCEL]:"Parado el trabajo ejecut\xE1ndose",[ue.RUNNER_JOB_ERROR]:"Error en el proceso ejecut\xE1ndose",[ue.UNKNOWN_ERROR]:"Error desconocido",[ue.INVALID_INPUT_VIDEO_STREAM]:"Secuencia de entrada de v\xEDdeo no v\xE1lida"}[n.error]:void 0;}isReplayBeingProcessed(n){return n.endDate?n.saveReplay&&!n.endingProcessed:!1;}loadLiveInfo(n){this.liveVideoService.getVideoLive(n.id).subscribe(e=>this.live=e),this.liveVideoService.listSessions(n.id).subscribe(({data:e})=>this.latestLiveSessions=e.reverse().slice(0,5));}};l(it,"\u0275fac",function(e){return new(e||it)(C(oe),C(It));}),l(it,"\u0275cmp",R({type:it,selectors:[["my-live-stream-information"]],viewQuery:function(e,i){if(e&1&&k(Wn,7),e&2){let o;H(o=G())&&(i.modal=o.first);}},standalone:!0,features:[vi([It]),D],decls:2,vars:0,consts:()=>{let n;n="Close this modal";let e;e="Cerrar";let i;i="Actualizar la configuraci\xF3n del directo";let o;o="Informaci\xF3n en vivo";let c;c="Clave de transmisi\xF3n en vivo";let m;m="\u26A0\uFE0F Nunca compartas tu clave de transmisi\xF3n con nadie.";let M;M="Permanente/recurrente en vivo";let T;T="La repetici\xF3n se guardar\xE1";let x;x="URL de RTMP en vivo";let ie;ie="Url RTMPS del directo";let B;B="\xDAltimas sesiones en vivo";let Me;Me="Comenz\xF3 en "+"\uFFFD0\uFFFD"+"";let I;I="Correcto";let oi;oi="Terminado en "+"\uFFFD0\uFFFD"+"";let ai;ai="Ir a reproducir";let ri;return ri="La reproducci\xF3n se est\xE1 procesando...",[["modal",""],o,c,m,M,T,x,ie,B,Me,I,oi,ai,ri,[1,"modal-header"],[1,"modal-title"],["title",n,1,"border-0","p-0",3,"click"],["iconName","cross"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],[1,"form-group","inputs"],["type","button","role","button","value",e,1,"peertube-button","grey-button",3,"click"],["label",i,3,"click","ptRouterLink"],[1,"modal-body"],["class","pt-badge badge-blue",4,"ngIf"],[1,"alert","pt-alert-primary"],["class","form-group",4,"ngIf"],[1,"form-group"],["for","liveVideoStreamKey"],["inputId","liveVideoStreamKey",3,"value","withCopy","readonly"],[1,"form-group-description"],["class","journal",4,"ngIf"],[1,"pt-badge","badge-blue"],["for","liveVideoRTMPUrl"],["inputId","liveVideoRTMPUrl",3,"value","withToggle","withCopy","show","readonly"],["for","liveVideoRTMPSUrl"],["inputId","liveVideoRTMPSUrl",3,"value","withToggle","withCopy","show","readonly"],[1,"journal"],[1,"mb-2","fw-bold"],["class","journal-session",4,"ngFor","ngForOf"],[1,"journal-session"],["class","pt-badge badge-success",4,"ngIf"],["class","pt-badge badge-danger",4,"ngIf"],[4,"ngIf"],["target","_blank",3,"routerLink",4,"ngIf"],[1,"pt-badge","badge-success"],[1,"pt-badge","badge-danger"],["target","_blank",3,"routerLink"]];},template:function(e,i){e&1&&p(0,ao,10,4,"ng-template",null,0,z);},dependencies:[$,P,Bi,Ye,W,He,zi,Ei],styles:['@charset "UTF-8";p-autocomplete[_ngcontent-%COMP%]{display:block}.form-group[_ngcontent-%COMP%]{margin:20px 0}.pt-alert-primary[_ngcontent-%COMP%]{margin:1rem 0}.pt-badge[_ngcontent-%COMP%]{font-size:13px;margin-inline-end:.3125rem}.journal-session[_ngcontent-%COMP%]{margin-bottom:5px}.journal-session[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(.pt-badge, [_ngcontent-%COMP%]:last-child):after{margin:3px;content:"\\2022"}']}));var Lt=it;var Zi=tn(nn());var lo=t=>({"has-optional-row":t}),so=t=>({invisible:t}),_o=t=>({"input-error":t});function co(t,n){if(t&1){let e=A();O(0),d(1,"my-peertube-checkbox",27),E("click",function(o){let c=v(e).$implicit,m=w(3),M=w(5),T=_(2).$implicit,x=_();return f(x.toggleOptionalPlaylist(o,T,c,m.timestamp,M.timestamp));}),s(),d(2,"my-timestamp-input",28,0),q("ngModelChange",function(o){let c=v(e).$implicit;return K(c.startTimestamp,o)||(c.startTimestamp=o),f(o);}),E("inputBlur",function(){let o=v(e).$implicit,c=_(2).$implicit,m=_();return f(m.onElementTimestampUpdate(c,o));}),s(),d(4,"my-timestamp-input",28,1),q("ngModelChange",function(o){let c=v(e).$implicit;return K(c.stopTimestamp,o)||(c.stopTimestamp=o),f(o);}),E("inputBlur",function(){let o=v(e).$implicit,c=_(2).$implicit,m=_();return f(m.onElementTimestampUpdate(c,o));}),s(),S();}if(t&2){let e=n.$implicit,i=_(2).$implicit,o=_();a(),r("inputName",o.getOptionalInputName(i,e))("ngModel",e.enabled),a(),r("maxTimestamp",o.video.duration),Q("ngModel",e.startTimestamp),a(2),r("maxTimestamp",o.video.duration),Q("ngModel",e.stopTimestamp);}}function po(t,n){if(t&1&&(d(0,"div",24)(1,"div",25),g(2,4),s(),d(3,"div",25),g(4,5),s(),p(5,co,6,6,"ng-container",26),s()),t&2){let e=_().$implicit,i=_();a(5),r("ngForOf",i.buildOptionalRowElements(e));}}function mo(t,n){if(t&1){let e=A();d(0,"div",18)(1,"button",19),E("click",function(o){let c=v(e).$implicit,m=_();return f(m.toggleMainPlaylist(o,c));}),u(2,"my-peertube-checkbox",20),d(3,"label",21),h(4),s(),d(5,"button",22),E("click",function(o){let c=v(e).$implicit,m=_();return o.stopPropagation(),f(m.toggleOptionalRow(c));}),u(6,"my-global-icon",16),s()(),p(7,po,6,1,"div",23),s();}if(t&2){let e=n.$implicit,i=_();r("ngClass",y(8,lo,e.optionalRowDisplayed)),a(2),r("disabled",i.isPresentMultipleTimes(e)||e.optionalRowDisplayed)("inputName",i.getPrimaryInputName(e))("ngModel",i.isPrimaryCheckboxChecked(e)),a(),r("for",i.getPrimaryInputName(e)),a(),F(" ",e.displayName," "),a(),r("ngClass",y(10,so,!i.isPrimaryCheckboxChecked(e))),a(2),r("ngIf",e.optionalRowDisplayed);}}function uo(t,n){if(t&1&&(d(0,"div",35),h(1),s()),t&2){let e=_(2);a(),F(" ",e.formErrors.displayName," ");}}function go(t,n){if(t&1){let e=A();d(0,"form",29),E("ngSubmit",function(){v(e);let o=_();return f(o.createPlaylist());}),d(1,"div",30)(2,"label",31),g(3,6),s(),u(4,"input",32),p(5,uo,2,1,"div",33),s(),u(6,"input",34),s();}if(t&2){let e=_();r("formGroup",e.form),a(4),r("ngClass",y(4,_o,e.formErrors.displayName)),a(),r("ngIf",e.formErrors.displayName),a(),r("disabled",!e.form.valid);}}var Ft=(0,Zi.default)("peertube:playlists:VideoAddToPlaylistComponent"),nt=class nt extends ve{constructor(e,i,o,c,m){super();this.formReactiveService=e;this.authService=i;this.notifier=o;this.videoPlaylistService=c;this.cd=m;l(this,"video");l(this,"currentVideoTimestamp");l(this,"lazyLoad",!1);l(this,"isNewPlaylistBlockOpened",!1);l(this,"videoPlaylistSearch");l(this,"videoPlaylistSearchChanged",new li());l(this,"videoPlaylists",[]);l(this,"disabled",!1);l(this,"listenToPlaylistChangeSub");l(this,"playlistsData",[]);l(this,"pendingAddId");}get user(){return this.authService.getUser();}ngOnInit(){this.buildForm({displayName:qi}),this.videoPlaylistService.listenToMyAccountPlaylistsChange().subscribe(e=>{this.playlistsData=e.data,this.videoPlaylistService.runVideoExistsInPlaylistCheck(this.video.id);}),this.videoPlaylistSearchChanged.pipe(ci(500)).subscribe(()=>this.load()),this.lazyLoad===!1&&this.load();}ngOnChanges(e){e.video&&this.reload();}ngOnDestroy(){this.unsubscribePlaylistChanges();}disableForReuse(){this.disabled=!0;}enabledForReuse(){this.disabled=!1;}reload(){Ft("Reloading component"),this.videoPlaylists=[],this.videoPlaylistSearch=void 0,this.load(),this.cd.markForCheck();}load(){Ft("Loading component"),this.listenToVideoPlaylistChange(),this.videoPlaylistService.listMyPlaylistWithCache(this.user,this.videoPlaylistSearch).subscribe(e=>{this.playlistsData=e.data,this.videoPlaylistService.runVideoExistsInPlaylistCheck(this.video.id);});}openChange(e){e===!1&&(this.isNewPlaylistBlockOpened=!1);}openCreateBlock(e){e.preventDefault(),this.isNewPlaylistBlockOpened=!0;}toggleMainPlaylist(e,i){if(e.preventDefault(),!(this.isPresentMultipleTimes(i)||i.optionalRowDisplayed)){if(i.elements.length===0){let o={enabled:!0,playlistElementId:void 0,startTimestamp:0,stopTimestamp:this.video.duration};this.addVideoInPlaylist(i,o);}else this.removeVideoFromPlaylist(i,i.elements[0].playlistElementId),i.elements=[];this.cd.markForCheck();}}toggleOptionalPlaylist(e,i,o,c,m){if(e.preventDefault(),o.enabled)this.removeVideoFromPlaylist(i,o.playlistElementId),o.enabled=!1,this.isPrimaryCheckboxChecked(i)===!1&&(i.optionalRowDisplayed=!1);else{let M={enabled:!0,playlistElementId:void 0,startTimestamp:c,stopTimestamp:m};this.addVideoInPlaylist(i,M);}this.cd.markForCheck();}createPlaylist(){let i={displayName:this.form.value.displayName,privacy:Et.PRIVATE};this.videoPlaylistService.createVideoPlaylist(i).subscribe({next:()=>{this.isNewPlaylistBlockOpened=!1,this.cd.markForCheck();},error:o=>this.notifier.error(o.message)});}onVideoPlaylistSearchChanged(){this.videoPlaylistSearchChanged.next();}isPrimaryCheckboxChecked(e){return this.pendingAddId===e.id||e.elements.filter(i=>i.enabled).length!==0;}toggleOptionalRow(e){e.optionalRowDisplayed=!e.optionalRowDisplayed,this.cd.markForCheck();}getPrimaryInputName(e){return"in-playlist-primary-"+e.id;}getOptionalInputName(e,i){let o=i?"-"+i.playlistElementId:"";return"in-playlist-optional-"+e.id+o;}buildOptionalRowElements(e){let i=e.elements,o=i.length===0?void 0:i[i.length-1];return(!o||o.enabled===!0)&&i.push({enabled:!1,startTimestamp:0,stopTimestamp:this.video.duration}),i;}isPresentMultipleTimes(e){return e.elements.filter(i=>i.enabled===!0).length>1;}onElementTimestampUpdate(e,i){if(!i.playlistElementId||i.enabled===!1)return;let o={startTimestamp:i.startTimestamp,stopTimestamp:i.stopTimestamp};this.videoPlaylistService.updateVideoOfPlaylist(e.id,i.playlistElementId,o,this.video.id).subscribe({next:()=>{this.notifier.success("Marcas de tiempo actualizadas");},error:c=>this.notifier.error(c.message),complete:()=>this.cd.markForCheck()});}isOptionalRowDisplayed(e){let i=e.elements.filter(o=>o.enabled);if(i.length>1)return!0;if(i.length===1){let o=i[0];if(o.startTimestamp&&o.startTimestamp!==0||o.stopTimestamp&&o.stopTimestamp!==this.video.duration)return!0;}return!1;}removeVideoFromPlaylist(e,i){this.videoPlaylistService.removeVideoFromPlaylist(e.id,i,this.video.id).subscribe({next:()=>{this.notifier.success("Video eliminado de \n          "+e.displayName+"\n        ");},error:o=>this.notifier.error(o.message),complete:()=>this.cd.markForCheck()});}listenToVideoPlaylistChange(){this.unsubscribePlaylistChanges(),this.listenToPlaylistChangeSub=this.videoPlaylistService.listenToVideoPlaylistChange(this.video.id).pipe(di(()=>this.disabled===!1)).subscribe(e=>this.rebuildPlaylists(e));}unsubscribePlaylistChanges(){this.listenToPlaylistChangeSub&&(this.listenToPlaylistChangeSub.unsubscribe(),this.listenToPlaylistChangeSub=void 0);}rebuildPlaylists(e){Ft("Got existing results for %d.",this.video.id,e);let i=this.videoPlaylists;this.videoPlaylists=[];for(let o of this.playlistsData){let c=e.filter(T=>T.playlistId===o.id),m={id:o.id,optionalRowDisplayed:!1,displayName:o.displayName,elements:c.map(T=>({enabled:!0,playlistElementId:T.playlistElementId,startTimestamp:T.startTimestamp||0,stopTimestamp:T.stopTimestamp||this.video.duration}))},M=i.find(T=>T.id===o.id);m.optionalRowDisplayed=M?M.optionalRowDisplayed:this.isOptionalRowDisplayed(m),this.videoPlaylists.push(m);}Ft("Rebuilt playlist state for video %d.",this.video.id,this.videoPlaylists),this.cd.markForCheck();}addVideoInPlaylist(e,i){let o={videoId:this.video.id};i.startTimestamp&&(o.startTimestamp=i.startTimestamp),i.stopTimestamp&&i.stopTimestamp!==this.video.duration&&(o.stopTimestamp=i.stopTimestamp),this.pendingAddId=e.id,this.videoPlaylistService.addVideoInPlaylist(e.id,o).subscribe({next:c=>{let m=o.startTimestamp||o.stopTimestamp?"Video agregado en "+e.displayName+" en las marcas de tiempo "+this.formatTimestamp(i)+"":"Video agregado en \n          "+e.displayName+"\n        ";this.notifier.success(m),i&&(i.playlistElementId=c.videoPlaylistElement.id);},error:c=>{this.pendingAddId=void 0,this.cd.markForCheck(),this.notifier.error(c.message);},complete:()=>{this.pendingAddId=void 0,this.cd.markForCheck();}});}formatTimestamp(e){let i=e.startTimestamp?qt(e.startTimestamp):"",o=e.stopTimestamp?qt(e.stopTimestamp):"";return`(${i}-${o})`;}};l(nt,"\u0275fac",function(i){return new(i||nt)(C(ge),C(De),C(ae),C(Nt),C(ft));}),l(nt,"\u0275cmp",R({type:nt,selectors:[["my-video-add-to-playlist"]],inputs:{video:"video",currentVideoTimestamp:"currentVideoTimestamp",lazyLoad:"lazyLoad"},standalone:!0,features:[se,we,D],decls:14,vars:4,consts:()=>{let e;e="Buscar listas de reproducci\xF3n";let i;i="Guardar a";let o;o="Crear una lista de reproducci\xF3n privada";let c;c="Empezar en";let m;m="Detener en";let M;M="Crear";let T;return T="Nombre a mostrar",[["startAt",""],["stopAt",""],i,o,c,m,T,[1,"root"],[1,"header"],[1,"first-row"],[1,"title"],[1,"input-container"],["type","text","placeholder",e,3,"ngModelChange","ngModel"],[1,"playlists"],["class","playlist dropdown-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"new-playlist-button","dropdown-item",3,"click","hidden"],["iconName","add","aria-hidden","true"],["class","new-playlist-block dropdown-item",3,"formGroup","ngSubmit",4,"ngIf"],[1,"playlist","dropdown-item",3,"ngClass"],[1,"primary-row","button-unstyle",3,"click"],[3,"disabled","inputName","ngModel"],[1,"display-name",3,"for"],[1,"optional-row-icon","button-unstyle",3,"click","ngClass"],["class","optional-rows",4,"ngIf"],[1,"optional-rows"],[1,"header-label"],[4,"ngFor","ngForOf"],[3,"click","inputName","ngModel"],[3,"ngModelChange","inputBlur","maxTimestamp","ngModel"],[1,"new-playlist-block","dropdown-item",3,"ngSubmit","formGroup"],[1,"form-group"],["for","displayName"],["type","text","id","displayName","formControlName","displayName",3,"ngClass"],["class","form-error","role","alert",4,"ngIf"],["type","submit","value",M,3,"disabled"],["role","alert",1,"form-error"]];},template:function(i,o){i&1&&(d(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10),g(4,2),s()()(),d(5,"div",11)(6,"input",12),q("ngModelChange",function(m){return K(o.videoPlaylistSearch,m)||(o.videoPlaylistSearch=m),m;}),E("ngModelChange",function(){return o.onVideoPlaylistSearchChanged();}),s()(),d(7,"div",13),p(8,mo,8,12,"div",14),s(),d(9,"button",15),E("click",function(m){return o.openCreateBlock(m);}),u(10,"my-global-icon",16),d(11,"span"),g(12,3),s()(),p(13,go,7,6,"form",17),s()),i&2&&(a(6),Q("ngModel",o.videoPlaylistSearch),a(2),r("ngForOf",o.videoPlaylists),a(),r("hidden",o.isNewPlaylistBlockOpened),a(4),r("ngIf",o.isNewPlaylistBlockOpened));},dependencies:[j,_e,J,X,de,Re,W,U,re,$,P,Dt,me,ce,pe],styles:[".header[_ngcontent-%COMP%], .dropdown-item[_ngcontent-%COMP%], .input-container[_ngcontent-%COMP%]{padding:8px 24px}.dropdown-item[_ngcontent-%COMP%]:active{color:inherit}.header[_ngcontent-%COMP%]{min-width:240px;margin-bottom:10px;border-bottom:1px solid rgba(0,0,0,.1)}.header[_ngcontent-%COMP%]   .first-row[_ngcontent-%COMP%]{display:flex;align-items:center}.header[_ngcontent-%COMP%]   .first-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:18px;flex-grow:1}.playlists[_ngcontent-%COMP%]{max-height:180px;overflow-y:auto}.playlist[_ngcontent-%COMP%]{padding:0}.playlist[_ngcontent-%COMP%] > .primary-row[_ngcontent-%COMP%]{padding:8px 10px 8px 24px}.playlist[_ngcontent-%COMP%] > .optional-rows[_ngcontent-%COMP%]{padding-inline-start:calc(1.275rem + .3vw)}@media (min-width: 1200px){.playlist[_ngcontent-%COMP%] > .optional-rows[_ngcontent-%COMP%]{padding-inline-start:1.5rem}}.playlist.has-optional-row[_ngcontent-%COMP%]:hover{background-color:inherit}.primary-row[_ngcontent-%COMP%]{display:flex;width:100%}.primary-row[_ngcontent-%COMP%]   my-peertube-checkbox[_ngcontent-%COMP%]{align-self:center;margin-inline-end:.625rem}.primary-row[_ngcontent-%COMP%]   .display-name[_ngcontent-%COMP%]{display:flex;align-items:flex-end;flex-grow:1;margin:0;font-weight:400;cursor:pointer}.primary-row[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:14px;cursor:pointer;margin-inline-start:.5rem}.primary-row[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{position:relative;top:1px;width:19px;height:19px;margin-inline-end:0}.primary-row[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .primary-row[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .primary-row[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:#333}.primary-row[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]:hover{opacity:.8}.optional-rows[_ngcontent-%COMP%]{display:grid;grid-template-columns:35px 80px 80px;row-gap:3px;column-gap:10px;align-items:center}.optional-rows[_ngcontent-%COMP%]   my-peertube-checkbox[_ngcontent-%COMP%]{margin-inline-start:auto}.optional-rows[_ngcontent-%COMP%]   .header-label[_ngcontent-%COMP%]{font-size:13px;color:var(--greyForegroundColor);padding-left:2px}.optional-rows[_ngcontent-%COMP%]   .header-label[_ngcontent-%COMP%]:nth-child(1){grid-column:2}.optional-rows[_ngcontent-%COMP%]   .header-label[_ngcontent-%COMP%]:nth-child(2){grid-column:3}.new-playlist-button[_ngcontent-%COMP%], .new-playlist-block[_ngcontent-%COMP%]{padding-top:10px;border-top:1px solid rgba(0,0,0,.1)}.new-playlist-button[_ngcontent-%COMP%]{cursor:pointer}.new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{position:relative;left:-1px;top:-1px;width:21px;height:21px;margin-inline-end:.25rem}.new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:#333}input[type=text][_ngcontent-%COMP%]{font-size:15px;padding:3px 15px;width:200px;max-width:200px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid var(--inputBorderColor);border-radius:3px;line-height:23px}input[type=text][_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}input[type=text][readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width: 240px){input[type=text][_ngcontent-%COMP%]{width:100%}}input[type=submit][_ngcontent-%COMP%]{padding:4px 13px;border:0;font-weight:600;border-radius:3px!important;text-align:center;cursor:pointer;font-size:15px;line-height:23px}input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-inline-end:.25rem;margin-inline-start:.25rem}input[type=submit][_ngcontent-%COMP%]:focus, input[type=submit][_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--mainColorLightest)}input[type=submit][_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]:active, input[type=submit][_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}input[type=submit][_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}input[type=submit][disabled][_ngcontent-%COMP%], input[type=submit].disabled[_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:var(--inputBorderColor)}input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:#fff}"],changeDetection:0}));var $t=nt;var vo=[[["cancel-button"]]],fo=["cancel-button"];function Co(t,n){t&1&&(O(0),g(1,1),S());}function Eo(t,n){if(t&1&&(d(0,"div",11),u(1,"my-input-text",12),s()),t&2){let e=_(2);a(),r("show",!0)("readonly",!0)("withCopy",!0)("withToggle",!1)("value",e.getCaptionLink());}}function Oo(t,n){if(t&1&&(d(0,"li",7)(1,"button",8),h(2),p(3,Co,2,0,"ng-container",9),s(),p(4,Eo,2,5,"ng-template",10),s()),t&2){let e=n.$implicit;r("ngbNavItem",e.language.id),a(2),F(" ",e.language.label," "),a(),r("ngIf",e.automaticallyGenerated);}}var ot=class ot{constructor(){l(this,"videoCaptions");l(this,"downloaded",new N());l(this,"activeNavId");}getCaptions(){return this.videoCaptions?this.videoCaptions:[];}ngOnInit(){this.hasCaptions()&&(this.activeNavId=this.videoCaptions[0].language.id);}download(){window.location.assign(this.getCaptionLink()),this.downloaded.emit();}hasCaptions(){return this.getCaptions().length!==0;}getCaption(){let n=this.getCaptions().find(e=>e.language.id===this.activeNavId);if(!n){At.error(`Cannot find caption ${this.activeNavId}`);return;}return n;}getCaptionLink(){let n=this.getCaption();return n?window.location.origin+n.captionPath:"";}};l(ot,"\u0275fac",function(e){return new(e||ot)();}),l(ot,"\u0275cmp",R({type:ot,selectors:[["my-subtitle-files-download"]],inputs:{videoCaptions:"videoCaptions"},outputs:{downloaded:"downloaded"},standalone:!0,features:[D],ngContentSelectors:fo,decls:7,vars:3,consts:()=>{let n;n="Descargar";let e;return e="(auto-generated)",[["nav","ngbNav"],e,["ngbNav","",1,"nav-tabs",3,"activeIdChange","activeId"],[3,"ngbNavItem",4,"ngFor","ngForOf"],[1,"mt-2",3,"ngbNavOutlet"],[1,"modal-footer","inputs"],["type","submit","value",n,1,"peertube-button","orange-button",3,"click"],[3,"ngbNavItem"],["ngbNavLink",""],[4,"ngIf"],["ngbNavContent",""],[1,"nav-content"],[3,"show","readonly","withCopy","withToggle","value"]];},template:function(e,i){if(e&1){let o=A();ye(vo),d(0,"ul",2,0),q("activeIdChange",function(m){return v(o),K(i.activeNavId,m)||(i.activeNavId=m),f(m);}),p(2,Oo,5,3,"li",3),s(),u(3,"div",4),d(4,"div",5),he(5),d(6,"input",6),E("click",function(){return v(o),f(i.download());}),s()();}if(e&2){let o=w(1);Q("activeId",i.activeNavId),a(2),r("ngForOf",i.getCaptions()),a(),r("ngbNavOutlet",o);}},dependencies:[P,W,Ye,ht,St,Tt,Ot,Mt],encapsulation:2}));var kt=ot;var So=[[["cancel-button"]]],ho=["cancel-button"],ti=(t,n)=>n.key,ii=t=>({$implicit:t});function To(t,n){t&1&&(d(0,"div",35),g(1,7),s());}function Mo(t,n){if(t&1&&(d(0,"div",36),u(1,"my-input-text",37),s()),t&2){let e=_();a(),r("show",!0)("readonly",!0)("withCopy",!0)("withToggle",!1)("value",e.getVideoFileLink());}}function Ao(t,n){}function yo(t,n){if(t&1&&p(0,Ao,0,0,"ng-template",40),t&2){_(2);let e=w(4);r("ngTemplateOutlet",e);}}function Ro(t,n){t&1&&(O(0,38),d(1,"a",22),O(2),g(3,8),S(),u(4,"my-global-icon",39),s(),p(5,yo,1,1,"ng-template",23),S());}function Do(t,n){}function Po(t,n){if(t&1&&p(0,Do,0,0,"ng-template",40),t&2){_(2);let e=w(4);r("ngTemplateOutlet",e);}}function Io(t,n){if(t&1&&(O(0,41),d(1,"a",22),h(2),s(),p(3,Po,1,1,"ng-template",23),S()),t&2){let e=n.$implicit;r("ngbNavItem",e.resolution.id),a(2),L(e.resolution.label);}}function No(t,n){if(t&1&&(d(0,"span"),h(1),s()),t&2){let e=_().$implicit;a(),L(e.value.value);}}function bo(t,n){t&1&&(d(0,"span"),g(1,9),s());}function Vo(t,n){if(t&1&&(d(0,"div",42)(1,"span"),h(2),s(),p(3,No,2,1,"span")(4,bo,2,0,"span"),s()),t&2){let e=n.$implicit;a(2),L(e.value.label),a(),Ae(e.value.value?3:4);}}function wo(t,n){}function xo(t,n){if(t&1&&p(0,wo,0,0,"ng-template",44),t&2){let e=n.$implicit;_(2);let i=w(12);r("ngTemplateOutlet",i)("ngTemplateOutletContext",y(2,ii,e));}}function Lo(t,n){if(t&1&&(d(0,"div",43),Le(1,xo,1,4,null,44,ti),te(3,"keyvalue"),s()),t&2){let e=_();a(),Fe(Ie(3,0,e.videoFileMetadataFormat));}}function Fo(t,n){}function $o(t,n){if(t&1&&p(0,Fo,0,0,"ng-template",44),t&2){let e=n.$implicit;_(3);let i=w(12);r("ngTemplateOutlet",i)("ngTemplateOutletContext",y(2,ii,e));}}function ko(t,n){if(t&1&&(d(0,"div",43),Le(1,$o,1,4,null,44,ti),te(3,"keyvalue"),s()),t&2){let e=_(2);a(),Fe(Ie(3,0,e.videoFileMetadataVideoStream));}}function Ho(t,n){t&1&&(O(0,21),d(1,"a",22),g(2,10),s(),p(3,ko,4,2,"ng-template",23),S());}function Go(t,n){}function zo(t,n){if(t&1&&p(0,Go,0,0,"ng-template",44),t&2){let e=n.$implicit;_(3);let i=w(12);r("ngTemplateOutlet",i)("ngTemplateOutletContext",y(2,ii,e));}}function Bo(t,n){if(t&1&&(d(0,"div",43),Le(1,zo,1,4,null,44,ti),te(3,"keyvalue"),s()),t&2){let e=_(2);a(),Fe(Ie(3,0,e.videoFileMetadataAudioStream));}}function Uo(t,n){t&1&&(O(0,21),d(1,"a",22),g(2,11),s(),p(3,Bo,4,2,"ng-template",23),S());}function Wo(t,n){if(t&1&&u(0,"div",18),t&2){_();let e=w(10);r("ngbNavOutlet",e);}}function Xo(t,n){t&1&&(u(0,"span",45),O(1),g(2,12),S());}function jo(t,n){t&1&&(u(0,"span",46),O(1),g(2,13),S());}var at=class at{constructor(n,e){this.localeId=n;this.videoService=e;l(this,"video");l(this,"originalVideoFile");l(this,"videoFileToken");l(this,"downloaded",new N());l(this,"downloadType","direct");l(this,"activeResolutionId",-1);l(this,"videoFileMetadataFormat");l(this,"videoFileMetadataVideoStream");l(this,"videoFileMetadataAudioStream");l(this,"isAdvancedCustomizationCollapsed",!0);l(this,"bytesPipe");l(this,"numbersPipe");this.bytesPipe=new Rt(),this.numbersPipe=new bt(this.localeId);}ngOnInit(){this.hasFiles()&&this.onResolutionIdChange(this.getVideoFiles()[0].resolution.id);}getVideoFiles(){if(!this.video)return[];if(this.video.files.length!==0)return this.video.files;let n=this.video.getHlsPlaylist();return n?n.files:[];}download(){window.location.assign(this.getVideoFileLink()),this.downloaded.emit();}onResolutionIdChange(n){return be(this,null,function*(){this.activeResolutionId=n;let e;if(this.activeResolutionId==="original")e=this.originalVideoFile.metadata;else{let i=this.getVideoFile();if(!i)return;!i.metadata&&i.metadataUrl&&(yield this.hydrateMetadataFromMetadataUrl(i)),e=i.metadata;}e&&(this.videoFileMetadataFormat=this.getMetadataFormat(e.format),this.videoFileMetadataVideoStream=this.getMetadataStream(e.streams,"video"),this.videoFileMetadataAudioStream=this.getMetadataStream(e.streams,"audio"));});}hasFiles(){return this.getVideoFiles().length!==0;}getVideoFile(){if(this.activeResolutionId==="original")return;let n=this.getVideoFiles().find(e=>e.resolution.id===this.activeResolutionId);if(!n){At.error(`Could not find file with resolution ${this.activeResolutionId}`);return;}return n;}getVideoFileLink(){let n=this.activeResolutionId==="original"||this.isConfidentialVideo()?"?videoFileToken="+this.videoFileToken:"";if(this.activeResolutionId==="original")return this.originalVideoFile.fileDownloadUrl+n;let e=this.getVideoFile();if(!e)return"";switch(this.downloadType){case"direct":return e.fileDownloadUrl+n;case"torrent":return e.torrentDownloadUrl+n;}}isConfidentialVideo(){return this.activeResolutionId==="original"||We(this.video);}hasMetadata(){return!!this.videoFileMetadataFormat;}getMetadataFormat(n){let e={encoder:o=>({label:"Codificador",value:o}),format_long_name:o=>({label:"Nombre del formato",value:o}),size:o=>({label:"Tama\xF1o",value:this.bytesPipe.transform(+o,2)}),bit_rate:o=>({label:"Bitrate",value:`${this.numbersPipe.transform(+o)}bps`})},i=Object.assign(n,n.tags);return delete i.tags,Te(Jt(i,Ri(e)),(o,c)=>e[c](o));}getMetadataStream(n,e){let i=n.find(c=>c.codec_type===e);if(!i)return;let o={codec_long_name:c=>({label:"Codec",value:c}),profile:c=>({label:"Perfil",value:c}),bit_rate:c=>({label:"Bitrate",value:isNaN(+c)?void 0:`${this.numbersPipe.transform(+c)}bps`})};return e==="video"?o=Object.assign(o,{width:c=>({label:"Resoluci\xF3n",value:`${c}x${i.height}`}),display_aspect_ratio:c=>({label:"Relaci\xF3n de aspecto",value:c}),avg_frame_rate:c=>({label:"Velocidad de fotogramas media",value:c}),pix_fmt:c=>({label:"Formato de p\xEDxeles",value:c})}):o=Object.assign(o,{sample_rate:c=>({label:"Frecuencia de muestreo",value:c}),channel_layout:c=>({label:"Dise\xF1o de canal",value:c})}),Te(Jt(i,Object.keys(o)),(c,m)=>o[m](c));}hydrateMetadataFromMetadataUrl(n){let e=this.videoService.getVideoFileMetadata(n.metadataUrl).pipe(mi(i=>n.metadata=i));return si(e);}};l(at,"\u0275fac",function(e){return new(e||at)(C(vt),C(fe));}),l(at,"\u0275cmp",R({type:at,selectors:[["my-video-files-download"]],inputs:{video:"video",originalVideoFile:"originalVideoFile",videoFileToken:"videoFileToken"},outputs:{downloaded:"downloaded"},standalone:!0,features:[D],ngContentSelectors:ho,decls:35,vars:15,consts:()=>{let n;n="Descargar";let e;e="Formato";let i;i="Descarga directa";let o;o="Torrent (archivo .torrent)";let c;c=" The following link contains a private token and should not be shared with anyone.\n";let m;m="Other users cannot download the original file";let M;M="Original file";let T;T="Desconocido";let x;x="Flujo de v\xEDdeo";let ie;ie="Flujo de audio";let B;B="More information/options";let Me;return Me="Less information/options",[["resolutionNav","ngbNav"],["rootNavContent",""],["navMetadata","ngbNav"],["metadataInfo",""],e,i,o,c,M,T,x,ie,B,Me,["class","alert alert-warning",4,"ngIf"],["ngbNav","",1,"nav-tabs",3,"activeIdChange","activeId"],["ngbNavItem","original",4,"ngIf"],[3,"ngbNavItem",4,"ngFor","ngForOf"],[3,"ngbNavOutlet"],[1,"advanced-filters",3,"ngbCollapse","animation"],["ngbNav","",1,"nav-tabs","nav-metadata"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","",4,"ngIf"],[3,"ngbNavOutlet",4,"ngIf"],[1,"download-type",3,"hidden"],[1,"peertube-radio-container"],["type","radio","name","download","id","download-direct","value","direct",3,"ngModelChange","ngModel"],["for","download-direct"],["type","radio","name","download","id","download-torrent","value","torrent",3,"ngModelChange","ngModel"],["for","download-torrent"],["aria-controls","collapseBasic",1,"advanced-filters-button","button-unstyle",3,"click"],[1,"modal-footer","inputs"],["type","submit","value",n,1,"peertube-button","orange-button",3,"click"],[1,"alert","alert-warning"],[1,"nav-content"],[3,"show","readonly","withCopy","withToggle","value"],["ngbNavItem","original"],["ngbTooltip",m,"iconName","shield"],[3,"ngTemplateOutlet"],[3,"ngbNavItem"],[1,"metadata-attribute"],[1,"file-metadata"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"chevron-down"],[1,"chevron-up"]];},template:function(e,i){if(e&1){let o=A();ye(So),p(0,To,2,0,"div",14),d(1,"div",15,0),E("activeIdChange",function(m){return v(o),f(i.onResolutionIdChange(m));}),p(3,Mo,2,5,"ng-template",null,1,z)(5,Ro,6,0,"ng-container",16)(6,Io,4,2,"ng-container",17),s(),u(7,"div",18),d(8,"div",19)(9,"div",20,2),p(11,Vo,5,2,"ng-template",null,3,z),O(13,21),d(14,"a",22),g(15,4),s(),p(16,Lo,4,2,"ng-template",23),S(),p(17,Ho,4,0,"ng-container",24)(18,Uo,4,0,"ng-container",24),s(),p(19,Wo,1,1,"div",25),d(20,"div",26)(21,"div",27)(22,"input",28),q("ngModelChange",function(m){return v(o),K(i.downloadType,m)||(i.downloadType=m),f(m);}),s(),d(23,"label",29),g(24,5),s()(),d(25,"div",27)(26,"input",30),q("ngModelChange",function(m){return v(o),K(i.downloadType,m)||(i.downloadType=m),f(m);}),s(),d(27,"label",31),g(28,6),s()()()(),d(29,"button",32),E("click",function(){return v(o),f(i.isAdvancedCustomizationCollapsed=!i.isAdvancedCustomizationCollapsed);}),p(30,Xo,3,0)(31,jo,3,0),s(),d(32,"div",33),he(33),d(34,"input",34),E("click",function(){return v(o),f(i.download());}),s()();}if(e&2){let o,c=w(2);r("ngIf",i.isConfidentialVideo()),a(),r("activeId",i.activeResolutionId),a(4),r("ngIf",i.originalVideoFile),a(),r("ngForOf",i.getVideoFiles()),a(),r("ngbNavOutlet",c),a(),r("ngbCollapse",i.isAdvancedCustomizationCollapsed)("animation",!0),a(9),r("ngIf",i.videoFileMetadataVideoStream!==void 0),a(),r("ngIf",i.videoFileMetadataAudioStream!==void 0),a(),r("ngIf",i.hasMetadata()),a(),r("hidden",i.originalVideoFile||!((o=i.getVideoFile())!=null&&o.torrentDownloadUrl)),a(2),Q("ngModel",i.downloadType),a(4),Q("ngModel",i.downloadType),a(3),xe("aria-expanded",!i.isAdvancedCustomizationCollapsed),a(),Ae(i.isAdvancedCustomizationCollapsed?30:31);}},dependencies:[P,j,J,Ct,X,Re,$,W,ht,St,Vi,Tt,Ot,Ye,Mt,Pi,Oi,Be,ke],styles:[".advanced-filters-button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:20px;font-weight:600;cursor:pointer}.advanced-filters-button[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]{margin-top:10x}.nav-metadata[_ngcontent-%COMP%]{margin-top:20px}.file-metadata[_ngcontent-%COMP%]{padding:1rem}.file-metadata[_ngcontent-%COMP%]   .metadata-attribute[_ngcontent-%COMP%]{font-size:13px;display:block;margin-bottom:12px}.file-metadata[_ngcontent-%COMP%]   .metadata-attribute[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-child{min-width:142px;display:inline-block;color:var(--greyForegroundColor);font-weight:700;padding-inline-end:.3125rem}.download-type[_ngcontent-%COMP%]{margin-top:20px}.download-type[_ngcontent-%COMP%]   .peertube-radio-container[_ngcontent-%COMP%]{display:inline-block;margin-inline-end:calc(1.3125rem + .75vw)}@media (min-width: 1200px){.download-type[_ngcontent-%COMP%]   .peertube-radio-container[_ngcontent-%COMP%]{margin-inline-end:1.875rem}}"]}));var Ht=at;var Yo=[[["cancel-button"]]],Qo=["cancel-button"],Ko=(t,n)=>n.id;function qo(t,n){if(t&1){let e=A();d(0,"div",4)(1,"input",8),q("ngModelChange",function(o){v(e);let c=_();return K(c.videoFileChosen,o)||(c.videoFileChosen=o),f(o);}),s(),d(2,"label",9)(3,"strong"),g(4,0),s(),d(5,"span",10),h(6),te(7,"bytes"),s(),u(8,"my-global-icon",11),s()();}if(t&2){let e=_();a(),Q("ngModel",e.videoFileChosen),a(5),gi("",$e(7,4,e.originalVideoFile.size,1)," | ",e.originalVideoFile.width,"x",e.originalVideoFile.height,"");}}function Jo(t,n){if(t&1&&h(0),t&2){let e=_().$implicit;ui(" | ",e.width,"x",e.height," ");}}function Zo(t,n){if(t&1&&(h(0," | "),O(1),g(2,1),S()),t&2){let e=_().$implicit;a(2),b(e.fps),V(2);}}function ea(t,n){if(t&1){let e=A();d(0,"div",4)(1,"input",12),q("ngModelChange",function(o){v(e);let c=_();return K(c.videoFileChosen,o)||(c.videoFileChosen=o),f(o);}),s(),d(2,"label",13)(3,"strong"),h(4),s(),d(5,"span",10),h(6),te(7,"bytes"),p(8,Jo,1,2)(9,Zo,3,1,"ng-container"),s()()();}if(t&2){let e=n.$implicit,i=_();a(),r("id","file-"+e.id),Q("ngModel",i.videoFileChosen),r("value","file-"+e.id),a(),r("for","file-"+e.id),a(2),L(i.getLabel(e)),a(2),F(" ",$e(7,8,i.getFileSize(e),1)," "),a(2),Ae(e.width?8:-1),a(),Ae(e.fps&&e.fps>=50?9:-1);}}function ta(t,n){if(t&1){let e=A();d(0,"div",2)(1,"my-peertube-checkbox",14),q("ngModelChange",function(o){v(e);let c=_();return K(c.includeAudio,o)||(c.includeAudio=o),f(o);}),s()();}if(t&2){let e=_();a(),Q("ngModel",e.includeAudio);}}var rt=class rt{constructor(n){this.videoService=n;l(this,"video");l(this,"originalVideoFile");l(this,"videoFileToken");l(this,"downloaded",new N());l(this,"includeAudio",!0);l(this,"videoFileChosen","");l(this,"videoFiles");}ngOnInit(){this.videoFiles=this.buildVideoFiles(),this.videoFiles.length!==0&&(this.videoFileChosen="file-"+yi(this.videoFiles,"resolution").id);}getLabel(n){return Di(n.resolution.label,n.fps);}getFileSize(n){if(n.hasAudio&&n.hasVideo||n.hasAudio)return n.size;if(this.includeAudio){let e=this.findAudioFileOnly();return n.size+((e==null?void 0:e.size)||0);}return n.size;}hasAudioSplitted(){return this.videoFileChosen==="file-original"?!1:this.findCurrentFile().hasAudio===!1&&this.videoFiles.some(n=>n.hasVideo===!1&&n.hasAudio===!0);}download(){window.location.assign(this.getVideoFileLink()),this.downloaded.emit();}getVideoFileLink(){let n=this.videoFileChosen==="file-original"||this.isConfidentialVideo()?"?videoFileToken="+this.videoFileToken:"";if(this.videoFileChosen==="file-original")return this.originalVideoFile.fileDownloadUrl+n;let e=this.findCurrentFile();if(!e)return"";let i=[e];return this.hasAudioSplitted()&&this.includeAudio&&i.push(this.findAudioFileOnly()),this.videoService.generateDownloadUrl({video:this.video,files:i});}isConfidentialVideo(){return this.videoFileChosen==="file-original"||We(this.video);}buildVideoFiles(){if(!this.video)return[];let n=this.video.getHlsPlaylist();return n?n.files:this.video.files;}findCurrentFile(){return this.videoFiles.find(n=>this.videoFileChosen==="file-"+n.id);}findAudioFileOnly(){return this.videoFiles.find(n=>n.resolution.id===Mi.H_NOVIDEO);}};l(rt,"\u0275fac",function(e){return new(e||rt)(C(fe));}),l(rt,"\u0275cmp",R({type:rt,selectors:[["my-video-generate-download"]],inputs:{video:"video",originalVideoFile:"originalVideoFile",videoFileToken:"videoFileToken"},outputs:{downloaded:"downloaded"},standalone:!0,features:[D],ngContentSelectors:Qo,decls:8,vars:2,consts:()=>{let n;n="Descargar";let e;e="Other users cannot download the original file";let i;i="Original file";let o;o=""+"\uFFFD0\uFFFD"+"fps";let c;return c="Include audio",[i,o,[1,"form-group"],["class","peertube-radio-container",4,"ngIf"],[1,"peertube-radio-container"],["class","form-group",4,"ngIf"],[1,"modal-footer","inputs"],["type","submit","value",n,1,"peertube-button","orange-button",3,"click"],["type","radio","name","video-file","id","original-file","value","file-original",3,"ngModelChange","ngModel"],["for","original-file"],[1,"muted"],["ngbTooltip",e,"iconName","shield"],["type","radio","name","video-file",3,"ngModelChange","id","ngModel","value"],[3,"for"],["inputName","includeAudio","labelText",c,3,"ngModelChange","ngModel"]];},template:function(e,i){e&1&&(ye(Yo),d(0,"div",2),p(1,qo,9,7,"div",3),Le(2,ea,10,11,"div",4,Ko),s(),p(4,ta,2,1,"div",5),d(5,"div",6),he(6),d(7,"input",7),E("click",function(){return i.download();}),s()()),e&2&&(a(),r("ngIf",i.originalVideoFile),a(),Fe(i.videoFiles),a(2),r("ngIf",i.hasAudioSplitted()));},dependencies:[P,j,J,Ct,X,Re,$,re,Be,Rt],styles:[".peertube-radio-container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:inline-block;min-width:80px;margin-inline-end:.5rem}"]}));var zt=rt;var ia=["modal"],na=t=>({"opacity-0":t});function oa(t,n){t&1&&(d(0,"option",18),g(1,5),s());}function aa(t,n){if(t&1){let e=A();d(0,"input",19),E("click",function(){v(e);let o=_().close;return f(o());})("key.enter",function(){v(e);let o=_().close;return f(o());}),s();}}function ra(t,n){}function la(t,n){if(t&1){let e=A();d(0,"my-video-generate-download",20),E("downloaded",function(){v(e);let o=_(2);return f(o.onDownloaded());}),O(1,21),p(2,ra,0,0,"ng-template",22),S(),s();}if(t&2){_();let e=w(15),i=_();r("video",i.video)("originalVideoFile",i.originalVideoFile)("videoFileToken",i.videoFileToken),a(2),r("ngTemplateOutlet",e);}}function sa(t,n){}function da(t,n){if(t&1){let e=A();d(0,"my-video-files-download",20),E("downloaded",function(){v(e);let o=_(2);return f(o.onDownloaded());}),O(1,21),p(2,sa,0,0,"ng-template",22),S(),s();}if(t&2){_();let e=w(15),i=_();r("video",i.video)("originalVideoFile",i.originalVideoFile)("videoFileToken",i.videoFileToken),a(2),r("ngTemplateOutlet",e);}}function _a(t,n){}function ca(t,n){if(t&1){let e=A();d(0,"my-subtitle-files-download",23),E("downloaded",function(){v(e);let o=_(2);return f(o.onDownloaded());}),O(1,21),p(2,_a,0,0,"ng-template",22),S(),s();}if(t&2){_();let e=w(15),i=_();r("videoCaptions",i.getCaptions()),a(2),r("ngTemplateOutlet",e);}}function pa(t,n){if(t&1){let e=A();d(0,"div",6)(1,"h4",7),O(2),g(3,2),S(),d(4,"div",8)(5,"select",9),q("ngModelChange",function(o){v(e);let c=_();return K(c.type,o)||(c.type=o),f(o);}),d(6,"option",10),g(7,3),s(),d(8,"option",11),g(9,4),s(),p(10,oa,2,0,"option",12),s()()(),d(11,"button",13),E("click",function(){let o=v(e).close;return f(o());}),u(12,"my-global-icon",14),s()(),d(13,"div",15),p(14,aa,1,0,"ng-template",null,1,z)(16,la,3,4,"my-video-generate-download",16)(17,da,3,4,"my-video-files-download",16)(18,ca,3,2,"my-subtitle-files-download",17),s();}if(t&2){let e,i=_();a(5),Q("ngModel",i.type),a(5),r("ngIf",i.hasCaptions()),a(3),r("ngClass",y(4,na,!i.loaded)),a(3),Ae((e=i.type)==="video-generate"?16:e==="video-files"?17:e==="subtitle-files"?18:-1);}}var lt=class lt{constructor(n,e,i,o,c){this.modalService=n;this.authService=e;this.videoService=i;this.videoFileTokenService=o;this.hooks=c;l(this,"modal");l(this,"videoPassword");l(this,"video");l(this,"type","video-generate");l(this,"videoFileToken");l(this,"originalVideoFile");l(this,"loaded",!1);l(this,"videoCaptions");l(this,"activeModal");}getCaptions(){return this.videoCaptions?this.videoCaptions:[];}show(n,e){this.loaded=!1,this.videoFileToken=void 0,this.originalVideoFile=void 0,this.video=n,this.videoCaptions=e,this.activeModal=this.modalService.open(this.modal,{centered:!0}),this.getOriginalVideoFileObs().subscribe(i=>{i!=null&&i.fileDownloadUrl&&(this.originalVideoFile=i),this.originalVideoFile||We(this.video)?this.videoFileTokenService.getVideoFileToken({videoUUID:this.video.uuid,videoPassword:this.videoPassword}).subscribe(({token:o})=>{this.videoFileToken=o,this.loaded=!0;}):this.loaded=!0;}),this.activeModal.shown.subscribe(()=>{this.hooks.runAction("action:modal.video-download.shown","common");});}getOriginalVideoFileObs(){if(!this.video.isLocal||!this.authService.isLoggedIn())return Ve(void 0);let n=this.authService.getUser();return this.video.isOwnerOrHasSeeAllVideosRight(n)?this.videoService.getSource(this.video.id).pipe(_i(e=>(console.error("Cannot get source file",e),Ve(void 0)))):Ve(void 0);}onDownloaded(){this.activeModal.close();}hasCaptions(){return this.getCaptions().length!==0;}};l(lt,"\u0275fac",function(e){return new(e||lt)(C(oe),C(De),C(fe),C(Ui),C(Li));}),l(lt,"\u0275cmp",R({type:lt,selectors:[["my-video-download"]],viewQuery:function(e,i){if(e&1&&k(ia,7),e&2){let o;H(o=G())&&(i.modal=o.first);}},inputs:{videoPassword:"videoPassword"},standalone:!0,features:[D],decls:2,vars:0,consts:()=>{let n;n="Close this modal";let e;e="Descargar";let i;i="V\xEDdeo";let o;o="Archivos de video";let c;c="Subtitle files";let m;return m="Cancelar",[["modal",""],["cancelBlock",""],e,i,o,c,[1,"modal-header"],[1,"modal-title"],[1,"peertube-select-container","title-select","ms-2"],["id","type","name","type",1,"form-control",3,"ngModelChange","ngModel"],["value","video-generate"],["value","video-files"],["value","subtitle-files",4,"ngIf"],["title",n,1,"border-0","p-0",3,"click"],["iconName","cross"],[1,"modal-body",3,"ngClass"],[3,"video","originalVideoFile","videoFileToken"],[3,"videoCaptions"],["value","subtitle-files"],["type","button","role","button","value",m,1,"peertube-button","grey-button",3,"click","key.enter"],[3,"downloaded","video","originalVideoFile","videoFileToken"],["ngProjectAs","cancel-button",5,["cancel-button"]],[3,"ngTemplateOutlet"],[3,"downloaded","videoCaptions"]];},template:function(e,i){e&1&&p(0,pa,19,6,"ng-template",null,0,z);},dependencies:[kt,Ht,zt,$,P,j,hi,Ti,Si,X,Re,U,ke],styles:['.modal-body[_ngcontent-%COMP%]     .nav-content{margin-top:30px}.modal-body[_ngcontent-%COMP%]     my-global-icon[iconName=shield]{width:16px;position:relative;top:-2px;margin-inline-start:.625rem}.modal-body[_ngcontent-%COMP%]     .modal-footer{padding-inline-end:0;margin-top:1rem}.modal-body[_ngcontent-%COMP%]     .modal-footer>*:last-child{margin-inline-end:0}.peertube-select-container.title-select[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;padding:0;margin:0;width:auto;border-radius:3px;color:var(--inputForegroundColor);background:var(--inputBackgroundColor);position:relative;height:min-content}.peertube-select-container.title-select.disabled[_ngcontent-%COMP%]{background-color:#e5e5e5}.peertube-select-container.title-select.disabled[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:default}.peertube-select-container.title-select[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{background-color:#f9f9f9}@media screen and (max-width: auto){.peertube-select-container.title-select[_ngcontent-%COMP%]{width:100%}}.peertube-select-container.title-select[_ngcontent-%COMP%]:after{top:50%;right:calc(0% + 15px);content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid rgba(0,0,0,0);border-top-color:var(--mainForegroundColor);margin-top:-2px;z-index:100}.peertube-select-container.title-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:15px;padding:3px 35px 3px 12px;position:relative;border:1px solid var(--inputBorderColor);background:transparent none;-webkit-appearance:none;appearance:none;text-overflow:ellipsis;color:var(--mainForegroundColor);line-height:23px}.peertube-select-container.title-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.peertube-select-container.title-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:-moz-focusring{color:transparent;text-shadow:0 0 0 #000}.peertube-select-container.title-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}.peertube-select-container.title-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[value=undefined][_ngcontent-%COMP%]{font-weight:600}.peertube-select-container.title-select.peertube-select-button[_ngcontent-%COMP%]{background-color:var(--greyBackgroundColor);color:var(--greyForegroundColor)}.peertube-select-container.title-select.peertube-select-button[_ngcontent-%COMP%]:focus, .peertube-select-container.title-select.peertube-select-button[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem #5858580d}.peertube-select-container.title-select.peertube-select-button[_ngcontent-%COMP%]:hover, .peertube-select-container.title-select.peertube-select-button[_ngcontent-%COMP%]:active, .peertube-select-container.title-select.peertube-select-button[_ngcontent-%COMP%]:focus, .peertube-select-container.title-select.peertube-select-button[disabled][_ngcontent-%COMP%], .peertube-select-container.title-select.peertube-select-button.disabled[_ngcontent-%COMP%]{color:var(--greyForegroundColor);background-color:var(--greySecondaryBackgroundColor)}.peertube-select-container.title-select.peertube-select-button[disabled][_ngcontent-%COMP%], .peertube-select-container.title-select.peertube-select-button.disabled[_ngcontent-%COMP%]{cursor:default}.peertube-select-container.title-select.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .peertube-select-container.title-select.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .peertube-select-container.title-select.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:var(--greyForegroundColor)}.peertube-select-container.title-select.peertube-select-button[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-weight:600;color:var(--greyForegroundColor);border:0;padding:4px 35px 4px 12px}#dropdown-download-type[_ngcontent-%COMP%]{cursor:pointer}']}));var Bt=lt;var ma=["playlistDropdown"],ua=["playlistAdd"],ga=["videoDownloadModal"],va=["videoReportModal"],fa=["videoBlockModal"],Ca=["liveStreamInformationModal"],Ea=t=>({video:t});function Oa(t,n){if(t&1){let e=A();d(0,"div",11,3),E("openChange",function(o){v(e);let c=w(5);return f(c.openChange(o));}),u(2,"span",12),d(3,"div",13),u(4,"my-video-add-to-playlist",14,4),s()();}if(t&2){let e=_(2);r("placement",e.getPlaylistDropdownPlacement()),a(4),r("video",e.video)("lazyLoad",!0);}}function Sa(t,n){t&1&&u(0,"my-live-stream-information",null,5);}function ha(t,n){if(t&1){let e=A();O(0),p(1,Oa,6,3,"div",7),d(2,"my-action-dropdown",8),E("click",function(){v(e);let o=_();return f(o.loadDropdownInformation());}),s(),u(3,"my-video-download",null,0)(5,"my-video-report",9,1),d(7,"my-video-block",10,2),E("videoBlocked",function(){v(e);let o=_();return f(o.onVideoBlocked());}),s(),p(9,Sa,2,0,"my-live-stream-information",6),S();}if(t&2){let e=_();a(),r("ngIf",e.isUserLoggedIn()&&e.displayOptions.playlist),a(),r("actions",e.videoActions)("label",e.label)("entry",y(10,Ea,e.video))("buttonSize",e.buttonSize)("placement",e.placement)("buttonDirection",e.buttonDirection)("buttonStyled",e.buttonStyled),a(3),r("video",e.video),a(4),r("ngIf",e.displayOptions.liveInfo);}}var st=class st{constructor(n,e,i,o,c,m,M,T,x,ie){this.authService=n;this.notifier=e;this.confirmService=i;this.blocklistService=o;this.videoBlocklistService=c;this.screenService=m;this.videoService=M;this.videoCaptionService=T;this.redundancyService=x;this.serverService=ie;l(this,"playlistDropdown");l(this,"playlistAdd");l(this,"videoDownloadModal");l(this,"videoReportModal");l(this,"videoBlockModal");l(this,"liveStreamInformationModal");l(this,"video");l(this,"videoCaptions",[]);l(this,"displayOptions",{playlist:!1,download:!0,update:!0,blacklist:!0,delete:!0,report:!0,duplicate:!0,mute:!0,liveInfo:!1,removeFiles:!1,transcoding:!1,studio:!0,stats:!0,generateTranscription:!1,transcriptionWidget:!1});l(this,"placement","auto");l(this,"moreActions",[]);l(this,"actionAvailabilityHint",!1);l(this,"label");l(this,"buttonStyled",!1);l(this,"buttonSize","normal");l(this,"buttonDirection","vertical");l(this,"transcriptionWidgetOpened");l(this,"videoFilesRemoved",new N());l(this,"videoRemoved",new N());l(this,"videoUnblocked",new N());l(this,"videoBlocked",new N());l(this,"videoAccountMuted",new N());l(this,"transcodingCreated",new N());l(this,"modalOpened",new N());l(this,"showTranscriptionWidget",new N());l(this,"hideTranscriptionWidget",new N());l(this,"videoActions",[]);l(this,"loaded",!1);l(this,"hasMutedAccount",!1);}get user(){return this.authService.getUser();}ngOnChanges(){this.loaded&&(this.loaded=!1,this.playlistAdd&&this.playlistAdd.reload()),this.buildActions();}isUserLoggedIn(){return this.authService.isLoggedIn();}loadDropdownInformation(){this.loaded!==!0&&(this.loaded=!0,this.displayOptions.playlist&&this.playlistAdd.load());}showDownloadModal(){this.modalOpened.emit(),(this.video instanceof ei?Ve(this.video):this.videoService.getVideo({videoId:this.video.uuid})).subscribe(e=>{this.videoDownloadModal.show(e,this.videoCaptions);});}showReportModal(){this.modalOpened.emit(),this.videoReportModal.show();}showBlockModal(){this.modalOpened.emit(),this.videoBlockModal.show([this.video]);}showLiveInfoModal(n){this.modalOpened.emit(),this.liveStreamInformationModal.show(n);}isVideoUpdatable(){return this.user?this.video.isUpdatableBy(this.user):!1;}isVideoEditable(){return this.user?this.video.isEditableBy(this.user,this.serverService.getHTMLConfig().videoStudio.enabled):!1;}isVideoStatsAvailable(){return this.user?this.video.isLocal&&this.video.isOwnerOrHasSeeAllVideosRight(this.user):!1;}isVideoRemovable(){return this.user?this.video.isRemovableBy(this.user):!1;}isVideoBlockable(){return this.user?this.video.isBlockableBy(this.user):!1;}isVideoUnblockable(){return this.user?this.video.isUnblockableBy(this.user):!1;}isVideoLiveInfoAvailable(){return this.user?this.video.isLiveInfoAvailableBy(this.user):!1;}canGenerateTranscription(){return this.user?this.video.canGenerateTranscription(this.user,this.serverService.getHTMLConfig().videoTranscription.enabled):!1;}isVideoDownloadableByAnonymous(){return this.video&&this.video.isLive!==!0&&this.video instanceof ei&&this.video.downloadEnabled;}isVideoDownloadableByUser(){return this.user?this.video&&this.video.isLive!==!0&&this.video.isOwnerOrHasSeeAllVideosRight(this.user):!1;}canVideoBeDuplicated(){return this.user?!this.video.isLive&&this.video.canBeDuplicatedBy(this.user):!1;}isVideoAccountMutable(){return this.user?this.video.account.id!==this.user.account.id:!1;}canRemoveVideoFiles(){return this.user?this.video.canRemoveAllHLSOrWebFiles(this.user):!1;}canRunTranscoding(){return this.user?this.video.canRunTranscoding(this.user):!1;}unblockVideo(){return be(this,null,function*(){let n="\xBFDe verdad quieres desbloquear "+this.video.name+"?Estar\xE1 disponible nuevamente en la lista de videos.";(yield this.confirmService.confirm(n,"Desbloqu\xE9a"+this.video.name+""))!==!1&&this.videoBlocklistService.unblockVideo(this.video.id).subscribe({next:()=>{this.notifier.success("Video "+this.video.name+" desbloqueado."),this.video.blacklisted=!1,this.video.blacklistedReason=null,this.videoUnblocked.emit();},error:i=>this.notifier.error(i.message)});});}removeVideo(){return be(this,null,function*(){this.modalOpened.emit();let n="\xBFDe verdad quieres eliminar \n          "+this.video.name+"?\n        ";this.video.isLive&&(n+=" "+"La transmisi\xF3n en vivo finalizar\xE1 autom\xE1ticamente y las repeticiones no se guardar\xE1n."),(yield this.confirmService.confirm(n,"Suprimir "+this.video.name+""))!==!1&&this.videoService.removeVideo(this.video.id).subscribe({next:()=>{this.notifier.success("V\xEDdeo "+this.video.name+" eliminado."),this.videoRemoved.emit();},error:i=>this.notifier.error(i.message)});});}duplicateVideo(){this.redundancyService.addVideoRedundancy(this.video).subscribe({next:()=>{let n=""+this.video.name+" ser\xE1 duplicado por tu instancia.";this.notifier.success(n);},error:n=>this.notifier.error(n.message)});}muteVideoAccount(){let n={nameWithHost:Zt.CREATE_BY_STRING(this.video.account.name,this.video.account.host)};this.blocklistService.blockAccountByUser(n).subscribe({next:()=>{this.notifier.success("Cuenta "+n.nameWithHost+" silenciada."),this.hasMutedAccount=!0,this.videoAccountMuted.emit();},error:e=>this.notifier.error(e.message)});}unmuteVideoAccount(){let n={nameWithHost:Zt.CREATE_BY_STRING(this.video.account.name,this.video.account.host)};this.blocklistService.unblockAccountByUser(n).subscribe({next:()=>{this.hasMutedAccount=!1,this.notifier.success("La cuenta "+n.nameWithHost+" ya no est\xE1 silenciada.");},error:e=>this.notifier.error(e.message)});}removeVideoFiles(n,e){return be(this,null,function*(){let i="\xBFRealmente desea eliminar el archivo "+this.video.name+"?";(yield this.confirmService.confirm(i,"Eliminar el archivo\""+this.video.name+"\""))!==!1&&this.videoService.removeVideoFiles([n.id],e).subscribe({next:()=>{this.notifier.success("Archivos eliminados de "+n.name+"."),this.videoFilesRemoved.emit();},error:c=>this.notifier.error(c.message)});});}runTranscoding(n,e){this.videoService.runTranscoding({videos:[n],type:e}).subscribe({next:()=>{this.notifier.success("Transcoding job created for \""+n.name+"\"."),this.transcodingCreated.emit();},error:i=>this.notifier.error(i.message)});}generateCaption(n){this.videoCaptionService.generateCaption({videos:[n]}).subscribe({next:e=>{e.success?this.notifier.success("Transcription job created for \""+n.name+"\"."):e.alreadyBeingTranscribed?this.notifier.info("This video is already being transcribed."):e.alreadyHasCaptions&&this.notifier.info("This video already has captions.");},error:e=>this.notifier.error(e.message)});}onVideoBlocked(){this.videoBlocked.emit();}getPlaylistDropdownPlacement(){return this.screenService.isInSmallView()?"bottom-right":"bottom-left bottom-right";}buildActions(){this.videoActions=[[{label:"Guardar en lista de reproducci\xF3n",handler:()=>this.playlistDropdown.toggle(),isDisplayed:()=>this.authService.isLoggedIn()&&this.displayOptions.playlist,iconName:"playlist-add"}],[{label:"Descargar",handler:()=>this.showDownloadModal(),isDisplayed:()=>this.displayOptions.download?this.isVideoDownloadableByAnonymous()||this.isVideoDownloadableByUser():!1,iconName:"download",ownerOrModeratorPrivilege:()=>{if(this.actionAvailabilityHint&&!this.isVideoDownloadableByAnonymous())return"This option is visible only to you";}},{label:"Show transcription",handler:()=>this.showTranscriptionWidget.emit(),isDisplayed:()=>!this.displayOptions.transcriptionWidget||this.transcriptionWidgetOpened?!1:Array.isArray(this.videoCaptions)&&this.videoCaptions.length!==0,iconName:"video-lang"},{label:"Hide transcription",handler:()=>this.hideTranscriptionWidget.emit(),isDisplayed:()=>this.displayOptions.transcriptionWidget?this.transcriptionWidgetOpened===!0:!1,iconName:"video-lang"}],[{label:"Mostrar informaci\xF3n en vivo",handler:({video:n})=>this.showLiveInfoModal(n),isDisplayed:()=>this.displayOptions.liveInfo&&this.isVideoLiveInfoAvailable(),iconName:"live"},{label:"Actualizar",linkBuilder:({video:n})=>["/videos/update",n.shortUUID],iconName:"edit",isDisplayed:()=>this.authService.isLoggedIn()&&this.displayOptions.update&&this.isVideoUpdatable()},{label:"Estudio",linkBuilder:({video:n})=>["/studio/edit",n.shortUUID],iconName:"film",isDisplayed:()=>this.authService.isLoggedIn()&&this.displayOptions.studio&&this.isVideoEditable()},{label:"Estad\xEDsticas",linkBuilder:({video:n})=>["/stats/videos",n.shortUUID],iconName:"stats",isDisplayed:()=>this.authService.isLoggedIn()&&this.displayOptions.stats&&this.isVideoStatsAvailable()},{label:"Bloquear",handler:()=>this.showBlockModal(),iconName:"no",isDisplayed:()=>this.authService.isLoggedIn()&&this.displayOptions.blacklist&&this.isVideoBlockable()},{label:"Desbloquear",handler:()=>this.unblockVideo(),iconName:"undo",isDisplayed:()=>this.authService.isLoggedIn()&&this.displayOptions.blacklist&&this.isVideoUnblockable()},{label:"Espejo",handler:()=>this.duplicateVideo(),isDisplayed:()=>this.authService.isLoggedIn()&&this.displayOptions.duplicate&&this.canVideoBeDuplicated(),iconName:"cloud-download"},{label:"Eliminar",handler:()=>this.removeVideo(),isDisplayed:()=>this.authService.isLoggedIn()&&this.displayOptions.delete&&this.isVideoRemovable(),iconName:"delete"},{label:"Reportar",handler:()=>this.showReportModal(),isDisplayed:()=>this.authService.isLoggedIn()&&this.displayOptions.report,iconName:"flag"}],[{label:"Ejecute la transcodificaci\xF3n HLS",handler:({video:n})=>this.runTranscoding(n,"hls"),isDisplayed:()=>this.displayOptions.transcoding&&this.canRunTranscoding(),iconName:"cog"},{label:"Run Web Video transcoding",handler:({video:n})=>this.runTranscoding(n,"web-video"),isDisplayed:()=>this.displayOptions.transcoding&&this.canRunTranscoding(),iconName:"cog"},{label:"Eliminar archivos HLS",handler:({video:n})=>this.removeVideoFiles(n,"hls"),isDisplayed:()=>this.displayOptions.removeFiles&&this.canRemoveVideoFiles(),iconName:"delete"},{label:"Delete Web Video files",handler:({video:n})=>this.removeVideoFiles(n,"web-videos"),isDisplayed:()=>this.displayOptions.removeFiles&&this.canRemoveVideoFiles(),iconName:"delete"}],[{label:"Generate caption",handler:({video:n})=>this.generateCaption(n),isDisplayed:()=>this.displayOptions.generateTranscription&&this.canGenerateTranscription(),iconName:"video-lang"}],[{label:"Silenciar cuenta",handler:()=>this.muteVideoAccount(),isDisplayed:()=>this.authService.isLoggedIn()&&this.displayOptions.mute&&this.isVideoAccountMutable(),iconName:"no"},{label:"Unmute account",handler:()=>this.unmuteVideoAccount(),isDisplayed:()=>this.authService.isLoggedIn()&&this.displayOptions.mute&&this.isVideoAccountMutable()&&this.hasMutedAccount,iconName:"undo"}]],this.videoActions=this.videoActions.concat(this.moreActions);}};l(st,"\u0275fac",function(e){return new(e||st)(C(De),C(ae),C(xi),C(Wi),C(Pt),C(Xe),C(fe),C(Xi),C(ji),C(yt));}),l(st,"\u0275cmp",R({type:st,selectors:[["my-video-actions-dropdown"]],viewQuery:function(e,i){if(e&1&&(k(ma,5),k(ua,5),k(ga,5),k(va,5),k(fa,5),k(Ca,5)),e&2){let o;H(o=G())&&(i.playlistDropdown=o.first),H(o=G())&&(i.playlistAdd=o.first),H(o=G())&&(i.videoDownloadModal=o.first),H(o=G())&&(i.videoReportModal=o.first),H(o=G())&&(i.videoBlockModal=o.first),H(o=G())&&(i.liveStreamInformationModal=o.first);}},inputs:{video:"video",videoCaptions:"videoCaptions",displayOptions:"displayOptions",placement:"placement",moreActions:"moreActions",actionAvailabilityHint:[2,"actionAvailabilityHint","actionAvailabilityHint",Kt],label:"label",buttonStyled:[2,"buttonStyled","buttonStyled",Kt],buttonSize:"buttonSize",buttonDirection:"buttonDirection",transcriptionWidgetOpened:"transcriptionWidgetOpened"},outputs:{videoFilesRemoved:"videoFilesRemoved",videoRemoved:"videoRemoved",videoUnblocked:"videoUnblocked",videoBlocked:"videoBlocked",videoAccountMuted:"videoAccountMuted",transcodingCreated:"transcodingCreated",modalOpened:"modalOpened",showTranscriptionWidget:"showTranscriptionWidget",hideTranscriptionWidget:"hideTranscriptionWidget"},standalone:!0,features:[gt,we,D],decls:1,vars:1,consts:()=>{let n;return n="Abrir acciones de video",[["videoDownloadModal",""],["videoReportModal",""],["videoBlockModal",""],["playlistDropdown","ngbDropdown"],["playlistAdd",""],["liveStreamInformationModal",""],[4,"ngIf"],["role","button","aria-label",n,"class","playlist-dropdown","ngbDropdown","","autoClose","outside",3,"placement","openChange",4,"ngIf"],["container","body",3,"click","actions","label","entry","buttonSize","placement","buttonDirection","buttonStyled"],[3,"video"],[3,"videoBlocked"],["role","button","aria-label",n,"ngbDropdown","","autoClose","outside",1,"playlist-dropdown",3,"openChange","placement"],["ngbDropdownAnchor","",1,"anchor"],["ngbDropdownMenu",""],[3,"video","lazyLoad"]];},template:function(e,i){e&1&&p(0,ha,10,12,"ng-container",6),e&2&&r("ngIf",i.videoActions.length!==0);},dependencies:[P,bi,Ni,Ii,$t,Hi,Bt,wt,xt,Lt],styles:[".playlist-dropdown[_ngcontent-%COMP%]{position:absolute}.playlist-dropdown[_ngcontent-%COMP%]   .anchor[_ngcontent-%COMP%]{display:block;opacity:0}  .icon-playlist-add{left:2px}"]}));var Ut=st;function Ta(t,n){if(t&1&&(O(0),g(1,0),te(2,"myNumberFormatter"),S()),t&2){let e=_();a(2),b(e.video.views)(Ie(2,2,e.video.views)),V(1);}}function Ma(t,n){if(t&1&&(O(0),g(1,1),te(2,"myNumberFormatter"),S()),t&2){let e=_();a(2),b(e.video.viewers)(Ie(2,2,e.video.viewers)),V(1);}}var dt=class dt{constructor(){l(this,"video");}};l(dt,"\u0275fac",function(e){return new(e||dt)();}),l(dt,"\u0275cmp",R({type:dt,selectors:[["my-video-views-counter"]],inputs:{video:"video"},standalone:!0,features:[D],decls:3,vars:3,consts:()=>{let n;n="{VAR_PLURAL, plural, =1 {1 visualizaci\xF3n} other {{INTERPOLATION} visualizaciones}}",n=Qt(n,{INTERPOLATION:"\uFFFD1\uFFFD",VAR_PLURAL:"\uFFFD0\uFFFD"});let e;e=""+n+" ";let i;i="{VAR_PLURAL, plural, =1 {1 espectador} other {{INTERPOLATION} espectadores}}",i=Qt(i,{INTERPOLATION:"\uFFFD1\uFFFD",VAR_PLURAL:"\uFFFD0\uFFFD"});let o;return o=""+i+" ",[e,o,[3,"title"],[4,"ngIf"]];},template:function(e,i){e&1&&(d(0,"span",2),p(1,Ta,3,4,"ng-container",3)(2,Ma,3,4,"ng-container",3),s()),e&2&&(r("title",i.video.getExactNumberOfViews()),a(),r("ngIf",!i.video.isLive),a(),r("ngIf",i.video.isLive));},dependencies:[P,bt]}));var Wt=dt;var _t=class _t{constructor(n){this.fromNowPipe=n;l(this,"date");l(this,"toggled",!1);l(this,"dateRelative");l(this,"dateAbsolute");}ngOnChanges(){this.updateDates();}toggle(){this.toggled=!this.toggled;}getTitle(){let n=this.toggled?this.dateRelative:this.dateAbsolute;return"Toggle this date format to \""+n+"\"";}getContent(){return this.toggled?this.dateAbsolute:this.dateRelative;}updateDates(){this.dateRelative=this.fromNowPipe.transform(this.date),this.dateAbsolute=this.date.toLocaleDateString();}};l(_t,"\u0275fac",function(e){return new(e||_t)(C(ki));}),l(_t,"\u0275cmp",R({type:_t,selectors:[["my-date-toggle"]],inputs:{date:"date",toggled:"toggled"},standalone:!0,features:[we,D],decls:2,vars:3,consts:[["role","button","tabindex","0",1,"date-toggle",3,"click","keyup.enter","title","ariaLabel"]],template:function(e,i){e&1&&(d(0,"span",0),E("click",function(){return i.toggle();})("keyup.enter",function(){return i.toggle();}),h(1),s()),e&2&&(r("title",i.getTitle())("ariaLabel",i.getTitle()),a(),F(" ",i.getContent(),`
`));},styles:[".date-toggle[_ngcontent-%COMP%]:hover{cursor:default}"]}));var Xt=_t;var Aa=[[["label-warning"]],[["label-danger"]]],ya=["label-warning","label-danger"],Ra=t=>({"blur-filter":t}),Da=t=>({"live-ended":t}),Pa=t=>({"width.%":t});function Ia(t,n){t&1&&Ee(0);}function Na(t,n){if(t&1&&(d(0,"a",5),p(1,Ia,1,0,"ng-container",6),s()),t&2){let e=_(),i=w(3);r("ariaLabel",e.ariaLabel)("routerLink",e.getVideoRouterLink())("queryParams",e.queryParams),a(),r("ngTemplateOutlet",i);}}function ba(t,n){t&1&&Ee(0);}function Va(t,n){if(t&1&&(d(0,"a",7),p(1,ba,1,0,"ng-container",6),s()),t&2){let e=_(),i=w(3);r("ariaLabel",e.ariaLabel)("href",e.videoHref,Yt)("target",e.videoTarget),a(),r("ngTemplateOutlet",i);}}function wa(t,n){if(t&1){let e=A();O(0),d(1,"button",19),E("click",function(o){v(e);let c=_(3);return f(c.onWatchLaterClick(o));}),u(2,"my-global-icon",20),s(),S();}if(t&2){let e=_(3);a(),r("ngbTooltip",e.addToWatchLaterText),a(),xe("aria-label",e.addToWatchLaterText);}}function xa(t,n){if(t&1){let e=A();O(0),d(1,"button",19),E("click",function(o){v(e);let c=_(3);return f(c.onWatchLaterClick(o));}),u(2,"my-global-icon",21),s(),S();}if(t&2){let e=_(3);a(),r("ngbTooltip",e.addedToWatchLaterText),a(),xe("aria-label",e.addedToWatchLaterText);}}function La(t,n){if(t&1&&(d(0,"div",17),p(1,wa,3,2,"ng-container",18)(2,xa,3,2,"ng-container",18),s()),t&2){let e=_(2);a(),r("ngIf",e.inWatchLaterPlaylist!==!0),a(),r("ngIf",e.inWatchLaterPlaylist===!0);}}function Fa(t,n){if(t&1&&(d(0,"div",22),h(1),s()),t&2){let e=_(2);a(),L(e.video.durationLabel);}}function $a(t,n){t&1&&(O(0),g(1,1),S());}function ka(t,n){t&1&&(O(0),g(1,2),S());}function Ha(t,n){if(t&1&&(d(0,"div",23),p(1,$a,2,0,"ng-container",18)(2,ka,2,0,"ng-container",18),s()),t&2){let e=_(2);r("ngClass",y(3,Da,e.isLiveEnded())),a(),r("ngIf",!e.isLiveEnded()),a(),r("ngIf",e.isLiveEnded());}}function Ga(t,n){if(t&1&&(d(0,"div",24),u(1,"div",25),s()),t&2){let e=_(2);a(),r("ngStyle",y(1,Pa,e.getProgressPercent()));}}function za(t,n){if(t&1&&(u(0,"img",8),p(1,La,3,2,"div",9),d(2,"div",10),he(3),s(),d(4,"div",11),he(5,1),s(),p(6,Fa,2,1,"div",12)(7,Ha,3,5,"div",13),d(8,"div",14),u(9,"div",15),s(),p(10,Ga,2,3,"div",16)),t&2){let e=_();r("ngClass",y(7,Ra,e.nsfw)),xe("aria-label",e.video.name)("src",e.getImageUrl(),Yt),a(),r("ngIf",e.displayWatchLaterPlaylist),a(5),r("ngIf",!e.video.isLive),a(),r("ngIf",e.video.isLive),a(3),r("ngIf",!e.video.isLive&&(e.video.userHistory==null?null:e.video.userHistory.currentTime));}}var ct=class ct{constructor(n){this.screenService=n;l(this,"video");l(this,"nsfw",!1);l(this,"videoRouterLink");l(this,"queryParams");l(this,"videoHref");l(this,"videoTarget");l(this,"displayWatchLaterPlaylist");l(this,"inWatchLaterPlaylist");l(this,"ariaLabel");l(this,"watchLaterClick",new N());l(this,"addToWatchLaterText");l(this,"addedToWatchLaterText");this.addToWatchLaterText="A\xF1adir para ver m\xE1s tarde",this.addedToWatchLaterText="Eliminar del reloj m\xE1s tarde";}isLiveEnded(){if(this.video.state)return this.video.state.id===ne.LIVE_ENDED;}getImageUrl(){return this.video?this.screenService.isInMobileView()?this.video.previewUrl:this.video.thumbnailUrl:"";}getProgressPercent(){return this.video.userHistory?this.video.userHistory.currentTime/this.video.duration*100:0;}getVideoRouterLink(){return this.videoRouterLink?this.videoRouterLink:Qe.buildWatchUrl(this.video);}onWatchLaterClick(n){return this.watchLaterClick.emit(this.inWatchLaterPlaylist),n.stopPropagation(),!1;}};l(ct,"\u0275fac",function(e){return new(e||ct)(C(Xe));}),l(ct,"\u0275cmp",R({type:ct,selectors:[["my-video-thumbnail"]],inputs:{video:"video",nsfw:"nsfw",videoRouterLink:"videoRouterLink",queryParams:"queryParams",videoHref:"videoHref",videoTarget:"videoTarget",displayWatchLaterPlaylist:"displayWatchLaterPlaylist",inWatchLaterPlaylist:"inWatchLaterPlaylist",ariaLabel:"ariaLabel"},outputs:{watchLaterClick:"watchLaterClick"},standalone:!0,features:[D],ngContentSelectors:ya,decls:4,vars:2,consts:()=>{let n;n="VIVO";let e;return e="DIRECTO TERMINADO",[["aContent",""],n,e,["class","video-thumbnail","tabindex","-1",3,"ariaLabel","routerLink","queryParams",4,"ngIf"],["class","video-thumbnail","tabindex","-1",3,"ariaLabel","href","target",4,"ngIf"],["tabindex","-1",1,"video-thumbnail",3,"ariaLabel","routerLink","queryParams"],[4,"ngTemplateOutlet"],["tabindex","-1",1,"video-thumbnail",3,"ariaLabel","href","target"],["alt","",3,"ngClass"],["class","video-thumbnail-actions-overlay",4,"ngIf"],[1,"video-thumbnail-label-overlay","warning"],[1,"video-thumbnail-label-overlay","danger"],["class","video-thumbnail-duration-overlay",4,"ngIf"],["class","video-thumbnail-live-overlay",3,"ngClass",4,"ngIf"],[1,"play-overlay"],[1,"icon"],["class","progress-bar",4,"ngIf"],[1,"video-thumbnail-actions-overlay"],[4,"ngIf"],["placement","left","container","body",1,"video-thumbnail-watch-later-overlay","button-unstyle",3,"click","ngbTooltip"],["iconName","clock","role","button"],["iconName","tick","role","button"],[1,"video-thumbnail-duration-overlay"],[1,"video-thumbnail-live-overlay",3,"ngClass"],[1,"progress-bar"],[3,"ngStyle"]];},template:function(e,i){e&1&&(ye(Aa),p(0,Na,2,4,"a",3)(1,Va,2,4,"a",4)(2,za,11,9,"ng-template",null,0,z)),e&2&&(r("ngIf",!i.videoHref),a(),r("ngIf",i.videoHref));},dependencies:[P,He,ke,U,Be,$,Ci],styles:[".video-thumbnail[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;border-radius:3px;width:100%;height:100%;overflow:hidden;background-color:#ececec;transition:filter .2s ease}.video-thumbnail[_ngcontent-%COMP%]:focus:not(:focus-visible){outline:none!important}.video-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:inherit;height:inherit;opacity:0;background-color:#0000004d}.video-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .video-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:all .2s ease}.video-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:0;height:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.5);border-top:13px solid transparent;border-bottom:13px solid transparent;border-left:18px solid rgba(255,255,255,.95)}.video-thumbnail[_ngcontent-%COMP%]:hover{text-decoration:none!important}.video-thumbnail[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.video-thumbnail[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.video-thumbnail[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--mainColorLightest);outline:none}.video-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.video-thumbnail[_ngcontent-%COMP%]   img.blur-filter[_ngcontent-%COMP%]{filter:blur(20px);transform:scale(1.03)}.progress-bar[_ngcontent-%COMP%]{height:3px;width:100%;position:absolute;bottom:0;background-color:#0003}.progress-bar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:100%;background-color:var(--mainColor)}.video-thumbnail-watch-later-overlay[_ngcontent-%COMP%], .video-thumbnail-label-overlay[_ngcontent-%COMP%], .video-thumbnail-duration-overlay[_ngcontent-%COMP%], .video-thumbnail-live-overlay[_ngcontent-%COMP%]{border-radius:3px;font-size:12px;font-weight:600;line-height:1.1;z-index:10;display:inline-block;background-color:#000000b3;color:#fff}.video-thumbnail-label-overlay[_ngcontent-%COMP%]{position:absolute;padding:0 5px;left:5px;top:5px;font-weight:700}.video-thumbnail-label-overlay.warning[_ngcontent-%COMP%]{background-color:orange}.video-thumbnail-label-overlay.danger[_ngcontent-%COMP%]{background-color:red}.video-thumbnail-duration-overlay[_ngcontent-%COMP%], .video-thumbnail-live-overlay[_ngcontent-%COMP%]{position:absolute;padding:0 3px;right:5px;bottom:5px}.video-thumbnail-live-overlay[_ngcontent-%COMP%]{font-weight:600;color:#fff}.video-thumbnail-live-overlay[_ngcontent-%COMP%]:not(.live-ended){background-color:#e00808b3}.video-thumbnail-actions-overlay[_ngcontent-%COMP%]{position:absolute;display:flex;flex-direction:column;right:5px;top:5px;opacity:0}.video-thumbnail-actions-overlay[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:not(:first-child){margin-top:2px}.video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]{padding:3px}.video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{width:22px;height:22px}.video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .misc{color:#fff}"]}));var jt=ct;var Ba=t=>({"blur-filter":t}),ni=t=>["/c",t],Ua=t=>["/w/p/",t];function Wa(t,n){t&1&&(O(0,27),g(1,0),S());}function Xa(t,n){t&1&&(O(0,28),g(1,1),S());}function ja(t,n){t&1&&(O(0,28),g(1,2),S());}function Ya(t,n){if(t&1&&u(0,"my-actor-avatar",29),t&2){let e=_();r("title",e.channelLinkTitle)("actor",e.video.channel)("size",e.actorImageSize)("internalHref",y(4,ni,e.video.byVideoChannel));}}function Qa(t,n){if(t&1&&u(0,"my-actor-avatar",29),t&2){let e=_();r("title",e.channelLinkTitle)("actor",e.video.account)("size",e.actorImageSize)("internalHref",y(4,ni,e.video.byVideoChannel));}}function Ka(t,n){if(t&1&&u(0,"my-date-toggle",30),t&2){let e=_();r("date",e.video.publishedAt);}}function qa(t,n){t&1&&(O(0),h(1," \u2022 "),S());}function Ja(t,n){if(t&1&&u(0,"my-video-views-counter",31),t&2){let e=_();r("video",e.video);}}function Za(t,n){if(t&1&&(O(0),h(1),S()),t&2){let e=_(2);a(),L(e.authorAccount);}}function er(t,n){if(t&1&&(O(0),h(1),S()),t&2){let e=_(2);a(),L(e.authorChannel);}}function tr(t,n){if(t&1&&(d(0,"a",32),p(1,Za,2,1,"ng-container",18)(2,er,2,1,"ng-container",18),s()),t&2){let e=_();r("routerLink",y(3,ni,e.video.byVideoChannel)),a(),r("ngIf",e.displayOwnerAccount()),a(),r("ngIf",e.displayOwnerVideoChannel());}}function ir(t,n){if(t&1&&(O(0),h(1),S()),t&2){let e=_();a(),L(e.video.privacy.label);}}function nr(t,n){t&1&&(O(0),h(1," - "),S());}function or(t,n){if(t&1&&(O(0),h(1),S()),t&2){let e=_();a(),L(e.getStateLabel(e.video));}}function ar(t,n){if(t&1&&(d(0,"a",35),h(1),s()),t&2){let e=n.$implicit;r("routerLink",y(2,Ua,e.playlistShortUUID)),a(),F(" ",e.playlistDisplayName," ");}}function rr(t,n){if(t&1&&(d(0,"div",33),p(1,ar,2,4,"a",34),s()),t&2){let e=_();a(),r("ngForOf",e.containedInPlaylists);}}function lr(t,n){if(t&1&&(d(0,"span",39),h(1),s()),t&2){let e=_(2);a(),L(e.video.blacklistedReason);}}function sr(t,n){if(t&1&&(d(0,"div",36)(1,"span",37),g(2,3),s(),p(3,lr,2,1,"span",38),s()),t&2){let e=_();a(3),r("ngIf",e.video.blacklistedReason);}}function dr(t,n){t&1&&(d(0,"div",40),g(1,4),s());}function _r(t,n){if(t&1){let e=A();d(0,"my-video-actions-dropdown",41),E("videoRemoved",function(){v(e);let o=_();return f(o.onVideoRemoved());})("videoBlocked",function(){v(e);let o=_();return f(o.onVideoBlocked());})("videoUnblocked",function(){v(e);let o=_();return f(o.onVideoUnblocked());})("videoAccountMuted",function(){v(e);let o=_();return f(o.onVideoAccountMuted());}),s();}if(t&2){let e=_();r("video",e.video)("displayOptions",e.videoActionsDisplayOptions);}}var pt=class pt{constructor(n,e,i,o,c,m,M){this.screenService=n;this.serverService=e;this.authService=i;this.videoPlaylistService=o;this.videoService=c;this.cd=m;this.localeId=M;l(this,"user");l(this,"video");l(this,"containedInPlaylists");l(this,"displayOptions",{date:!0,views:!0,by:!0,avatar:!1,privacyLabel:!1,privacyText:!1,state:!1,blacklistInfo:!1,forceChannelInBy:!1});l(this,"displayVideoActions",!0);l(this,"videoActionsDisplayOptions",{playlist:!0,download:!1,update:!0,blacklist:!0,delete:!0,report:!0,duplicate:!0,mute:!0,studio:!1,stats:!1});l(this,"actorImageSize",40);l(this,"displayAsRow",!1);l(this,"videoLinkType","internal");l(this,"videoBlocked",new N());l(this,"videoUnblocked",new N());l(this,"videoRemoved",new N());l(this,"videoAccountMuted",new N());l(this,"showActions",!1);l(this,"serverConfig");l(this,"addToWatchLaterText");l(this,"addedToWatchLaterText");l(this,"inWatchLaterPlaylist");l(this,"channelLinkTitle","");l(this,"watchLaterPlaylist");l(this,"videoRouterLink",[]);l(this,"videoHref");l(this,"videoTarget");l(this,"ownerDisplayType");}get authorAccount(){return this.serverConfig.client.videos.miniature.preferAuthorDisplayName?this.video.account.displayName:this.video.byAccount;}get authorChannel(){return this.serverConfig.client.videos.miniature.preferAuthorDisplayName?this.video.channel.displayName:this.video.byVideoChannel;}get isVideoBlur(){return this.video.isVideoNSFWForUser(this.user,this.serverConfig);}ngOnInit(){this.serverConfig=this.serverService.getHTMLConfig(),this.buildVideoLink(),this.setUpBy(),this.channelLinkTitle="\n          "+this.video.channel.name+" (p\xE1gina del canal)\n        ",this.screenService.isInTouchScreen()&&this.loadActions();}buildVideoLink(){if(this.videoLinkType==="internal"||!this.video.url){this.videoRouterLink=Qe.buildWatchUrl(this.video);return;}if(this.videoLinkType==="external"){this.videoRouterLink=null,this.videoHref=this.video.url,this.videoTarget="_blank";return;}this.videoRouterLink=["/search/lazy-load-video",{url:this.video.url}];}displayOwnerAccount(){return this.ownerDisplayType==="account";}displayOwnerVideoChannel(){return this.ownerDisplayType==="videoChannel";}isUnlistedVideo(){return this.video.privacy.id===mt.UNLISTED;}isPrivateVideo(){return this.video.privacy.id===mt.PRIVATE;}isPasswordProtectedVideo(){return this.video.privacy.id===mt.PASSWORD_PROTECTED;}getStateLabel(n){if(!n.state)return"";if(n.privacy.id!==mt.PRIVATE&&n.state.id===ne.PUBLISHED)return"Publicado";if(n.scheduledUpdate){let e=new Date(n.scheduledUpdate.updateAt.toString()).toLocaleString(this.localeId);return"Publicaci\xF3n prevista el "+e+"";}switch(n.state.id){case ne.TRANSCODING_FAILED:return"Error de transcodificaci\xF3n";case ne.TO_MOVE_TO_FILE_SYSTEM:return"Moving to file system";case ne.TO_MOVE_TO_FILE_SYSTEM_FAILED:return"Moving to file system failed";case ne.TO_MOVE_TO_EXTERNAL_STORAGE:return"Moving to external storage";case ne.TO_MOVE_TO_EXTERNAL_STORAGE_FAILED:return"No se pudo mover al almacenamiento externo";case ne.TO_TRANSCODE:return n.waitTranscoding===!0?"Esperando transcodificaci\xF3n":"Para transcodificar";case ne.TO_IMPORT:return"Importar";case ne.TO_EDIT:return"Para editar";}return"";}getAriaLabel(){return"Watch video "+this.video.name+"";}loadActions(){this.displayVideoActions&&(this.showActions=!0),this.loadWatchLater();}onVideoBlocked(){this.videoBlocked.emit();}onVideoUnblocked(){this.videoUnblocked.emit();}onVideoRemoved(){this.videoRemoved.emit();}onVideoAccountMuted(){this.videoAccountMuted.emit();}isUserLoggedIn(){return this.authService.isLoggedIn();}onWatchLaterClick(n){n===!0?this.removeFromWatchLater():this.addToWatchLater(),this.inWatchLaterPlaylist=!n;}addToWatchLater(){let n={videoId:this.video.id};this.videoPlaylistService.addVideoInPlaylist(this.watchLaterPlaylist.id,n).subscribe(e=>{this.watchLaterPlaylist.playlistElementId=e.videoPlaylistElement.id;});}removeFromWatchLater(){this.videoPlaylistService.removeVideoFromPlaylist(this.watchLaterPlaylist.id,this.watchLaterPlaylist.playlistElementId,this.video.id).subscribe(n=>{});}isWatchLaterPlaylistDisplayed(){return this.displayVideoActions&&this.isUserLoggedIn()&&this.inWatchLaterPlaylist!==void 0;}getClasses(){return{"display-as-row":this.displayAsRow};}setUpBy(){if(this.displayOptions.forceChannelInBy){this.ownerDisplayType="videoChannel";return;}this.ownerDisplayType=this.videoService.buildDefaultOwnerDisplayType(this.video);}loadWatchLater(){!this.isUserLoggedIn()||this.inWatchLaterPlaylist!==void 0||(this.authService.userInformationLoaded.pipe(pi(()=>this.videoPlaylistService.listenToVideoPlaylistChange(this.video.id))).subscribe(n=>{let e=this.authService.getUser().specialPlaylists.find(o=>o.type===Ai.WATCH_LATER),i=n.find(o=>o.playlistId===e.id);this.inWatchLaterPlaylist=!1,this.watchLaterPlaylist={id:e.id},i&&(this.inWatchLaterPlaylist=!0,this.watchLaterPlaylist.playlistElementId=i.playlistElementId),this.cd.markForCheck();}),this.videoPlaylistService.runVideoExistsInPlaylistCheck(this.video.id));}};l(pt,"\u0275fac",function(e){return new(e||pt)(C(Xe),C(yt),C(De),C(Nt),C(fe),C(ft),C(vt));}),l(pt,"\u0275cmp",R({type:pt,selectors:[["my-video-miniature"]],inputs:{user:"user",video:"video",containedInPlaylists:"containedInPlaylists",displayOptions:"displayOptions",displayVideoActions:"displayVideoActions",videoActionsDisplayOptions:"videoActionsDisplayOptions",actorImageSize:[2,"actorImageSize","actorImageSize",fi],displayAsRow:"displayAsRow",videoLinkType:"videoLinkType"},outputs:{videoBlocked:"videoBlocked",videoUnblocked:"videoUnblocked",videoRemoved:"videoRemoved",videoAccountMuted:"videoAccountMuted"},standalone:!0,features:[gt,D],decls:28,vars:36,consts:()=>{let n;n="No listado";let e;e="Privado";let i;i="Password protected";let o;o="Bloqueado";let c;return c="\n        Sensible\n      ",[n,e,i,o,c,[1,"video-miniature",3,"mouseenter","ngClass"],[3,"watchLaterClick","ariaLabel","video","nsfw","videoRouterLink","videoHref","videoTarget","displayWatchLaterPlaylist","inWatchLaterPlaylist"],["ngProjectAs","label-warning",5,["label-warning"],4,"ngIf"],["ngProjectAs","label-danger",5,["label-danger"],4,"ngIf"],[1,"video-bottom"],[1,"video-miniature-information"],[1,"d-flex","video-miniature-meta"],["actorType","channel","size","32",3,"title","actor","size","internalHref",4,"ngIf"],[1,"w-100","d-flex","flex-column","min-width-0"],["className","ellipsis-multiline-2",1,"video-miniature-name",3,"internalLink","href","target","inheritParentCSS","ariaLabel","title","ngClass"],[1,"video-miniature-created-at-views"],[3,"date",4,"ngIf"],[1,"views",3,"title"],[4,"ngIf"],[3,"video",4,"ngIf"],["class","video-miniature-account",3,"routerLink",4,"ngIf"],[1,"video-info-privacy"],["class","contained-in-playlists",4,"ngIf"],["class","video-info-blocked",4,"ngIf"],["class","video-info-nsfw",4,"ngIf"],[1,"video-actions"],["placement","bottom-left bottom-right left auto",3,"video","displayOptions","videoRemoved","videoBlocked","videoUnblocked","videoAccountMuted",4,"ngIf"],["ngProjectAs","label-warning",5,["label-warning"]],["ngProjectAs","label-danger",5,["label-danger"]],["actorType","channel","size","32",3,"title","actor","size","internalHref"],[3,"date"],[3,"video"],[1,"video-miniature-account",3,"routerLink"],[1,"contained-in-playlists"],["class","pt-badge badge-secondary",3,"routerLink",4,"ngFor","ngForOf"],[1,"pt-badge","badge-secondary",3,"routerLink"],[1,"video-info-blocked"],[1,"blocked-label"],["class","blocked-reason",4,"ngIf"],[1,"blocked-reason"],[1,"video-info-nsfw"],["placement","bottom-left bottom-right left auto",3,"videoRemoved","videoBlocked","videoUnblocked","videoAccountMuted","video","displayOptions"]];},template:function(e,i){e&1&&(d(0,"div",5),E("mouseenter",function(){return i.loadActions();}),d(1,"my-video-thumbnail",6),E("watchLaterClick",function(c){return i.onWatchLaterClick(c);}),p(2,Wa,2,0,"ng-container",7)(3,Xa,2,0,"ng-container",8)(4,ja,2,0,"ng-container",8),s(),d(5,"div",9)(6,"div",10)(7,"div",11),p(8,Ya,1,6,"my-actor-avatar",12)(9,Qa,1,6,"my-actor-avatar",12),d(10,"div",13)(11,"my-link",14),h(12),s(),d(13,"span",15),p(14,Ka,1,1,"my-date-toggle",16),d(15,"span",17),p(16,qa,2,0,"ng-container",18)(17,Ja,1,1,"my-video-views-counter",19),s()(),p(18,tr,3,5,"a",20),d(19,"div",21),p(20,ir,2,1,"ng-container",18)(21,nr,2,0,"ng-container",18)(22,or,2,1,"ng-container",18),s(),p(23,rr,2,1,"div",22),s()(),p(24,sr,4,1,"div",23)(25,dr,2,0,"div",24),s(),d(26,"div",25),p(27,_r,1,2,"my-video-actions-dropdown",26),s()()()),e&2&&(r("ngClass",i.getClasses()),a(),r("ariaLabel",i.getAriaLabel())("video",i.video)("nsfw",i.isVideoBlur)("videoRouterLink",i.videoRouterLink)("videoHref",i.videoHref)("videoTarget",i.videoTarget)("displayWatchLaterPlaylist",i.isWatchLaterPlaylistDisplayed())("inWatchLaterPlaylist",i.inWatchLaterPlaylist),a(),r("ngIf",i.displayOptions.privacyLabel&&i.isUnlistedVideo()),a(),r("ngIf",i.displayOptions.privacyLabel&&i.isPrivateVideo()),a(),r("ngIf",i.displayOptions.privacyLabel&&i.isPasswordProtectedVideo()),a(4),r("ngIf",i.displayOptions.avatar&&i.displayOwnerVideoChannel()&&!i.displayAsRow),a(),r("ngIf",i.displayOptions.avatar&&i.displayOwnerAccount()&&!i.displayAsRow),a(2),r("internalLink",i.videoRouterLink)("href",i.videoHref)("target",i.videoTarget)("inheritParentCSS",!0)("ariaLabel",i.getAriaLabel())("title",i.video.name)("ngClass",y(34,Ba,i.isVideoBlur)),a(),F(" ",i.video.name," "),a(2),r("ngIf",i.displayOptions.date),a(),r("title",i.video.getExactNumberOfViews()),a(),r("ngIf",i.displayOptions.date&&i.displayOptions.views),a(),r("ngIf",i.displayOptions.views),a(),r("ngIf",i.displayOptions.by),a(2),r("ngIf",i.displayOptions.privacyText),a(),r("ngIf",i.displayOptions.privacyText&&i.displayOptions.state&&i.getStateLabel(i.video)),a(),r("ngIf",i.displayOptions.state),a(),r("ngIf",i.containedInPlaylists),a(),r("ngIf",i.displayOptions.blacklistInfo&&i.video.blacklisted),a(),r("ngIf",i.displayOptions.nsfw&&i.video.nsfw),a(2),r("ngIf",i.showActions));},dependencies:[U,jt,P,Fi,$i,Xt,Wt,He,W,Ut],styles:['.video-miniature[_ngcontent-%COMP%]{font-size:14px}.video-miniature-name[_ngcontent-%COMP%]{font-size:1.1em;transition:color .2s;font-weight:600;color:var(--mainForegroundColor);word-break:break-word;word-wrap:break-word;overflow-wrap:break-word}.video-miniature-name[_ngcontent-%COMP%]:hover{text-decoration:none}.video-miniature-name.blur-filter[_ngcontent-%COMP%]{filter:blur(3px);padding-inline-start:.25rem}.video-miniature-information[_ngcontent-%COMP%]{width:calc(100% - 40px)}my-actor-avatar[_ngcontent-%COMP%]{margin-inline-start:0;margin-inline-end:.625rem;margin-top:.625rem;margin-bottom:0}.video-miniature-created-at-views[_ngcontent-%COMP%]{font-size:13px}.video-miniature-account[_ngcontent-%COMP%], .video-miniature-channel[_ngcontent-%COMP%]{display:block;font-size:13px;color:var(--greyForegroundColor);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.video-miniature-account[_ngcontent-%COMP%]:hover, .video-miniature-account[_ngcontent-%COMP%]:focus, .video-miniature-account[_ngcontent-%COMP%]:active, .video-miniature-channel[_ngcontent-%COMP%]:hover, .video-miniature-channel[_ngcontent-%COMP%]:focus, .video-miniature-channel[_ngcontent-%COMP%]:active{text-decoration:none!important}.video-miniature-account[_ngcontent-%COMP%]:focus:not(:focus-visible), .video-miniature-channel[_ngcontent-%COMP%]:focus:not(:focus-visible){outline:none!important}.video-miniature-account[_ngcontent-%COMP%]:hover, .video-miniature-channel[_ngcontent-%COMP%]:hover{color:#303030}.video-info-privacy[_ngcontent-%COMP%], .video-info-blocked[_ngcontent-%COMP%]   .blocked-label[_ngcontent-%COMP%], .video-info-nsfw[_ngcontent-%COMP%]{font-weight:600}.video-info-blocked[_ngcontent-%COMP%]{color:red}.video-info-blocked[_ngcontent-%COMP%]   .blocked-reason[_ngcontent-%COMP%]:before{content:" - "}.video-info-nsfw[_ngcontent-%COMP%]{color:red}.video-actions[_ngcontent-%COMP%]{width:40px;height:30px}.video-actions[_ngcontent-%COMP%]     .dropdown-root:not(.show){opacity:0}.video-actions[_ngcontent-%COMP%]     .playlist-dropdown.show+my-action-dropdown .dropdown-root{opacity:1}.video-actions[_ngcontent-%COMP%]     .more-icon{opacity:.6}.video-actions[_ngcontent-%COMP%]     .more-icon:hover{opacity:1}.video-miniature[_ngcontent-%COMP%]:hover     .video-thumbnail-actions-overlay, .video-miniature[_ngcontent-%COMP%]:hover   .video-actions[_ngcontent-%COMP%]     .dropdown-root{opacity:1!important}.video-miniature[_ngcontent-%COMP%]:not(.display-as-row){display:flex;flex-direction:column;padding-bottom:15px;width:100%}.video-miniature[_ngcontent-%COMP%]:not(.display-as-row)   my-video-thumbnail[_ngcontent-%COMP%]{position:relative;height:0;width:100%;padding-top:56.25%}.video-miniature[_ngcontent-%COMP%]:not(.display-as-row)   my-video-thumbnail[_ngcontent-%COMP%]     .video-thumbnail{position:absolute;width:100%;height:100%;top:0}.video-miniature[_ngcontent-%COMP%]:not(.display-as-row)   .video-bottom[_ngcontent-%COMP%]{display:flex;width:100%;min-width:1px}.video-miniature[_ngcontent-%COMP%]:not(.display-as-row)   .video-miniature-name[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:5px}.video-miniature[_ngcontent-%COMP%]:not(.display-as-row)   .video-miniature-created-at-views[_ngcontent-%COMP%]{display:block}.video-miniature[_ngcontent-%COMP%]:not(.display-as-row)   .video-actions[_ngcontent-%COMP%]{margin-top:3px}@media screen and (max-width: 800px){.video-miniature[_ngcontent-%COMP%]:not(.display-as-row){width:100%;margin-bottom:25px}.video-miniature[_ngcontent-%COMP%]:not(.display-as-row)   .video-miniature-information[_ngcontent-%COMP%]{margin:0 10px;width:100%;text-align:left}.video-miniature[_ngcontent-%COMP%]:not(.display-as-row)   .video-actions[_ngcontent-%COMP%]{margin:0;top:-3px;width:auto}.video-miniature[_ngcontent-%COMP%]:not(.display-as-row)   .video-actions[_ngcontent-%COMP%]     .dropdown-root{opacity:1!important}.video-miniature[_ngcontent-%COMP%]:not(.display-as-row)     .video-thumbnail{border-radius:0}}.video-miniature.display-as-row[_ngcontent-%COMP%]{--rowThumbnailWidth: 280px;--rowThumbnailHeight: 153px;display:flex;flex-direction:row}.video-miniature.display-as-row[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]{display:flex;min-width:1px}.video-miniature.display-as-row[_ngcontent-%COMP%]   .channel-avatar[_ngcontent-%COMP%]{display:none}.video-miniature.display-as-row[_ngcontent-%COMP%]   my-video-thumbnail[_ngcontent-%COMP%]{min-width:var(--rowThumbnailWidth);max-width:var(--rowThumbnailWidth);height:var(--rowThumbnailHeight);margin-inline-end:1rem}.video-miniature.display-as-row[_ngcontent-%COMP%]   .video-miniature-name[_ngcontent-%COMP%]{font-size:1.3em}.video-miniature.display-as-row[_ngcontent-%COMP%]   .video-miniature-created-at-views[_ngcontent-%COMP%], .video-miniature.display-as-row[_ngcontent-%COMP%]   .video-miniature-account[_ngcontent-%COMP%], .video-miniature.display-as-row[_ngcontent-%COMP%]   .video-miniature-channel[_ngcontent-%COMP%]{font-size:14px}.video-miniature.display-as-row[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]{margin-top:-3px}.contained-in-playlists[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;column-gap:5px;row-gap:5px;font-size:1rem}@media screen and (max-width: 1040px){.main-col:not(.expanded)[_nghost-%COMP%]   .video-miniature.display-as-row[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .video-miniature.display-as-row[_ngcontent-%COMP%]{--rowThumbnailWidth: 201px;--rowThumbnailHeight: 114px}}@media screen and (max-width: 800px){.main-col.expanded[_nghost-%COMP%]   .video-miniature.display-as-row[_ngcontent-%COMP%], .main-col.expanded   [_nghost-%COMP%]   .video-miniature.display-as-row[_ngcontent-%COMP%]{--rowThumbnailWidth: 201px;--rowThumbnailHeight: 114px}}@media screen and (max-width: 740px){.main-col:not(.expanded)[_nghost-%COMP%]   .video-miniature.display-as-row[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .video-miniature.display-as-row[_ngcontent-%COMP%]{--rowThumbnailWidth: 125px;--rowThumbnailHeight: 71px}.main-col:not(.expanded)[_nghost-%COMP%]   .video-miniature.display-as-row[_ngcontent-%COMP%]   .video-miniature-name[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .video-miniature.display-as-row[_ngcontent-%COMP%]   .video-miniature-name[_ngcontent-%COMP%]{font-size:14px}.main-col:not(.expanded)[_nghost-%COMP%]   .video-miniature.display-as-row[_ngcontent-%COMP%]   .video-miniature-created-at-views[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .video-miniature.display-as-row[_ngcontent-%COMP%]   .video-miniature-created-at-views[_ngcontent-%COMP%], .main-col:not(.expanded)[_nghost-%COMP%]   .video-miniature.display-as-row[_ngcontent-%COMP%]   .video-miniature-account[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .video-miniature.display-as-row[_ngcontent-%COMP%]   .video-miniature-account[_ngcontent-%COMP%], .main-col:not(.expanded)[_nghost-%COMP%]   .video-miniature.display-as-row[_ngcontent-%COMP%]   .video-miniature-channel[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .video-miniature.display-as-row[_ngcontent-%COMP%]   .video-miniature-channel[_ngcontent-%COMP%]{font-size:12px}}@media screen and (max-width: 500px){.main-col.expanded[_nghost-%COMP%]   .video-miniature.display-as-row[_ngcontent-%COMP%], .main-col.expanded   [_nghost-%COMP%]   .video-miniature.display-as-row[_ngcontent-%COMP%]{--rowThumbnailWidth: 125px;--rowThumbnailHeight: 71px}.main-col.expanded[_nghost-%COMP%]   .video-miniature.display-as-row[_ngcontent-%COMP%]   .video-miniature-name[_ngcontent-%COMP%], .main-col.expanded   [_nghost-%COMP%]   .video-miniature.display-as-row[_ngcontent-%COMP%]   .video-miniature-name[_ngcontent-%COMP%]{font-size:14px}.main-col.expanded[_nghost-%COMP%]   .video-miniature.display-as-row[_ngcontent-%COMP%]   .video-miniature-created-at-views[_ngcontent-%COMP%], .main-col.expanded   [_nghost-%COMP%]   .video-miniature.display-as-row[_ngcontent-%COMP%]   .video-miniature-created-at-views[_ngcontent-%COMP%], .main-col.expanded[_nghost-%COMP%]   .video-miniature.display-as-row[_ngcontent-%COMP%]   .video-miniature-account[_ngcontent-%COMP%], .main-col.expanded   [_nghost-%COMP%]   .video-miniature.display-as-row[_ngcontent-%COMP%]   .video-miniature-account[_ngcontent-%COMP%], .main-col.expanded[_nghost-%COMP%]   .video-miniature.display-as-row[_ngcontent-%COMP%]   .video-miniature-channel[_ngcontent-%COMP%], .main-col.expanded   [_nghost-%COMP%]   .video-miniature.display-as-row[_ngcontent-%COMP%]   .video-miniature-channel[_ngcontent-%COMP%]{font-size:12px}}'],changeDetection:0}));var en=pt;export{Yi as a,Ki as b,xt as c,qi as d,el as e,tl as f,il as g,nl as h,$t as i,Bt as j,Ut as k,Wt as l,Xt as m,jt as n,en as o};/**i18n:2f710d33ac9c4f1483429afcadbb48fcf333aac524700807e70179670fe63b48*/