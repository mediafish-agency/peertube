import{h as v,j as A,x as V,y as h}from"./chunk-AHXSH3AS.js";import{$ as p,$d as R,Y as g,id as E}from"./chunk-4A7FW7VV.js";import{j as c,k as F}from"./chunk-K6ICEIKK.js";var u=class u{constructor(r){this.formBuilder=r}buildForm(r,t={}){var i;let o={},a={},s={};for(let e of Object.keys(r)){o[e]="";let m=r[e];if(this.isRecursiveField(m)){let d=this.buildForm(m,t[e]);s[e]=d.form,o[e]=d.formErrors,a[e]=d.validationMessages;continue}m!=null&&m.MESSAGES&&(a[e]=m.MESSAGES);let l=(i=t[e])!=null?i:"";m!=null&&m.VALIDATORS?s[e]=[l,m.VALIDATORS]:s[e]=[l]}return{form:this.formBuilder.group(s),formErrors:o,validationMessages:a}}updateFormGroup(r,t,o,a,s={}){var n;for(let i of R(a)){t[i]="";let e=a[i];if(this.isRecursiveField(e)){this.updateFormGroup(r[i],t[i],o[i],a[i],s[i]);continue}e!=null&&e.MESSAGES&&(o[i]=e.MESSAGES);let m=(n=s[i])!=null?n:"";r.addControl(i+"",new A(m,e==null?void 0:e.VALIDATORS,e==null?void 0:e.ASYNC_VALIDATORS))}}addControlInFormArray(r){let{formArray:t,formErrors:o,validationMessages:a,controlName:s,formToBuild:n,defaultValues:i={}}=r,e=new v({});o[s]||(o[s]=[]),a[s]||(a[s]=[]);let m=o[s],l=a[s],d=t.controls.length;m.push({}),l.push({}),this.updateFormGroup(e,m[d],l[d],n,i),t.push(e)}removeControlFromFormArray(r){let{formArray:t,formErrors:o,validationMessages:a,index:s,controlName:n}=r,i=o[n],e=a[n];i.splice(s,1),e.splice(s,1),t.removeAt(s)}updateTreeValidity(r){for(let t of Object.keys(r.controls)){let o=r.controls[t];o instanceof v||o instanceof V?this.updateTreeValidity(o):o.updateValueAndValidity({emitEvent:!1})}}isRecursiveField(r){return r&&typeof r=="object"&&!r.MESSAGES&&!r.VALIDATORS}};c(u,"\u0275fac",function(t){return new(t||u)(p(h))}),c(u,"\u0275prov",g({token:u,factory:u.\u0275fac}));var y=u;var f=class f{constructor(r){this.formValidatorService=r}buildForm(r,t={}){let{formErrors:o,validationMessages:a,form:s}=this.formValidatorService.buildForm(r,t);return s.statusChanges.subscribe(()=>F(this,null,function*(){yield this.waitPendingCheck(s),this.onStatusChanged({form:s,formErrors:o,validationMessages:a})})),{form:s,formErrors:o,validationMessages:a}}waitPendingCheck(r){return F(this,null,function*(){if(r.status==="PENDING")do yield E(10);while(r.status==="PENDING")})}markAllAsDirty(r){let t=r;for(let o of Object.keys(t)){let a=t[o];if(a instanceof v){this.markAllAsDirty(a.controls);continue}a.markAsDirty()}}forceCheck(r,t,o){this.onStatusChanged({form:r,formErrors:t,validationMessages:o,onlyDirty:!1})}onStatusChanged(r){let{form:t,formErrors:o,validationMessages:a,onlyDirty:s=!0}=r;for(let n of Object.keys(o)){if(o[n]&&typeof o[n]=="object"){this.onStatusChanged({form:t.controls[n],formErrors:o[n],validationMessages:a[n],onlyDirty:s});continue}o[n]="";let i=t.get(n);if(!i||s&&!i.dirty||!i.enabled||!i.errors)continue;let e=a[n];for(let m of Object.keys(i.errors)){let l=i.errors[m];if(e[m])o[n]+=e[m]+" ";else if(typeof l=="string")o[n]+=i.errors[m];else throw new Error("Form error value of "+n+" is invalid")}}}};c(f,"\u0275fac",function(t){return new(t||f)(p(y))}),c(f,"\u0275prov",g({token:f,factory:f.\u0275fac}));var M=f;var S=class{constructor(){c(this,"formChanged",!1);c(this,"form");c(this,"formErrors");c(this,"validationMessages")}buildForm(r,t={}){let{formErrors:o,validationMessages:a,form:s}=this.formReactiveService.buildForm(r,t);this.form=s,this.formErrors=o,this.validationMessages=a}waitPendingCheck(){return F(this,null,function*(){return this.formReactiveService.waitPendingCheck(this.form)})}markAllAsDirty(){return this.formReactiveService.markAllAsDirty(this.form.controls)}forceCheck(){return this.formReactiveService.forceCheck(this.form,this.formErrors,this.validationMessages)}};export{y as a,M as b,S as c};
/**i18n:2f710d33ac9c4f1483429afcadbb48fcf333aac524700807e70179670fe63b48*/
