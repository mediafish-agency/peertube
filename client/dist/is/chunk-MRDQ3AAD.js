import{a as g,b as ae}from"./chunk-LRNUW7WF.js";import{d as _e}from"./chunk-5CNYD3QV.js";import{b as te,c as oe}from"./chunk-RZGVOE4L.js";import{A as ie,c as j,f as H,g as B,l as J,o as Q,r as W,w as Z,z as ee}from"./chunk-AHXSH3AS.js";import{Ab as q,Ca as m,Da as u,Ib as C,Kb as k,La as V,Oa as E,Qf as T,Sa as a,Vf as ne,Wb as X,Zc as z,ab as _,ba as p,bb as r,bd as w,cb as f,db as U,eb as F,fg as M,gb as $,hg as re,ib as G,jb as Y,kb as l,la as h,ma as L,ob as b,pb as d,pc as K,rc as A,yb as D,zb as x}from"./chunk-4A7FW7VV.js";import"./chunk-BERSDMCF.js";import"./chunk-ONF7AOBQ.js";import{j as o}from"./chunk-K6ICEIKK.js";var ue=t=>({"input-error":t});function Se(t,i){if(t&1&&(_(0,"div",13),x(1),r()),t&2){let e=d(2);m(),q(e.formErrors["verify-email-email"]);}}function Ee(t,i){if(t&1){let e=$();_(0,"form",7),b("ngSubmit",function(){h(e);let s=d();return L(s.askSendVerifyEmail());}),_(1,"div",8)(2,"label",9),l(3,2),r(),f(4,"input",10),E(5,Se,2,1,"div",11),r(),f(6,"input",12),r();}if(t&2){let e=d();a("formGroup",e.form),m(4),a("ngClass",k(4,ue,e.formErrors["verify-email-email"])),m(),a("ngIf",e.formErrors["verify-email-email"]),m(),a("disabled",!e.form.valid);}}function fe(t,i){t&1&&(_(0,"div"),l(1,3),r());}var I=class I extends oe{constructor(e,n,s,c,S){super();this.formReactiveService=e;this.signupService=n;this.serverService=s;this.notifier=c;this.redirectService=S;o(this,"requiresEmailVerification",!1);}ngOnInit(){this.serverService.getConfig().subscribe(e=>this.requiresEmailVerification=e.signup.requiresEmailVerification),this.buildForm({"verify-email-email":_e});}askSendVerifyEmail(){let e=this.form.value["verify-email-email"];this.signupService.askSendVerifyEmail(e).subscribe({next:()=>{this.notifier.success("T\xF6lvup\xF3stur me\xF0 sta\xF0festingartengli ver\xF0ur sendur til "+e+"."),this.redirectService.redirectToHomepage();},error:n=>this.notifier.error(n.message)});}};o(I,"\u0275fac",function(n){return new(n||I)(u(te),u(g),u(T),u(M),u(ne));}),o(I,"\u0275cmp",p({type:I,selectors:[["my-verify-account-ask-send-email"]],standalone:!0,features:[V,C],decls:6,vars:2,consts:()=>{let e;e="Bi\xF0ja um t\xF6lvup\xF3st til a\xF0 sannreyna notandaa\xF0gang";let n;n="T\xF6lvup\xF3stfang";let s;s="Senda sannvottunarp\xF3st";let c;c="T\xF6lvup\xF3stur";let S;return S="\xDEetta tilvik krefst ekki sannvottunar me\xF0 t\xF6lvup\xF3sti.",[["emailVerificationNotRequired",""],e,c,S,[1,"margin-content"],[1,"title-page"],["role","form",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],["role","form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","verify-email-email"],["type","email","id","verify-email-email","placeholder",n,"required","","formControlName","verify-email-email",1,"form-control",3,"ngClass"],["class","form-error","role","alert",4,"ngIf"],["type","submit","value",s,1,"peertube-button","orange-button",3,"disabled"],["role","alert",1,"form-error"]];},template:function(n,s){if(n&1&&(_(0,"div",4)(1,"h1",5),l(2,1),r(),E(3,Ee,7,6,"form",6)(4,fe,2,0,"ng-template",null,0,X),r()),n&2){let c=D(5);m(3),a("ngIf",s.requiresEmailVerification)("ngIfElse",c);}},dependencies:[A,ee,J,j,H,B,Z,ie,Q,W,K],styles:["input[type=email][_ngcontent-%COMP%]{font-size:15px;padding:3px 15px;width:340px;max-width:340px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid var(--inputBorderColor);border-radius:3px;line-height:23px}input[type=email][_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}input[type=email][readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width: 380px){input[type=email][_ngcontent-%COMP%]{width:100%}}"]}));var P=I;function de(t,i){t&1&&(U(0),_(1,"p"),l(2,1),r(),_(3,"p"),l(4,2),r(),F());}function pe(t,i){t&1&&(U(0),_(1,"p"),l(2,3),r(),_(3,"p"),G(4,4),f(5,"a",8),Y(),r(),F());}var N=class N{constructor(){o(this,"requiresApproval");}};o(N,"\u0275fac",function(e){return new(e||N)();}),o(N,"\u0275cmp",p({type:N,selectors:[["my-signup-success-after-email"]],inputs:{requiresApproval:"requiresApproval"},standalone:!0,features:[C],decls:6,vars:2,consts:()=>{let i;i="T\xF6lvup\xF3stfang sta\xF0fest!";let e;e="T\xF6lvup\xF3stfangi\xF0 \xFEitt hefur veri\xF0 sta\xF0fest og bei\xF0ni \xFE\xEDn um notandaa\xF0gang var send!";let n;n="Umsj\xF3nara\xF0ili mun yfirfara skr\xE1ningarbei\xF0nina \xFE\xEDna flj\xF3tlega og \xFE\xFA munt f\xE1 t\xF6lvup\xF3st \xFEegar h\xFAn hefur veri\xF0 sam\xFEykkt e\xF0a henni hafna\xF0.";let s;s="T\xF6lvup\xF3stfangi\xF0 \xFEitt hefur veri\xF0 sta\xF0fest og notandaa\xF0gangurinn \xFEinn hefur veri\xF0 \xFAtb\xFAinn!";let c;return c="Ef \xFEig vantar hj\xE1lp vi\xF0 a\xF0 nota PeerTube, \xFE\xE1 getur\xF0u sko\xF0a\xF0 "+"\uFFFD#5\uFFFD"+"hj\xE1lparskj\xF6lin"+"\uFFFD/#5\uFFFD"+". ",[i,e,n,s,c,["mascotImageName","success"],[1,"alert","pt-alert-primary"],[4,"ngIf"],["href","https://docs.joinpeertube.org/use/setup-account","target","_blank","rel","noopener noreferrer",1,"link-orange"]];},template:function(e,n){e&1&&(_(0,"my-signup-step-title",5)(1,"strong"),l(2,0),r()(),_(3,"div",6),E(4,de,5,0,"ng-container",7)(5,pe,6,0,"ng-container",7),r()),e&2&&(m(4),a("ngIf",n.requiresApproval),m(),a("ngIf",!n.requiresApproval));},dependencies:[ae,A],styles:[".alert[_ngcontent-%COMP%]{font-size:18px;max-width:900px;text-align:center;margin:auto}"]}));var O=N;function Ce(t,i){if(t&1&&f(0,"my-signup-success-after-email",10),t&2){let e=d(2);a("requiresApproval",e.isRegistrationRequest()&&e.requiresApproval);}}function Ae(t,i){t&1&&(_(0,"div",11),l(1,1),r());}function ge(t,i){t&1&&(_(0,"div",12)(1,"span"),l(2,2),r(),_(3,"a",13),l(4,3),r()());}function Ie(t,i){if(t&1&&(_(0,"div",5)(1,"h1",6),l(2,0),r(),E(3,Ce,1,1,"my-signup-success-after-email",7)(4,Ae,2,0,"div",8)(5,ge,5,0,"div",9),r()),t&2){let e=d();m(3),a("ngIf",e.displaySignupSuccess()),m(),a("ngIf",!e.isRegistrationRequest()&&e.isPendingEmail&&e.success),m(),a("ngIf",e.failed);}}var v=class v{constructor(i,e,n,s,c){this.signupService=i;this.server=e;this.authService=n;this.notifier=s;this.route=c;o(this,"success",!1);o(this,"failed",!1);o(this,"isPendingEmail",!1);o(this,"requiresApproval");o(this,"loaded",!1);o(this,"userId");o(this,"registrationId");o(this,"verificationString");}get instanceName(){return this.server.getHTMLConfig().instance.name;}ngOnInit(){let i=this.route.snapshot.queryParams;if(this.server.getConfig().subscribe(e=>{this.requiresApproval=e.signup.requiresApproval,this.loaded=!0;}),this.userId=i.userId,this.registrationId=i.registrationId,this.verificationString=i.verificationString,this.isPendingEmail=i.isPendingEmail==="true",!this.verificationString){this.notifier.error("Fann ekki sta\xF0festingarstreng \xED sl\xF3\xF0 bei\xF0narinnar.");return;}if(!this.userId&&!this.registrationId){this.notifier.error("Fann ekki au\xF0kenni notanda e\xF0a skr\xE1ningarn\xFAmer \xED sl\xF3\xF0 bei\xF0narinnar.");return;}this.verifyEmail();}isRegistrationRequest(){return!!this.registrationId;}displaySignupSuccess(){return!(!this.success||!this.isRegistrationRequest()&&this.isPendingEmail);}verifyEmail(){return this.isRegistrationRequest()?this.verifyRegistrationEmail():this.verifyUserEmail();}verifyUserEmail(){let i={userId:this.userId,verificationString:this.verificationString,isPendingEmail:this.isPendingEmail};this.signupService.verifyUserEmail(i).subscribe({next:()=>{this.authService.isLoggedIn()&&this.authService.refreshUserInformation(),this.success=!0;},error:e=>{this.failed=!0,this.notifier.error(e.message);}});}verifyRegistrationEmail(){let i={registrationId:this.registrationId,verificationString:this.verificationString};this.signupService.verifyRegistrationEmail(i).subscribe({next:()=>{this.success=!0;},error:e=>{this.failed=!0,this.notifier.error(e.message);}});}};o(v,"\u0275fac",function(e){return new(e||v)(u(g),u(T),u(re),u(M),u(z));}),o(v,"\u0275cmp",p({type:v,selectors:[["my-verify-account-email"]],standalone:!0,features:[C],decls:1,vars:1,consts:()=>{let i;i="Sta\xF0festu t\xF6lvup\xF3stfang";let e;e="T\xF6lvup\xF3stfang uppf\xE6rt.";let n;n="\xDEa\xF0 kom upp villa.";let s;return s="Bi\xF0ja um n\xFDjan sta\xF0festingarp\xF3st",[i,e,n,s,["class","margin-content",4,"ngIf"],[1,"margin-content"],[1,"title-page"],[3,"requiresApproval",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[3,"requiresApproval"],[1,"alert","alert-success"],[1,"alert","alert-danger"],["routerLink","/verify-account/ask-send-email",1,"ms-1","link-orange"]];},template:function(e,n){e&1&&E(0,Ie,6,3,"div",4),e&2&&a("ngIf",n.loaded);},dependencies:[A,O,w],encapsulation:2}));var y=v;var Ke=[{path:"",providers:[g],children:[{path:"email",component:y,data:{meta:{title:"Sta\xF0festa notandaa\xF0gang me\xF0 t\xF6lvup\xF3sti"}}},{path:"ask-send-email",component:P,data:{meta:{title:"Biddu um t\xF6lvup\xF3st til a\xF0 sannreyna notandaa\xF0ganginn \xFEinn"}}}]}];export{Ke as default};/**i18n:2f710d33ac9c4f1483429afcadbb48fcf333aac524700807e70179670fe63b48*/