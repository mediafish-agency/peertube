import{a as v}from"./chunk-DPQ4XGHN.js";import{$d as F,Ab as U,Bf as h,Ca as o,Da as y,Ib as E,Na as b,Oa as l,Sa as r,Wb as k,ab as m,ba as d,bb as u,bc as P,bd as N,cb as _,cc as w,db as T,eb as x,ka as A,pb as s,pc as R,rc as M,ua as C,vb as z,wb as I,wc as L,xb as O,yb as g,za as f,zb as S}from"./chunk-4A7FW7VV.js";import{j as a}from"./chunk-K6ICEIKK.js";var H=["avatarEl"];function V(e,n){if(e&1&&_(0,"img",7,1),e&2){let t=s(2);r("ngClass",t.classes)("src",t.previewImage||t.avatarUrl||t.defaultAvatarUrl,f);}}function j(e,n){if(e&1&&(m(0,"div",8,1)(2,"span"),S(3),u()()),e&2){let t=s(2);r("ngClass",t.classes),o(3),U(t.getActorInitial());}}function $(e,n){if(e&1&&_(0,"div",8,1),e&2){let t=s(2);r("ngClass",t.classes);}}function G(e,n){if(e&1&&l(0,V,2,2,"img",5)(1,j,4,2,"div",6)(2,$,2,1,"div",6),e&2){let t=s();r("ngIf",t.displayImage()),o(),r("ngIf",t.displayActorInitial()),o(),r("ngIf",t.displayPlaceholder());}}function Q(e,n){}function q(e,n){e&1&&l(0,Q,0,0,"ng-template");}function K(e,n){if(e&1&&(m(0,"a",9),l(1,q,1,0,null,10),u()),e&2){let t=s(),i=g(1);r("href",t.href,f)("title",t.title),o(),r("ngTemplateOutlet",i);}}function B(e,n){}function J(e,n){e&1&&l(0,B,0,0,"ng-template");}function W(e,n){if(e&1&&(m(0,"a",11),l(1,J,1,0,null,10),u()),e&2){let t=s(),i=g(1);r("routerLink",t.internalHref)("title",t.title),o(),r("ngTemplateOutlet",i);}}function X(e,n){}function Y(e,n){e&1&&l(0,X,0,0,"ng-template");}function Z(e,n){if(e&1&&(T(0),l(1,Y,1,0,null,10),x()),e&2){s();let t=g(1);o(),r("ngTemplateOutlet",t);}}var c=class c{constructor(n){this.el=n;a(this,"avatarEl");a(this,"actor");a(this,"actorType");a(this,"previewImage");a(this,"size",120);a(this,"responseSize",!1);a(this,"href");a(this,"internalHref");a(this,"_title");a(this,"classes",[]);a(this,"defaultAvatarUrl");a(this,"avatarUrl");}set title(n){this._title=n;}get title(){return this._title?this._title:this.isAccount()?""+this.actor.name+" (lipu sijelo)":this.isChannel()?""+this.actor.name+" (lipu sitelen)":"";}ngOnInit(){this.buildDefaultAvatarUrl(),this.buildAvatarUrl(),this.buildClasses();}ngOnChanges(){this.buildAvatarUrl(),this.buildClasses();}buildClasses(){let n="100%",t="22px";this.classes=["avatar"],this.size&&!this.responseSize&&(n=`${this.size}px`,this.size<=18?t="13px":this.size>=100?t="40px":this.size>=120&&(t="46px")),this.isChannel()?this.classes.push("channel"):this.classes.push("account"),this.displayActorInitial()&&(this.classes.push("initial"),this.classes.push(this.getColorTheme()));let i=this.el.nativeElement.style;i.setProperty("--avatarSize",n),i.setProperty("--initialFontSize",t);}buildDefaultAvatarUrl(){this.defaultAvatarUrl=this.isChannel()?v.GET_DEFAULT_AVATAR_URL(this.getSizeNumber()):h.GET_DEFAULT_AVATAR_URL(this.getSizeNumber());}buildAvatarUrl(){if(!this.actor){this.avatarUrl="";return;}if(this.isAccount()){this.avatarUrl=h.GET_ACTOR_AVATAR_URL(this.actor,this.getSizeNumber());return;}if(this.isChannel()){this.avatarUrl=v.GET_ACTOR_AVATAR_URL(this.actor,this.getSizeNumber());return;}this.avatarUrl="";}displayImage(){return this.actorType==="unlogged"||this.previewImage?!0:!!(this.actor&&this.avatarUrl);}displayActorInitial(){return!this.displayImage()&&this.actor&&!this.avatarUrl;}displayPlaceholder(){return this.actorType!=="unlogged"&&!this.actor;}getActorInitial(){var t;let n=(t=this.actor)==null?void 0:t.name;return n?n.slice(0,1):"";}isAccount(){return this.actorType==="account";}isChannel(){return this.actorType==="channel";}getSizeNumber(){if(this.size)return+this.size;}getColorTheme(){let n=this.getActorInitial().toLowerCase(),t={"0123456789abc":"blue",def:"green",ghi:"purple",jkl:"gray",mno:"yellow",pqr:"orange",stvu:"red",wxyz:"dark-blue"},i=F(t).find(p=>p.includes(n));return t[i]||"blue";}};a(c,"\u0275fac",function(t){return new(t||c)(y(C));}),a(c,"\u0275cmp",d({type:c,selectors:[["my-actor-avatar"]],viewQuery:function(t,i){if(t&1&&z(H,5),t&2){let p;I(p=O())&&(i.avatarEl=p.first);}},inputs:{actor:"actor",actorType:"actorType",previewImage:"previewImage",size:[2,"size","size",w],responseSize:[2,"responseSize","responseSize",P],href:"href",internalHref:"internalHref",title:"title"},standalone:!0,features:[b,A,E],decls:5,vars:3,consts:[["img",""],["avatarEl",""],["target","_blank","rel","noopener noreferrer",3,"href","title",4,"ngIf"],[3,"routerLink","title",4,"ngIf"],[4,"ngIf"],["alt","",3,"ngClass","src",4,"ngIf"],[3,"ngClass",4,"ngIf"],["alt","",3,"ngClass","src"],[3,"ngClass"],["target","_blank","rel","noopener noreferrer",3,"href","title"],[4,"ngTemplateOutlet"],[3,"routerLink","title"]],template:function(t,i){t&1&&l(0,G,3,3,"ng-template",null,0,k)(2,K,2,3,"a",2)(3,W,2,3,"a",3)(4,Z,2,1,"ng-container",4),t&2&&(o(2),r("ngIf",i.actor&&i.href),o(),r("ngIf",i.actor&&i.internalHref),o(),r("ngIf",!i.actor||!i.href&&!i.internalHref));},dependencies:[M,R,L,N],styles:[".avatar[_ngcontent-%COMP%]{width:var(--avatarSize);height:var(--avatarSize);min-width:var(--avatarSize);min-height:var(--avatarSize)}.avatar.account[_ngcontent-%COMP%]{object-fit:cover;border-radius:50%}.avatar.channel[_ngcontent-%COMP%]{border-radius:5px}a[_ngcontent-%COMP%]:hover{text-decoration:none}.initial[_ngcontent-%COMP%]{background-color:#3c2109;color:#fff;display:flex;align-items:center;justify-content:center;font-size:var(--initialFontSize)}.initial.blue[_ngcontent-%COMP%]{background-color:#009fd4}.initial.green[_ngcontent-%COMP%]{background-color:#0a5}.initial.purple[_ngcontent-%COMP%]{background-color:#b381b3}.initial.gray[_ngcontent-%COMP%]{background-color:#939393}.initial.yellow[_ngcontent-%COMP%]{background-color:#aa8f00}.initial.orange[_ngcontent-%COMP%]{background-color:#d47500}.initial.red[_ngcontent-%COMP%]{background-color:#e76e3c}.initial.dark-blue[_ngcontent-%COMP%]{background-color:#0a3055}"]}));var D=c;export{D as a};/**i18n:2f710d33ac9c4f1483429afcadbb48fcf333aac524700807e70179670fe63b48*/