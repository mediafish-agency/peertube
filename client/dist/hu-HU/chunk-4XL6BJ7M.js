import{Af as o,Be as h,Kd as c,Md as n,Nd as d,Ye as l,ge as u,jf as g,qe as a,wf as b,xd as s,yf as m}from"./chunk-4A7FW7VV.js";import{j as i}from"./chunk-K6ICEIKK.js";var A=class{constructor(t,e={}){i(this,"byVideoChannel");i(this,"byAccount");i(this,"createdAt");i(this,"updatedAt");i(this,"publishedAt");i(this,"originallyPublishedAt");i(this,"category");i(this,"licence");i(this,"language");i(this,"privacy");i(this,"truncatedDescription");i(this,"description");i(this,"duration");i(this,"durationLabel");i(this,"id");i(this,"uuid");i(this,"shortUUID");i(this,"isLocal");i(this,"name");i(this,"serverHost");i(this,"thumbnailPath");i(this,"thumbnailUrl");i(this,"aspectRatio");i(this,"isLive");i(this,"previewPath");i(this,"previewUrl");i(this,"embedPath");i(this,"embedUrl");i(this,"url");i(this,"views");i(this,"viewers");i(this,"likes");i(this,"dislikes");i(this,"nsfw");i(this,"originInstanceUrl");i(this,"originInstanceHost");i(this,"waitTranscoding");i(this,"state");i(this,"scheduledUpdate");i(this,"blacklisted");i(this,"blacklistedReason");i(this,"blockedOwner");i(this,"blockedServer");i(this,"account");i(this,"channel");i(this,"userHistory");i(this,"pluginData");i(this,"streamingPlaylists");i(this,"files");i(this,"videoSource");i(this,"automaticTags");let r=b();this.createdAt=new Date(t.createdAt.toString()),this.publishedAt=new Date(t.publishedAt.toString()),this.category=t.category,this.licence=t.licence,this.language=t.language,this.privacy=t.privacy,this.waitTranscoding=t.waitTranscoding,this.state=t.state,this.truncatedDescription=t.truncatedDescription,this.description=t.description,this.isLive=t.isLive,this.duration=t.duration,this.durationLabel=g(t.duration),this.id=t.id,this.uuid=t.uuid,this.shortUUID=t.shortUUID,this.isLocal=t.isLocal,this.name=t.name,this.thumbnailPath=t.thumbnailPath,this.thumbnailUrl=this.thumbnailPath?t.thumbnailUrl||r+t.thumbnailPath:null,this.previewPath=t.previewPath,this.previewUrl=this.previewPath?t.previewUrl||r+t.previewPath:null,this.embedPath=t.embedPath,this.embedUrl=t.embedUrl||m()+t.embedPath,this.url=t.url,this.views=t.views,this.viewers=t.viewers,this.likes=t.likes,this.dislikes=t.dislikes,this.nsfw=t.nsfw,this.account=t.account,this.channel=t.channel,this.byAccount=o.CREATE_BY_STRING(t.account.name,t.account.host),this.byVideoChannel=o.CREATE_BY_STRING(t.channel.name,t.channel.host),this.category.label=a(this.category.label,e),this.licence.label=a(this.licence.label,e),this.language.label=a(this.language.label,e),this.privacy.label=a(this.privacy.label,e),this.scheduledUpdate=t.scheduledUpdate,this.originallyPublishedAt=t.originallyPublishedAt?new Date(t.originallyPublishedAt.toString()):null,this.state&&(this.state.label=a(this.state.label,e)),this.blacklisted=t.blacklisted,this.blacklistedReason=t.blacklistedReason,this.blockedOwner=t.blockedOwner,this.blockedServer=t.blockedServer,this.streamingPlaylists=t.streamingPlaylists,this.files=t.files,this.videoSource=t.videoSource,this.userHistory=t.userHistory,this.originInstanceHost=this.account.host,this.originInstanceUrl="https://"+this.originInstanceHost,this.pluginData=t.pluginData,this.aspectRatio=t.aspectRatio,this.automaticTags=t.automaticTags;}static buildWatchUrl(t){return u({shortUUID:t.shortUUID||t.uuid});}static buildUpdateUrl(t){return"/videos/update/"+(t.shortUUID||t.uuid);}isVideoNSFWForUser(t,e){return this.nsfw===!1?!1:t?t.nsfwPolicy!=="display":e.instance.defaultNSFWPolicy!=="display";}isRemovableBy(t){return t&&this.isLocal===!0&&(this.account.name===t.username||t.hasRight(s.REMOVE_ANY_VIDEO));}isBlockableBy(t){return this.blacklisted!==!0&&t&&t.hasRight(s.MANAGE_VIDEO_BLACKLIST)===!0;}isUnblockableBy(t){return this.blacklisted===!0&&t&&t.hasRight(s.MANAGE_VIDEO_BLACKLIST)===!0;}isUpdatableBy(t){return t&&this.isLocal===!0&&(this.account.name===t.username||t.hasRight(s.UPDATE_ANY_VIDEO));}isEditableBy(t,e){var r;return e&&((r=this.state)==null?void 0:r.id)===n.PUBLISHED&&this.isUpdatableBy(t);}isOwner(t){return t&&this.isLocal===!0&&this.account.name===t.username;}hasSeeAllVideosRight(t){return t==null?void 0:t.hasRight(s.SEE_ALL_VIDEOS);}isOwnerOrHasSeeAllVideosRight(t){return this.isOwner(t)||this.hasSeeAllVideosRight(t);}canRemoveOneFile(t){return this.isLocal&&t&&t.hasRight(s.MANAGE_VIDEO_FILES)&&this.state.id!==n.TO_TRANSCODE&&h(this).length>1;}canRemoveAllHLSOrWebFiles(t){return this.isLocal&&t&&t.hasRight(s.MANAGE_VIDEO_FILES)&&this.state.id!==n.TO_TRANSCODE&&this.hasHLS()&&this.hasWebVideos();}canRunTranscoding(t){var e;return this.isLocal&&!this.isLive&&(t==null?void 0:t.hasRight(s.RUN_VIDEO_TRANSCODING))&&((e=this.state)==null?void 0:e.id)&&!this.transcodingAndTranscriptionIncompatibleStates().has(this.state.id);}canGenerateTranscription(t,e){var r;return e&&this.isLocal&&!this.isLive&&t.hasRight(s.UPDATE_ANY_VIDEO)&&((r=this.state)==null?void 0:r.id)&&!this.transcodingAndTranscriptionIncompatibleStates().has(this.state.id);}transcodingAndTranscriptionIncompatibleStates(){return new Set([n.TO_IMPORT,n.TO_EDIT,n.TO_MOVE_TO_EXTERNAL_STORAGE,n.TO_MOVE_TO_FILE_SYSTEM]);}hasHLS(){var t;return(t=this.streamingPlaylists)==null?void 0:t.some(e=>e.type===d.HLS);}hasWebVideos(){return this.files&&this.files.length!==0;}isLiveInfoAvailableBy(t){return this.isLive&&t&&this.isLocal===!0&&(this.account.name===t.username||t.hasRight(s.GET_ANY_LIVE));}canBeDuplicatedBy(t){return t&&this.isLocal===!1&&t.hasRight(s.MANAGE_VIDEOS_REDUNDANCIES);}canAccessPasswordProtectedVideoWithoutPassword(t){return this.privacy.id===c.PASSWORD_PROTECTED&&t&&this.isLocal===!0&&(this.account.name===t.username||t.hasRight(s.SEE_ALL_VIDEOS));}getExactNumberOfViews(){return this.isLive?l("{viewers, plural, =0 {Nincs n\xE9z\u0151} other {{viewers} n\xE9z\u0151}}",{viewers:this.viewers}):l("{views, plural, =0 {Nincs megtekint\xE9s} other {{views} megtekint\xE9s}}",{views:this.views});}};export{A as a};/**i18n:2f710d33ac9c4f1483429afcadbb48fcf333aac524700807e70179670fe63b48*/