import{$ as p,B as s,Gc as h,Kc as I,Qf as E,R as d,Ue as f,Y as u,gg as V,kg as S,m,qe as b,ug as R,zf as c}from"./chunk-4A7FW7VV.js";import{j as l}from"./chunk-K6ICEIKK.js";var o=class o{constructor(t,e,i,r){this.authHttp=t;this.restService=e;this.restExtractor=i;this.serverService=r}importVideoUrl(t,e){let i=o.BASE_VIDEO_IMPORT_URL,r=this.buildImportVideoObject(e);r.targetUrl=t;let a=c(r);return this.authHttp.post(i,a).pipe(s(n=>this.restExtractor.handleError(n)))}importVideoTorrent(t,e){let i=o.BASE_VIDEO_IMPORT_URL,r=this.buildImportVideoObject(e);typeof t=="string"?r.magnetUri=t:r.torrentfile=t;let a=c(r);return this.authHttp.post(i,a).pipe(s(n=>this.restExtractor.handleError(n)))}getMyVideoImports(t,e,i){let r=new h;if(r=this.restService.addRestGetParams(r,t,e),i){let a=this.restService.parseQueryStringFilter(i,{videoChannelSyncId:{prefix:"videoChannelSyncId:"},targetUrl:{prefix:"targetUrl:"}});r=this.restService.addObjectParams(r,a)}return this.authHttp.get(R.BASE_USERS_URL+"me/videos/imports",{params:r}).pipe(d(a=>this.extractVideoImports(a)),s(a=>this.restExtractor.handleError(a)))}deleteVideoImport(t){return this.authHttp.delete(o.BASE_VIDEO_IMPORT_URL+t.id).pipe(s(e=>this.restExtractor.handleError(e)))}cancelVideoImport(t){return this.authHttp.post(o.BASE_VIDEO_IMPORT_URL+t.id+"/cancel",{}).pipe(s(e=>this.restExtractor.handleError(e)))}buildImportVideoObject(t){let e=t.language||null,i=t.licence||null,r=t.category||null,a=t.description||null,n=t.support||null,v=t.scheduleUpdate||null,U=t.originallyPublishedAt||null;return{name:t.name,category:r,licence:i,language:e,support:n,description:a,channelId:t.channelId,privacy:t.privacy,tags:t.tags,nsfw:t.nsfw,waitTranscoding:t.waitTranscoding,commentsPolicy:t.commentsPolicy,downloadEnabled:t.downloadEnabled,thumbnailfile:t.thumbnailfile,previewfile:t.previewfile,scheduleUpdate:v,originallyPublishedAt:U}}extractVideoImports(t){return this.serverService.getServerLocale().pipe(m(e=>(t.data.forEach(i=>i.state.label=b(i.state.label,e)),t)))}};l(o,"BASE_VIDEO_IMPORT_URL",f.apiUrl+"/api/v1/videos/imports/"),l(o,"\u0275fac",function(e){return new(e||o)(p(I),p(S),p(V),p(E))}),l(o,"\u0275prov",u({token:o,factory:o.\u0275fac}));var g=o;export{g as a};
/**i18n:2f710d33ac9c4f1483429afcadbb48fcf333aac524700807e70179670fe63b48*/
