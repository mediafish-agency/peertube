import{a as Te}from"./chunk-OOKZXLTV.js";import{a as Ie,g as G}from"./chunk-FDM4WNGU.js";import{a as Oe}from"./chunk-4V7EB4W6.js";import{r as Ue}from"./chunk-XEFO2OX5.js";import{a as De}from"./chunk-WRZZAQTV.js";import{p as Ne}from"./chunk-5CNYD3QV.js";import{b as Me,c as $e}from"./chunk-RZGVOE4L.js";import{A as ye,c as he,f as fe,g as Se,l as _e,o as ve,r as be,z as Ae}from"./chunk-AHXSH3AS.js";import{$ as O,B as p,Bb as ae,Bf as Y,C as B,Ca as m,D,Da as a,Df as g,Gc as me,Ib as H,Kb as ce,Kc as pe,La as te,Lb as le,Oa as N,Of as Ee,Pd as F,Qf as V,R as J,Sa as h,Wb as ue,Y as Z,Ye as q,ab as l,ba as x,bb as u,cb as b,db as ie,eb as re,fg as Q,gb as k,gg as Ce,hg as Re,i as R,ka as ee,kb as W,kg as Be,la as _,lb as oe,m as X,ma as v,mb as ne,ob as y,pb as d,pc as de,qe as ge,r as K,rc as L,sa as $,ug as f,vb as z,wb as w,xb as P,xd as I,zb as se}from"./chunk-4A7FW7VV.js";import{j as o,k as T}from"./chunk-K6ICEIKK.js";var A=class A{constructor(t,e,i,r){this.authHttp=t;this.restExtractor=e;this.restService=i;this.serverService=r;}addUser(t){return this.authHttp.post(f.BASE_USERS_URL,t).pipe(p(e=>this.restExtractor.handleError(e)));}updateUser(t,e){return this.authHttp.put(f.BASE_USERS_URL+t,e).pipe(p(i=>this.restExtractor.handleError(i)));}updateUsers(t,e){return R(t).pipe(D(i=>this.authHttp.put(f.BASE_USERS_URL+i.id,e)),B(),p(i=>this.restExtractor.handleError(i)));}getUsers(t){let{pagination:e,sort:i,search:r}=t,n=new me();if(n=this.restService.addRestGetParams(n,e,i),r){let s=this.restService.parseQueryStringFilter(r,{blocked:{prefix:"banned:",isBoolean:!0}});n=this.restService.addObjectParams(n,s);}return this.authHttp.get(f.BASE_USERS_URL,{params:n}).pipe(J(s=>this.serverService.getServerLocale().pipe(X(S=>({data:s,translations:S})))),X(({data:s,translations:S})=>this.restExtractor.applyToResultListData(s,this.formatUser.bind(this),[S])),p(s=>this.restExtractor.handleError(s)));}removeUsers(t){let e=F(t);return R(e).pipe(D(i=>this.authHttp.delete(f.BASE_USERS_URL+i.id)),B(),p(i=>this.restExtractor.handleError(i)));}banUsers(t,e){let i=e?{reason:e}:{},r=F(t);return R(r).pipe(D(n=>this.authHttp.post(f.BASE_USERS_URL+n.id+"/block",i)),B(),p(n=>this.restExtractor.handleError(n)));}unbanUsers(t){let e=F(t);return R(e).pipe(D(i=>this.authHttp.post(f.BASE_USERS_URL+i.id+"/unblock",{})),B(),p(i=>this.restExtractor.handleError(i)));}formatUser(t,e={}){let i;t.videoQuota===-1?i="\u221E":i=g(t.videoQuota,0);let r=g(t.videoQuotaUsed,0),n,s;return t.videoQuotaDaily===-1?(n="\u221E",s=g(0,0)+""):(n=g(t.videoQuotaDaily,0)+"",s=g(t.videoQuotaUsedDaily||0,0)+""),Object.assign(t,{role:{id:t.role.id,label:ge(t.role.label,e)},videoQuota:i,videoQuotaUsed:r,rawVideoQuota:t.videoQuota,rawVideoQuotaUsed:t.videoQuotaUsed,videoQuotaDaily:n,videoQuotaUsedDaily:s,rawVideoQuotaDaily:t.videoQuotaDaily,rawVideoQuotaUsedDaily:t.videoQuotaUsedDaily});}};o(A,"\u0275fac",function(e){return new(e||A)(O(pe),O(Ce),O(Be),O(V));}),o(A,"\u0275prov",Z({token:A,factory:A.Éµfac}));var M=A;var Le=["modal"],Fe=c=>({"input-error":c});function Ve(c,t){if(c&1&&(l(0,"div",17),se(1),u()),c&2){let e=d(2);m(),ae(" ",e.formErrors.reason," ");}}function Qe(c,t){if(c&1){let e=k();l(0,"div",3)(1,"h4",4),W(2,1),u(),l(3,"button",5),y("click",function(){_(e);let r=d();return v(r.hide());}),b(4,"my-global-icon",6),u()(),l(5,"div",7)(6,"div",8),W(7,2),u(),l(8,"form",9),y("ngSubmit",function(){_(e);let r=d();return v(r.banUser());}),l(9,"div",10),b(10,"textarea",11),N(11,Ve,2,1,"div",12),u(),l(12,"div",10),b(13,"my-peertube-checkbox",13),u(),l(14,"div",14)(15,"input",15),y("click",function(){_(e);let r=d();return v(r.hide());})("key.enter",function(){_(e);let r=d();return v(r.hide());}),u(),b(16,"input",16),u()()();}if(c&2){let e=d();m(2),oe(e.getModalTitle()),ne(2),m(6),h("formGroup",e.form),m(2),h("ngClass",ce(6,Fe,e.formErrors.reason)),m(),h("ngIf",e.formErrors.reason),m(5),h("value",e.getModalTitle())("disabled",!e.form.valid);}}var U=class U extends $e{constructor(e,i,r,n,s){super();this.formReactiveService=e;this.modalService=i;this.notifier=r;this.userAdminService=n;this.blocklistService=s;o(this,"modal");o(this,"userBanned",new $());o(this,"usersToBan");o(this,"openedModal");o(this,"modalMessage","");}ngOnInit(){this.buildForm({reason:Ne,mute:null});}openModal(e){this.usersToBan=e,this.openedModal=this.modalService.open(this.modal,{centered:!0});}hide(){this.usersToBan=void 0,this.openedModal.close();}banUser(){let e=this.form.value.reason||void 0,i=this.form.value.mute,r=[this.userAdminService.banUsers(this.usersToBan,e)];i&&r.push(this.muteAccounts()),K(r).subscribe({next:()=>{let n;Array.isArray(this.usersToBan)?n=q("{count, plural, =1 {\u06CC\u06A9 \u06A9\u0627\u0631\u0628\u0631 \u0645\u0633\u062F\u0648\u062F \u0634\u062F.} other {\u06A9\u0627\u0631\u0628\u0631 \u0645\u0633\u062F\u0648\u062F \u0634\u062F\u0646\u062F.{count}}}",{count:this.usersToBan.length}):n="\u06A9\u0627\u0631\u0628\u0631 "+this.usersToBan.username+" \u0645\u0645\u0646\u0648\u0639 \u0627\u0633\u062A.",this.notifier.success(n),this.userBanned.emit(this.usersToBan),this.hide();},error:n=>this.notifier.error(n.message)});}getModalTitle(){return Array.isArray(this.usersToBan)?q("\u0645\u0633\u062F\u0648\u062F \u06A9\u0631\u062F\u0646 {count, plural, =1 {\u06CC\u06A9 \u06A9\u0627\u0631\u0628\u0631} other {\u06A9\u0627\u0631\u0628\u0631{count} }}",{count:this.usersToBan.length}):"\u0645\u0645\u0646\u0648\u0639 \u06A9\u0631\u062F\u0646 \""+this.usersToBan.username+"\"";}muteAccounts(){let e=Array.isArray(this.usersToBan)?this.usersToBan.map(i=>new Y(i.account)):new Y(this.usersToBan.account);return this.blocklistService.blockAccountByInstance(e);}};o(U,"\u0275fac",function(i){return new(i||U)(a(Me),a(Ue),a(Q),a(M),a(G));}),o(U,"\u0275cmp",x({type:U,selectors:[["my-user-ban-modal"]],viewQuery:function(i,r){if(i&1&&z(Le,7),i&2){let n;w(n=P())&&(r.modal=n.first);}},outputs:{userBanned:"userBanned"},standalone:!0,features:[te,H],decls:2,vars:0,consts:()=>{let e;e="Close this modal";let i;i="\u062F\u0644\u06CC\u0644...";let r;r="\u0628\u06CC\u200C\u0635\u062F\u0627 \u0646\u0645\u0648\u062F\u0646 \u0648 \u0647\u0645\u0686\u0646\u06CC\u0646 \u067E\u0646\u0647\u0627\u0646\u200C\u06A9\u0631\u062F\u0646 \u0648\u06CC\u062F\u0626\u0648\u0647\u0627/\u0627\u0638\u0647\u0627\u0631\u0646\u0638\u0631\u0647\u0627";let n;n="\u0644\u063A\u0648";let s;s=""+"\uFFFD0\uFFFD"+"";let S;return S="\u06A9\u0627\u0631\u0628\u0631 \u0645\u0633\u062F\u0648\u062F \u0634\u062F\u0647 \u062F\u06CC\u06AF\u0631 \u0646\u0645\u06CC\u200C\u062A\u0648\u0627\u0646\u062F \u0648\u0627\u0631\u062F \u0634\u0648\u062F.",[["modal",""],s,S,[1,"modal-header"],[1,"modal-title"],["title",e,1,"border-0","p-0",3,"click"],["iconName","cross"],[1,"modal-body"],[1,"description"],["novalidate","",3,"ngSubmit","formGroup"],[1,"form-group"],["placeholder",i,"formControlName","reason",1,"form-control",3,"ngClass"],["class","form-error","role","alert",4,"ngIf"],["inputName","banMute","formControlName","mute","labelText",r],[1,"form-group","inputs"],["type","button","role","button","value",n,1,"peertube-button","grey-button",3,"click","key.enter"],["type","submit",1,"peertube-button","orange-button",3,"value","disabled"],["role","alert",1,"form-error"]];},template:function(i,r){i&1&&N(0,Qe,17,8,"ng-template",null,0,ue);},dependencies:[De,Ae,_e,he,fe,Se,ye,ve,be,de,L,Oe],styles:[".description[_ngcontent-%COMP%]{margin-bottom:15px}textarea[_ngcontent-%COMP%]{color:var(--textareaForegroundColor)!important;background-color:var(--textareaBackgroundColor)!important;height:60px;font-size:15px;padding:3px 15px;width:100%;max-width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid var(--inputBorderColor);border-radius:3px;line-height:23px}textarea[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}textarea[readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width: calc(100% + 40px)){textarea[_ngcontent-%COMP%]{width:100%}}"]}));var j=U;var Ge=["userBanModal"],je=(c,t)=>({user:c,account:t});function Xe(c,t){if(c&1){let e=k();ie(0),l(1,"my-user-ban-modal",2,0),y("userBanned",function(){_(e);let r=d();return v(r.onUserBanned());}),u(),b(3,"my-action-dropdown",3),re();}if(c&2){let e=d();m(3),h("actions",e.userActions)("entry",le(7,je,e.user,e.account))("buttonSize",e.buttonSize)("placement",e.placement)("label",e.label)("container",e.container)("buttonStyled",e.buttonStyled);}}var E=class E{constructor(t,e,i,r,n,s,S){this.authService=t;this.notifier=e;this.confirmService=i;this.serverService=r;this.userAdminService=n;this.blocklistService=s;this.bulkService=S;o(this,"userBanModal");o(this,"user");o(this,"account");o(this,"prependActions");o(this,"buttonSize","normal");o(this,"buttonStyled",!0);o(this,"placement","right-top right-bottom auto");o(this,"label");o(this,"container");o(this,"displayOptions",{myAccount:!0,instanceAccount:!0,instanceUser:!0});o(this,"userChanged",new $());o(this,"userDeleted",new $());o(this,"userActions",[]);o(this,"requiresEmailVerification",!1);}ngOnInit(){this.serverService.getConfig().subscribe(t=>this.requiresEmailVerification=t.signup.requiresEmailVerification);}ngOnChanges(){this.buildActions();}openBanUserModal(t){if(t.username==="root"){this.notifier.error("\u0634\u0645\u0627 \u0646\u0645\u06CC\u200C\u062A\u0648\u0627\u0646\u06CC\u062F root \u0631\u0627 \u0645\u0633\u062F\u0648\u062F \u06A9\u0646\u06CC\u062F.");return;}this.userBanModal.openModal(t);}onUserBanned(){this.userChanged.emit();}unbanUser(t){return T(this,null,function*(){(yield this.confirmService.confirm("\u0622\u06CC\u0627 \u0648\u0627\u0642\u0639\u0627 \u0645\u06CC\u062E\u0648\u0627\u0647\u06CC\u062F "+t.username+" \u0631\u0627 \u0631\u0641\u0639 \u0645\u0645\u0646\u0648\u0639\u06CC\u062A \u0646\u0645\u0627\u06CC\u06CC\u062F\u061F","\u0631\u0641\u0639 \u0645\u0645\u0646\u0648\u0639\u06CC\u062A"))!==!1&&this.userAdminService.unbanUsers(t).subscribe({next:()=>{this.notifier.success("\u06A9\u0627\u0631\u0628\u0631 "+t.username+" \u0631\u0641\u0639 \u0645\u0645\u0646\u0648\u0639\u06CC\u062A \u0634\u062F."),this.userChanged.emit();},error:i=>this.notifier.error(i.message)});});}removeUser(t){return T(this,null,function*(){if(t.username==="root"){this.notifier.error("\u0634\u0645\u0627 \u0646\u0645\u06CC\u200C\u062A\u0648\u0627\u0646\u06CC\u062F root \u0631\u0627 \u062D\u0630\u0641 \u06A9\u0646\u06CC\u062F.");return;}let e="\u0627\u06AF\u0631 \u0627\u06CC\u0646 \u06A9\u0627\u0631\u0628\u0631 \u0631\u0627 \u062D\u0630\u0641 \u06A9\u0646\u06CC\u062F \u0627\u0645\u06A9\u0627\u0646 \u0627\u06CC\u062C\u0627\u062F \u06A9\u0627\u0631\u0628\u0631 \u062C\u062F\u06CC\u062F \u06CC\u0627 \u06CC\u06A9 \u06A9\u0627\u0646\u0627\u0644 \u0628\u0627 \u0646\u0627\u0645 \u06A9\u0627\u0631\u0628\u0631\u06CC <strong>"+t.username+"</strong> \u0631\u0627 \u0646\u062E\u0648\u0627\u0647\u06CC\u062F \u062F\u0627\u0634\u062A!";(yield this.confirmService.confirm(e,"\u062D\u0630\u0641 "+t.username+""))!==!1&&this.userAdminService.removeUsers(t).subscribe({next:()=>{this.notifier.success("\u06A9\u0627\u0631\u0628\u0631 "+t.username+" \u062D\u0630\u0641 \u0634\u062F."),this.userDeleted.emit();},error:r=>this.notifier.error(r.message)});});}setEmailAsVerified(t){this.userAdminService.updateUser(t.id,{emailVerified:!0}).subscribe({next:()=>{this.notifier.success("\u0627\u06CC\u0645\u06CC\u0644 \u06A9\u0627\u0631\u0628\u0631 "+t.username+" \u0628\u0647 \u0639\u0646\u0648\u0627\u0646 \u062A\u0627\u06CC\u06CC\u062F \u0634\u062F\u0647\u060C \u062B\u0628\u062A \u0634\u062F"),this.userChanged.emit();},error:e=>this.notifier.error(e.message)});}blockAccountByUser(t){this.blocklistService.blockAccountByUser(t).subscribe({next:()=>{this.notifier.success("\u062D\u0633\u0627\u0628\u200C\u06A9\u0627\u0631\u0628\u0631\u06CC "+t.nameWithHost+" \u0645\u0633\u06A9\u0648\u062A \u0634\u062F."),this.account.mutedByUser=!0,this.userChanged.emit();},error:e=>this.notifier.error(e.message)});}unblockAccountByUser(t){this.blocklistService.unblockAccountByUser(t).subscribe({next:()=>{this.notifier.success("\u062D\u0633\u0627\u0628\u200C\u06A9\u0627\u0631\u0628\u0631\u06CC "+t.nameWithHost+" \u063A\u06CC\u0631\u0645\u0633\u06A9\u0648\u062A \u0634\u062F."),this.account.mutedByUser=!1,this.userChanged.emit();},error:e=>this.notifier.error(e.message)});}blockServerByUser(t){this.blocklistService.blockServerByUser(t).subscribe({next:()=>{this.notifier.success("\u0633\u0627\u06CC\u062A "+t+" \u0645\u0633\u06A9\u0648\u062A \u0634\u062F. "),this.account.mutedServerByUser=!0,this.userChanged.emit();},error:e=>this.notifier.error(e.message)});}unblockServerByUser(t){this.blocklistService.unblockServerByUser(t).subscribe({next:()=>{this.notifier.success("\u0633\u0627\u06CC\u062A "+t+" \u0645\u0633\u0643\u0648\u062A \u0634\u062F."),this.account.mutedServerByUser=!1,this.userChanged.emit();},error:e=>this.notifier.error(e.message)});}blockAccountByInstance(t){this.blocklistService.blockAccountByInstance(t).subscribe({next:()=>{this.notifier.success("\u062D\u0633\u0627\u0628 \u06A9\u0627\u0631\u0628\u0631\u06CC "+t.nameWithHost+" \u062A\u0648\u0633\u0637 \u0627\u06CC\u0646 \u0633\u0627\u06CC\u062A \u0645\u0633\u0643\u0648\u062A \u0634\u062F."),this.account.mutedByInstance=!0,this.userChanged.emit();},error:e=>this.notifier.error(e.message)});}unblockAccountByInstance(t){this.blocklistService.unblockAccountByInstance(t).subscribe({next:()=>{this.notifier.success("\u062D\u0633\u0627\u0628\u200C\u06A9\u0627\u0631\u0628\u0631\u06CC "+t.nameWithHost+" \u062A\u0648\u0633\u0637 \u0627\u06CC\u0646 \u0633\u0627\u06CC\u062A \u0627\u0632 \u062D\u0627\u0644\u062A \u0645\u0633\u06A9\u0648\u062A \u062E\u0627\u0631\u062C \u0634\u062F."),this.account.mutedByInstance=!1,this.userChanged.emit();},error:e=>this.notifier.error(e.message)});}blockServerByInstance(t){this.blocklistService.blockServerByInstance(t).subscribe({next:()=>{this.notifier.success("\u0633\u0627\u06CC\u062A"+t+" \u062A\u0648\u0633\u0637 \u0627\u06CC\u0646 \u0633\u0627\u06CC\u062A \u0645\u0633\u0643\u0648\u062A \u0634\u062F."),this.account.mutedServerByInstance=!0,this.userChanged.emit();},error:e=>this.notifier.error(e.message)});}unblockServerByInstance(t){this.blocklistService.unblockServerByInstance(t).subscribe({next:()=>{this.notifier.success("\u0633\u0627\u06CC\u062A "+t+" \u0628\u0648\u0633\u06CC\u0644\u0647 \u0627\u06CC\u0646 \u0633\u0627\u06CC\u062A \u0627\u0632 \u062D\u0627\u0644\u062A \u0645\u0633\u06A9\u0648\u062A \u062E\u0627\u0631\u062C \u0634\u062F."),this.account.mutedServerByInstance=!1,this.userChanged.emit();},error:e=>this.notifier.error(e.message)});}bulkRemoveCommentsOf(t){return T(this,null,function*(){let e="\u0622\u06CC\u0627 \u0645\u0637\u0645\u0626\u0646 \u0647\u0633\u062A\u06CC\u062F \u06A9\u0647 \u0645\u06CC\u200C\u062E\u0648\u0627\u0647\u06CC\u062F \u062A\u0645\u0627\u0645 \u0627\u0638\u0647\u0627\u0631\u0646\u0638\u0631\u0627\u062A \u0627\u06CC\u0646 \u062D\u0633\u0627\u0628\u200C\u0643\u0627\u0631\u0628\u0631\u064A \u0631\u0627 \u062D\u0630\u0641 \u06A9\u0646\u06CC\u062F\u061F";(yield this.confirmService.confirm(e,"\u062D\u0630\u0641 \u0627\u0638\u0647\u0627\u0631\u0646\u0638\u0631\u0627\u062A \u062D\u0633\u0627\u0628\u200C\u0643\u0627\u0631\u0628\u0631\u064A"))!==!1&&this.bulkService.removeCommentsOf(t).subscribe({next:()=>{this.notifier.success("\u0627\u0638\u0647\u0627\u0631\u0646\u0638\u0631\u0627\u062A \u0627\u06CC\u0646 \u062D\u0633\u0627\u0628 \u0643\u0627\u0631\u0628\u0631\u064A \u0631\u0627 \u062D\u0630\u0641 \u062E\u0648\u0627\u0647\u062F \u06A9\u0631\u062F (\u0645\u0645\u06A9\u0646 \u0627\u0633\u062A \u0686\u0646\u062F \u062F\u0642\u06CC\u0642\u0647 \u0632\u0645\u0627\u0646 \u0646\u064A\u0627\u0632 \u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F).");},error:r=>this.notifier.error(r.message)});});}getRouterUserEditLink(t){return["/admin","users","update",t.id];}isMyUser(t){return t&&this.authService.getUser().id===t.id;}isMyAccount(t){return t&&this.authService.getUser().account.id===t.id;}buildActions(){this.userActions=[],this.prependActions&&this.prependActions.length!==0&&(this.userActions=[this.prependActions]);let t=this.buildMyAccountModerationActions(),e=this.buildInstanceModerationActions();t.length!==0&&this.userActions.push(t),e.length!==0&&this.userActions.push(e);}buildMyAccountModerationActions(){return!this.account||!this.displayOptions.myAccount||!this.authService.isLoggedIn()?[]:[{label:"\u0646\u0638\u0627\u0631\u062A \u062D\u0633\u0627\u0628 \u06A9\u0627\u0631\u0628\u0631\u06CC \u0645\u0646",class:["red"],isHeader:!0},{label:"\u0645\u0633\u0643\u0648\u062A\u200C\u0643\u0631\u062F\u0646 \u0627\u06CC\u0646 \u062D\u0633\u0627\u0628\u200C\u06A9\u0627\u0631\u0628\u0631\u06CC",description:"\u067E\u0646\u0647\u0627\u0646 \u0646\u0645\u0648\u062F\u0646 \u0647\u0631 \u0645\u062D\u062A\u0648\u0627\u06CC \u0627\u0632 \u0633\u0645\u062A \u0622\u0646 \u06A9\u0627\u0631\u0628\u0631 \u0646\u0633\u0628\u062A \u0628\u0647 \u0634\u0645\u0627.",isDisplayed:({account:e})=>!this.isMyAccount(e)&&e.mutedByUser===!1,handler:({account:e})=>this.blockAccountByUser(e)},{label:"\u062E\u0631\u0648\u062C \u0627\u06CC\u0646 \u06A9\u0627\u0631\u0628\u0631 \u0627\u0632 \u062D\u0627\u0644\u062A \u0645\u0633\u06A9\u0648\u062A",description:"\u0645\u062D\u062A\u0648\u0627\u06CC \u06A9\u0627\u0631\u0628\u0631 \u0631\u0627 \u062F\u0648\u0628\u0627\u0631\u0647 \u0628\u0631\u0627\u06CC \u062E\u0648\u062F \u0646\u0645\u0627\u06CC\u0634 \u062F\u0647\u06CC\u062F.",isDisplayed:({account:e})=>!this.isMyAccount(e)&&e.mutedByUser===!0,handler:({account:e})=>this.unblockAccountByUser(e)},{label:"\u0645\u0633\u06A9\u0648\u062A \u06A9\u0631\u062F\u0646 \u0633\u0627\u06CC\u062A",description:"\u067E\u0646\u0647\u0627\u0646\u200C\u06A9\u0631\u062F\u0646 \u0647\u0631\u06AF\u0648\u0646\u0647 \u0645\u062D\u062A\u0648\u0627 \u0627\u0632 \u0622\u0646 \u0633\u0627\u06CC\u062A \u0628\u0631\u0627\u06CC \u0634\u0645\u0627.",isDisplayed:({account:e})=>!e.userId&&e.mutedServerByUser===!1,handler:({account:e})=>this.blockServerByUser(e.host)},{label:"\u062E\u0627\u0631\u062C\u200C\u06A9\u0631\u062F\u0646 \u0627\u06CC\u0646 \u0633\u0627\u06CC\u062A \u0627\u0632 \u062D\u0627\u0644\u062A \u0645\u0633\u06A9\u0648\u062A",description:"\u0646\u0645\u0627\u06CC\u0634 \u0645\u062C\u062F\u062F \u0645\u062D\u062A\u0648\u0627 \u0627\u0632 \u0622\u0646 \u0633\u0627\u06CC\u062A \u0628\u0631\u0627\u06CC \u0634\u0645\u0627.",isDisplayed:({account:e})=>!e.userId&&e.mutedServerByUser===!0,handler:({account:e})=>this.unblockServerByUser(e.host)},{label:"\u062D\u0630\u0641 \u0627\u0638\u0647\u0627\u0631\u0646\u0638\u0631\u0627\u062A \u0627\u0632 \u0648\u06CC\u062F\u0626\u0648\u0647\u0627\u06CC \u0634\u0645\u0627",description:"\u062D\u0630\u0641 \u0627\u0638\u0647\u0627\u0631\u0646\u0638\u0631\u0647\u0627\u06CC \u0627\u06CC\u0646 \u062D\u0633\u0627\u0628\u200C\u06A9\u0627\u0631\u0628\u0631\u06CC \u062F\u0631\u0628\u0627\u0631\u0647 \u0648\u06CC\u062F\u0626\u0648\u0647\u0627\u06CC \u0634\u0645\u0627.",isDisplayed:({account:e})=>!this.isMyAccount(e),handler:({account:e})=>this.bulkRemoveCommentsOf({accountName:e.nameWithHost,scope:"my-videos"})}];}buildInstanceModerationActions(){if(!this.authService.isLoggedIn())return[];let t=this.authService.getUser(),e=[];return this.user&&this.displayOptions.instanceUser&&t.hasRight(I.MANAGE_USERS)&&t.canManage(this.user)&&(e=e.concat([{label:"\u0648\u06CC\u0631\u0627\u06CC\u0634 \u06A9\u0627\u0631\u0628\u0631",description:"\u062A\u063A\u06CC\u06CC\u0631 \u0633\u0647\u0645\u06CC\u0647\u060C \u0646\u0642\u0634\u060C \u0648 \u0628\u06CC\u0634\u062A\u0631.",linkBuilder:({user:i})=>this.getRouterUserEditLink(i)},{label:"\u062D\u0630\u0641 \u06A9\u0627\u0631\u0628\u0631",description:"\u0648\u064A\u062F\u0626\u0648\u0647\u0627 \u062D\u0630\u0641 \u062E\u0648\u0627\u0647\u0646\u062F \u0634\u062F\u060C \u0627\u0638\u0647\u0627\u0631\u0646\u0638\u0631\u0627\u062A \u0645\u062F\u0641\u0648\u0646 \u0645\u064A\u0634\u0648\u0646\u062F.",isDisplayed:({user:i})=>!this.isMyUser(i),handler:({user:i})=>this.removeUser(i)},{label:"\u0645\u0633\u062F\u0648\u062F \u06A9\u0631\u062F\u0646",description:"\u06A9\u0627\u0631\u0628\u0631 \u062F\u06CC\u06AF\u0631 \u0642\u0627\u062F\u0631 \u0628\u0647 \u0648\u0631\u0648\u062F \u0628\u0647 \u0633\u06CC\u0633\u062A\u0645 \u0646\u06CC\u0633\u062A\u060C \u0627\u0645\u0627 \u0641\u06CC\u0644\u0645\u200C\u0647\u0627 \u0648 \u0627\u0638\u0647\u0627\u0631\u0646\u0638\u0631\u0627\u062A \u0628\u0647 \u0647\u0645\u0627\u0646 \u0635\u0648\u0631\u062A \u0646\u06AF\u0647 \u062F\u0627\u0634\u062A\u0647 \u062E\u0648\u0627\u0647\u062F \u0634\u062F.",handler:({user:i})=>this.openBanUserModal(i),isDisplayed:({user:i})=>!this.isMyUser(i)&&!i.blocked},{label:"\u0631\u0641\u0639 \u0645\u0645\u0646\u0648\u0639\u06CC\u062A \u06A9\u0627\u0631\u0628\u0631",description:"\u0627\u062C\u0627\u0632\u0647 \u0628\u0647 \u06A9\u0627\u0631\u0628\u0631 \u062C\u0647\u062A \u0648\u0631\u0648\u062F \u0628\u0647 \u0633\u064A\u0633\u062A\u0645 \u0648 \u0627\u064A\u062C\u0627\u062F \u062F\u0648\u0628\u0627\u0631\u0647 \u0648\u06CC\u062F\u0626\u0648/\u0627\u0638\u0647\u0627\u0631\u0646\u0638\u0631",handler:({user:i})=>this.unbanUser(i),isDisplayed:({user:i})=>!this.isMyUser(i)&&i.blocked},{label:"\u062A\u0646\u0638\u06CC\u0645 \u0627\u06CC\u0645\u06CC\u0644 \u0628\u0647 \u0639\u0646\u0648\u0627\u0646 \u062A\u0627\u06CC\u06CC\u062F \u0634\u062F\u0647",handler:({user:i})=>this.setEmailAsVerified(i),isDisplayed:({user:i})=>!i.blocked&&i.emailVerified!==!0}])),this.account&&this.displayOptions.instanceAccount&&t.hasRight(I.MANAGE_ACCOUNTS_BLOCKLIST)&&(e=e.concat([{label:"\u0645\u0633\u0643\u0648\u062A\u200C\u0643\u0631\u062F\u0646 \u0627\u06CC\u0646 \u062D\u0633\u0627\u0628\u200C\u06A9\u0627\u0631\u0628\u0631\u06CC",description:"\u067E\u0646\u0647\u0627\u0646\u200C\u0646\u0645\u0648\u062F\u0646 \u0647\u0631 \u0645\u062D\u062A\u0648\u0627\u06CC\u06CC \u0627\u0632 \u0633\u0645\u062A \u0622\u0646 \u06A9\u0627\u0631\u0628\u0631 \u0628\u0631\u0627\u06CC \u0634\u0645\u0627\u060C \u0633\u0627\u06CC\u062A \u0634\u0645\u0627 \u0648 \u06A9\u0627\u0631\u0628\u0631\u0627\u0646 \u0622\u0646.",isDisplayed:({account:i})=>!this.isMyAccount(i)&&i.mutedByInstance===!1,handler:({account:i})=>this.blockAccountByInstance(i)},{label:"\u062E\u0631\u0648\u062C \u0627\u06CC\u0646 \u06A9\u0627\u0631\u0628\u0631 \u0627\u0632 \u062D\u0627\u0644\u062A \u0645\u0633\u06A9\u0648\u062A",description:"\u0646\u0645\u0627\u06CC\u0634 \u0645\u062C\u062F\u062F \u0645\u062D\u062A\u0648\u0627 \u0627\u0632 \u0627\u06CC\u0646 \u06A9\u0627\u0631\u0628\u0631 \u0628\u0647 \u0627\u0633\u062A\u0641\u0627\u062F\u0647\u200C\u06A9\u0646\u0646\u062F\u06AF\u0627\u0646 \u0627\u06CC\u0646 \u0633\u0627\u06CC\u062A.",isDisplayed:({account:i})=>!this.isMyAccount(i)&&i.mutedByInstance===!0,handler:({account:i})=>this.unblockAccountByInstance(i)}])),this.account&&this.displayOptions.instanceAccount&&t.hasRight(I.MANAGE_SERVERS_BLOCKLIST)&&(e=e.concat([{label:"\u0645\u0633\u06A9\u0648\u062A \u06A9\u0631\u062F\u0646 \u0633\u0627\u06CC\u062A",description:"\u067E\u0646\u0647\u0627\u0646 \u0646\u0645\u0648\u062F\u0646 \u0647\u0631 \u0645\u062D\u062A\u0648\u0627\u06CC\u06CC \u0627\u0632 \u0633\u0645\u062A \u0622\u0646 \u0633\u0627\u06CC\u062A \u0628\u0631\u0627\u06CC \u0634\u0645\u0627\u060C \u0633\u0627\u06CC\u062A \u0634\u0645\u0627 \u0648 \u06A9\u0627\u0631\u0628\u0631\u0627\u0646 \u0622\u0646.",isDisplayed:({account:i})=>!i.userId&&i.mutedServerByInstance===!1,handler:({account:i})=>this.blockServerByInstance(i.host)},{label:"\u063A\u06CC\u0631\u0645\u0633\u06A9\u0648\u062A \u06A9\u0631\u062F\u0646 \u0622\u0646 \u0633\u0627\u06CC\u062A \u062A\u0648\u0633\u0637 \u0633\u0627\u06CC\u062A \u0634\u0645\u0627",description:"\u0646\u0645\u0627\u06CC\u0634 \u0645\u062C\u062F\u062F \u0645\u062D\u062A\u0648\u0627 \u0627\u0632 \u0622\u0646 \u0633\u0627\u06CC\u062A \u0628\u0631\u0627\u06CC \u0634\u0645\u0627\u060C \u0633\u0627\u06CC\u062A \u0634\u0645\u0627 \u0648 \u0627\u0633\u062A\u0641\u0627\u062F\u0647\u200C\u06A9\u0646\u0646\u062F\u06AF\u0627\u0646 \u0627\u0632 \u0622\u0646.",isDisplayed:({account:i})=>!i.userId&&i.mutedServerByInstance===!0,handler:({account:i})=>this.unblockServerByInstance(i.host)}])),this.account&&this.displayOptions.instanceAccount&&t.hasRight(I.MANAGE_ANY_VIDEO_COMMENT)&&(e=e.concat([{label:"\u062D\u0630\u0641 \u0627\u0638\u0647\u0627\u0631\u0646\u0638\u0631\u0647\u0627 \u0627\u0632 \u0633\u0627\u06CC\u062A \u0634\u0645\u0627",description:"\u062D\u0630\u0641 \u0627\u0638\u0647\u0627\u0631\u0646\u0638\u0631\u0647\u0627\u06CC \u0627\u06CC\u0646 \u062D\u0633\u0627\u0628 \u06A9\u0627\u0631\u0628\u0631\u06CC \u0627\u0632 \u0633\u0627\u06CC\u062A \u0634\u0645\u0627.",isDisplayed:({account:i})=>!this.isMyAccount(i),handler:({account:i})=>this.bulkRemoveCommentsOf({accountName:i.nameWithHost,scope:"instance"})}])),e.length===0?[]:[{label:"\u0646\u0638\u0627\u0631\u062A \u0633\u0627\u06CC\u062A",isHeader:!0},...e];}};o(E,"\u0275fac",function(e){return new(e||E)(a(Re),a(Q),a(Ee),a(V),a(M),a(G),a(Te));}),o(E,"\u0275cmp",x({type:E,selectors:[["my-user-moderation-dropdown"]],viewQuery:function(e,i){if(e&1&&z(Ge,5),e&2){let r;w(r=P())&&(i.userBanModal=r.first);}},inputs:{user:"user",account:"account",prependActions:"prependActions",buttonSize:"buttonSize",buttonStyled:"buttonStyled",placement:"placement",label:"label",container:"container",displayOptions:"displayOptions"},outputs:{userChanged:"userChanged",userDeleted:"userDeleted"},standalone:!0,features:[ee,H],decls:1,vars:1,consts:[["userBanModal",""],[4,"ngIf"],[3,"userBanned"],[3,"actions","entry","buttonSize","placement","label","container","buttonStyled"]],template:function(e,i){e&1&&N(0,Xe,4,10,"ng-container",1),e&2&&h("ngIf",i.userActions.length!==0);},dependencies:[L,j,Ie],encapsulation:2}));var we=E;export{M as a,j as b,we as c};/**i18n:2f710d33ac9c4f1483429afcadbb48fcf333aac524700807e70179670fe63b48*/