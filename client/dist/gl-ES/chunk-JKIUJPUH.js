import{B as ae,t as ee,u as te,v as ne,w as oe,x as ie,y as re}from"./chunk-XEFO2OX5.js";import{a as me}from"./chunk-WRZZAQTV.js";import{a as K,c as q,f as J,k as Y,z as Z}from"./chunk-AHXSH3AS.js";import{Ab as D,Ca as d,Da as C,E as R,Eb as F,Ec as U,Fb as j,Gb as $,H as z,Hb as X,Ib as W,Kb as P,Na as L,Oa as s,Ra as H,Sa as a,X as A,Xf as de,ab as l,ba as I,bb as m,bc as S,c as N,cb as p,db as v,eb as M,gb as V,kb as h,la as u,ma as _,ob as b,pb as g,pc as G,qg as le,rc as Q,vb as T,wb as E,xb as O,ya as f,yb as B,zb as k}from"./chunk-4A7FW7VV.js";import{j as o,k as w}from"./chunk-K6ICEIKK.js";var se=["textarea"],pe=["previewElement"],ge=i=>({maximized:i}),ue=i=>({"input-error":i});function _e(i,n){if(i&1&&p(0,"div",17),i&2){let e=g(2);a("innerHTML",e.previewHTML,f);}}function Ce(i,n){i&1&&(v(0,9),l(1,"a",10),h(2,4),m(),s(3,_e,1,1,"ng-template",11),M());}function xe(i,n){if(i&1&&p(0,"div",null,2)(2,"div",18),i&2){let e=g();d(2),a("innerHTML",e.previewHTML,f);}}function we(i,n){if(i&1&&p(0,"my-global-icon",19),i&2){let e=g();a("ngbTooltip",e.maximizeInText);}}function fe(i,n){if(i&1&&p(0,"my-global-icon",20),i&2){let e=g();a("ngbTooltip",e.maximizeOutText);}}function ve(i,n){if(i&1&&(l(0,"div",21),k(1),m()),i&2){let e=g();d(),D(e.formError);}}var c=class c{constructor(n,e,t){this.viewportScroller=n;this.screenService=e;this.markdownService=t;o(this,"content","");o(this,"formError");o(this,"truncateTo3Lines");o(this,"markdownType","text");o(this,"customMarkdownRenderer");o(this,"debounceTime",150);o(this,"markdownVideo");o(this,"name","description");o(this,"dir");o(this,"withEmoji",!1);o(this,"textareaElement");o(this,"previewElement");o(this,"previewHTML","");o(this,"isMaximized",!1);o(this,"disabled",!1);o(this,"maximizeInText","Maximizar editor");o(this,"maximizeOutText","Sa\xEDr da maximizaci\xF3n");o(this,"contentChanged",new N());o(this,"scrollPosition");o(this,"propagateChange",n=>{});}ngOnInit(){this.contentChanged.pipe(R(this.debounceTime),z()).subscribe(()=>this.updatePreviews()),this.contentChanged.next(this.content);}writeValue(n){this.content=n,this.contentChanged.next(this.content);}registerOnChange(n){this.propagateChange=n;}registerOnTouched(){}onModelChange(){this.propagateChange(this.content),this.contentChanged.next(this.content);}onMaximizeClick(){this.disabled||(this.isMaximized=!this.isMaximized,this.screenService.isInTouchScreen()||this.textareaElement.nativeElement.focus(),this.isMaximized?this.lockBodyScroll():this.unlockBodyScroll());}setDisabledState(n){this.disabled=n;}lockBodyScroll(){this.scrollPosition=this.viewportScroller.getScrollPosition(),document.getElementById("content").classList.add("lock-scroll");}unlockBodyScroll(){document.getElementById("content").classList.remove("lock-scroll"),this.viewportScroller.scrollToPosition(this.scrollPosition);}updatePreviews(){return w(this,null,function*(){this.content===null||this.content===void 0||(this.previewHTML=yield this.markdownRender(this.content));});}markdownRender(n){return w(this,null,function*(){let e;if(this.customMarkdownRenderer){let t=yield this.customMarkdownRenderer(n);if(t instanceof HTMLElement){let r=this.previewElement.nativeElement;r.innerHTML="",r.appendChild(t);return;}e=t;}else this.markdownType==="text"?e=yield this.markdownService.textMarkdownToHTML({markdown:n,withEmoji:this.withEmoji}):this.markdownType==="enhanced"?e=yield this.markdownService.enhancedMarkdownToHTML({markdown:n,withEmoji:this.withEmoji}):this.markdownType==="to-unsafe-html"&&(e=yield this.markdownService.markdownToUnsafeHTML({markdown:n}));return this.markdownVideo&&(e=this.markdownService.processVideoTimestamps(this.markdownVideo.shortUUID,e)),e;});}};o(c,"\u0275fac",function(e){return new(e||c)(C(U),C(de),C(le));}),o(c,"\u0275cmp",I({type:c,selectors:[["my-markdown-textarea"]],viewQuery:function(e,t){if(e&1&&(T(se,5),T(pe,5)),e&2){let r;E(r=O())&&(t.textareaElement=r.first),E(r=O())&&(t.previewElement=r.first);}},inputs:{content:"content",formError:"formError",truncateTo3Lines:[2,"truncateTo3Lines","truncateTo3Lines",S],markdownType:"markdownType",customMarkdownRenderer:"customMarkdownRenderer",debounceTime:"debounceTime",markdownVideo:"markdownVideo",name:"name",dir:"dir",withEmoji:[2,"withEmoji","withEmoji",S]},standalone:!0,features:[X([{provide:K,useExisting:A(()=>c),multi:!0}]),L,W],decls:16,vars:17,consts:()=>{let n;n="Vista previa completa";let e;return e="Vista previa recortada",[["textarea",""],["nav","ngbNav"],["previewElement",""],n,e,[1,"root",3,"ngClass"],[1,"form-control",3,"ngModelChange","ngModel","ngClass","id","name","dir"],["ngbNav","",1,"nav-pills","nav-preview"],["ngbNavItem","",4,"ngIf"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],["type","button",1,"maximize-button","border-0","m-3",3,"click","disabled"],["iconName","fullscreen",3,"ngbTooltip",4,"ngIf"],["iconName","exit-fullscreen",3,"ngbTooltip",4,"ngIf"],[3,"ngbNavOutlet"],["class","form-error","role","alert",4,"ngIf"],[1,"ellipsis-multiline-3",3,"innerHTML"],[3,"innerHTML"],["iconName","fullscreen",3,"ngbTooltip"],["iconName","exit-fullscreen",3,"ngbTooltip"],["role","alert",1,"form-error"]];},template:function(e,t){if(e&1){let r=V();l(0,"div",5)(1,"textarea",6,0),$("ngModelChange",function(x){return u(r),j(t.content,x)||(t.content=x),_(x);}),b("ngModelChange",function(){return u(r),_(t.onModelChange());}),k(3,"  "),m(),l(4,"div",7,1),s(6,Ce,4,0,"ng-container",8),v(7,9),l(8,"a",10),h(9,3),m(),s(10,xe,3,1,"ng-template",11),M(),l(11,"button",12),b("click",function(){return u(r),_(t.onMaximizeClick());}),s(12,we,1,1,"my-global-icon",13)(13,fe,1,1,"my-global-icon",14),m()(),p(14,"div",15),s(15,ve,2,1,"div",16),m();}if(e&2){let r=B(5);a("ngClass",P(13,ge,t.isMaximized)),d(),F("ngModel",t.content),a("ngClass",P(15,ue,t.formError))("id",t.name)("name",t.name)("dir",t.dir),H("disabled",t.disabled||null),d(5),a("ngIf",t.truncateTo3Lines),d(5),a("disabled",t.disabled),d(),a("ngIf",!t.isMaximized),d(),a("ngIf",t.isMaximized),d(),a("ngbNavOutlet",r),d(),a("ngIf",!t.isMaximized&&t.formError);}},dependencies:[G,Z,q,J,Y,ne,Q,te,ie,oe,ee,me,ae,re],styles:[".root[_ngcontent-%COMP%]{display:flex;flex-direction:column}.root[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background-color:var(--markdownTextareaBackgroundColor);font-family:monospace;font-size:13px;border-bottom:0;color:var(--textareaForegroundColor)!important;background-color:var(--textareaBackgroundColor)!important;height:150px;font-size:15px;padding:3px 15px;width:100%;max-width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid var(--inputBorderColor);border-radius:3px;line-height:23px}.root[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}.root[_ngcontent-%COMP%]   textarea[readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width: calc(100% + 40px)){.root[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%}}.root[_ngcontent-%COMP%]   .nav-preview[_ngcontent-%COMP%]{padding:10px 0;border:1px solid var(--inputBorderColor);border-top:1px dashed var(--inputBorderColor);border-bottom-right-radius:3px;border-bottom-left-radius:3px;display:flex;flex-grow:1;border-bottom-left-radius:unset;border-bottom-right-radius:unset;border-bottom:2px solid var(--mainColor)}.root[_ngcontent-%COMP%]   .nav-preview[_ngcontent-%COMP%]   .maximize-button[_ngcontent-%COMP%]{opacity:.6}.root[_ngcontent-%COMP%]   .nav-preview[_ngcontent-%COMP%]   .maximize-button[_ngcontent-%COMP%]:not([disabled]):hover, .root[_ngcontent-%COMP%]   .nav-preview[_ngcontent-%COMP%]   .maximize-button[_ngcontent-%COMP%]:not([disabled]):active{opacity:1}.root[_ngcontent-%COMP%]   .nav-pills[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end}.root[_ngcontent-%COMP%]   .nav-pills[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{font-size:.9em!important}.root[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{min-height:75px;max-height:210px;padding:15px;overflow-y:auto;word-wrap:break-word;border:1px solid var(--inputBorderColor);border-top:0;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.root.maximized[_ngcontent-%COMP%]{z-index:17499;position:fixed;top:50px;left:240px;max-height:none!important;max-width:none!important;width:calc(100% - 240px);height:calc(100vh - 50px);display:grid;grid-template-rows:auto 1fr;grid-template-columns:1fr 1fr;background-color:var(--mainBackgroundColor)}.root.maximized[_ngcontent-%COMP%]   .nav-preview[_ngcontent-%COMP%]{grid-row:1;grid-column:1/3;border:0;border-bottom:2px solid var(--mainColor);padding:20px 0;width:100%!important}.root.maximized[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{grid-column:1;border:0;border-right:1px dashed var(--inputBorderColor);resize:none}.root.maximized[_ngcontent-%COMP%]     .tab-content{grid-column:2;border:0;display:block;overflow-y:auto;word-wrap:break-word;scrollbar-color:var(--actionButtonColor) var(--mainBackgroundColor)}.root.maximized[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .root.maximized[_ngcontent-%COMP%]     .tab-content{grid-row:2;height:100%!important;max-height:none!important;border-radius:0;padding:15px}@media screen and (max-width: 500px){.root.maximized[_ngcontent-%COMP%]{grid-template-rows:auto 45% 1fr;grid-template-columns:1fr}.root.maximized[_ngcontent-%COMP%]   .nav-preview[_ngcontent-%COMP%]{grid-column:1}.root.maximized[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{grid-row:2;grid-column:1;border:0;border-bottom:1px dashed var(--inputBorderColor)}.root.maximized[_ngcontent-%COMP%]     .tab-content{grid-column:1;grid-row:3}}.main-col.expanded[_nghost-%COMP%]   .root.maximized[_ngcontent-%COMP%], .main-col.expanded   [_nghost-%COMP%]   .root.maximized[_ngcontent-%COMP%]{left:0;width:100%}"]}));var ce=c;export{ce as a};/**i18n:2f710d33ac9c4f1483429afcadbb48fcf333aac524700807e70179670fe63b48*/